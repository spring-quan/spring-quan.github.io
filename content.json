{"meta":{"title":"spring's Blog","subtitle":"æ¸¸é¾™å½“å½’æµ·ï¼Œæµ·ä¸è¿æˆ‘è‡ªæ¥ä¹Ÿã€‚","description":"æ¸¸é¾™å½“å½’æµ·ï¼Œæµ·ä¸è¿æˆ‘è‡ªæ¥ä¹Ÿã€‚","author":"spring","url":"http://yoursite.com","root":"/"},"pages":[{"title":"categories","date":"2019-07-21T14:19:35.000Z","updated":"2019-07-21T14:19:56.000Z","comments":false,"path":"categories/index.html","permalink":"http://yoursite.com/categories/index.html","excerpt":"","text":""},{"title":"æ”¶è—ã€èµ„æºã€å¥½æ–‡","date":"2019-07-28T03:02:05.000Z","updated":"2019-08-01T09:09:34.000Z","comments":true,"path":"collection/index.html","permalink":"http://yoursite.com/collection/index.html","excerpt":"","text":"å·¥å…·@card{ ç½‘å€ ç®€ä»‹ æ¨èæŒ‡æ•° Font Awesomeå›¾æ ‡ä¸­æ–‡ç½‘ æä¾›å¯ç¼©æ”¾çŸ¢é‡å›¾æ ‡ â­â­â­â­ æ­£åˆ™è¡¨è¾¾å¼ æ­£åˆ™è¡¨è¾¾å¼ â­â­â­â­ Emoji Homepage markdownè¡¨æƒ… â­â­â­â­â­ å¸¸ç”¨æ•°å­¦ç¬¦å·çš„ LaTeX è¡¨ç¤ºæ–¹æ³• å¸¸ç”¨æ•°å­¦ç¬¦å·çš„ LaTeX è¡¨ç¤ºæ–¹æ³• â­â­â­â­â­ }"},{"title":"å‹æƒ…é“¾æ¥","date":"2019-07-28T03:02:05.000Z","updated":"2019-07-30T07:55:09.000Z","comments":true,"path":"links/index.html","permalink":"http://yoursite.com/links/index.html","excerpt":"","text":"æŒç»­æ›´æ–°ä¸­â€¦æ¬¢è¿ç•™è¨€ï¼Œäº’æ¢å‹é“¾~ å¤§ç‰›çš„åšå®¢@card{ åç§° åšä¸» è¯­è¨€ å¤‡æ³¨ colah's blog Christopher Olah è‹±æ–‡ Google Brainç ”ç©¶å‘˜ï¼ŒOpenAIæˆå‘˜ Jason Weston Jason Weston è‹±æ–‡ Facebookç ”ç©¶ç§‘å­¦å®¶ï¼Œçº½çº¦å¤§å­¦æ•™æˆã€‚ç ”ç©¶é¢†åŸŸæ˜¯ï¼šmemory networkï¼Œdialog systemï¼ŒQA system Richard Socher Richard Socher è‹±æ–‡ æ•™æˆæ–¯å¦ç¦cs224dè¯¾ç¨‹ Lil'Log Lilian è‹±æ–‡ OpenAIæˆå‘˜ facebook research facebook research è‹±æ–‡ facebook research Harvard NLP Harvard NLP è‹±æ–‡ Harvard NLPä¸»é¡µ The BAIR Blog ä¼¯å…‹åˆ©å­¦é™¢ è‹±æ–‡ ä¼¯å…‹åˆ©äººå·¥æ™ºèƒ½ç ”ç©¶é™¢ Free MindFree Mind's old blog å¼ é©°åŸ ä¸­æ–‡ æœ¬ç¡•æµ™å¤§è®¡ç®—æœºï¼Œç°Googleç ”ç©¶ç§‘å­¦å®¶ æçºªä¸ºçš„ä¸»é¡µ æçºªä¸º ä¸­æ–‡ åŒ—å¤§æœ¬ç§‘ï¼Œæ–¯å¦ç¦åšå£«ï¼Œé¦™å†œç§‘æŠ€åˆ›å§‹äºº é»„æ°‘çƒˆæ•™æˆçš„ä¸»é¡µ é»„æ°‘çƒˆæ•™æˆ ä¸­æ–‡ æ¸…åå¤§å­¦è®¡ç®—æœºå­¦é™¢æ•™æˆ }"},{"title":"tags","date":"2019-07-21T14:19:23.000Z","updated":"2019-07-21T14:20:13.000Z","comments":false,"path":"tags/index.html","permalink":"http://yoursite.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"è®ºæ–‡ç¬”è®°ã€ŠBridging the Gap between Training and Inference for Neural Machine Translationã€‹","slug":"è®ºæ–‡ç¬”è®°ã€ŠBridging-the-Gap-between-Training-and-Inference-for-Neural-Machine-Translationã€‹","date":"2019-08-02T06:46:00.000Z","updated":"2019-08-05T05:06:42.000Z","comments":true,"path":"2019/08/02/è®ºæ–‡ç¬”è®°ã€ŠBridging-the-Gap-between-Training-and-Inference-for-Neural-Machine-Translationã€‹/","link":"","permalink":"http://yoursite.com/2019/08/02/è®ºæ–‡ç¬”è®°ã€ŠBridging-the-Gap-between-Training-and-Inference-for-Neural-Machine-Translationã€‹/","excerpt":"ã€æ¥æºã€‘ï¼šACL2019ã€é“¾æ¥ã€‘ï¼šhttps://arxiv.org/abs/1906.02448ã€ä»£ç ã€æ•°æ®é›†ã€‘ï¼š æ— ","text":"ã€æ¥æºã€‘ï¼šACL2019ã€é“¾æ¥ã€‘ï¼šhttps://arxiv.org/abs/1906.02448ã€ä»£ç ã€æ•°æ®é›†ã€‘ï¼š æ—  è¿™ç¯‡è®ºæ–‡ç”±ä¸­ç§‘é™¢å‘è¡¨ï¼Œè·å¾—äº†ACL2019çš„ â€œbest long paperâ€ã€‚ è¦è§£å†³çš„é—®é¢˜åœ¨Neural Machine Translation(NMT)ä»»åŠ¡ä¸­ï¼Œæ¨¡å‹é€šå¸¸é‡‡ç”¨encoder-decoderæ¡†æ¶ï¼ŒåŸºäºRNN æˆ– CNN æˆ–attentionã€‚å‡è®¾è¾“å…¥ä¸º$X = \\lbrace{x_1,x_2,â€¦,x_m}\\rbrace$ï¼ŒçœŸå®è¾“å‡ºä¸º$Y = \\lbrace{y_1^*,y_2^*,â€¦,y_n^*}\\rbrace$ï¼Œé¢„æµ‹è¾“å‡ºä¸º$Yâ€™ = \\lbrace {y_1â€™,y_2â€™,â€¦,y_mâ€™}\\rbrace$ã€‚ ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼šdecoderä¼šä¸€ä¸ªè¯ä¸€ä¸ªè¯åœ°ç”Ÿæˆæ•´ä¸ªå›å¤ã€‚åœ¨trainé˜¶æ®µï¼Œåœ¨æ—¶é—´æ­¥tç”Ÿæˆ$y_tâ€™$æ—¶ï¼Œdecoderä¼šæ ¹æ®ä¹‹å‰çœŸå®çš„è¯$\\lbrace{y_1^*,y_2^*,â€¦,y_{t-1}^*}\\rbrace$æ¥é¢„æµ‹$y_tâ€™$ã€‚åœ¨inferé˜¶æ®µï¼Œç”±äºä¸å¯èƒ½çŸ¥é“çœŸå®è¾“å‡ºï¼Œåœ¨æ—¶é—´æ­¥ç”Ÿæˆ$y_tâ€™$æ—¶ï¼Œdecoderä¼šæ ¹æ®ä¹‹å‰é¢„æµ‹çš„è¯$\\lbrace{y_1â€™,y_2â€™,â€¦,y_{t-1}â€™}\\rbrace$æ¥é¢„æµ‹$y_tâ€™$ã€‚å¯ä»¥çœ‹åˆ°trainé˜¶æ®µä¸inferé˜¶æ®µæ‰€ä¾æ®çš„è¯æ˜¯ä¸åŒçš„ï¼Œtrainé˜¶æ®µå’Œinferé˜¶æ®µé¢„æµ‹çš„è¯$y_tâ€™$æ¥è‡ªä¸¤ä¸ªä¸åŒçš„æ¦‚ç‡åˆ†å¸ƒï¼Œåˆ†åˆ«æ˜¯æ•°æ®åˆ†å¸ƒ(data distribution)å’Œæ¨¡å‹çš„åˆ†å¸ƒ(model distribution)ï¼Œè¿™ç§å·®åˆ«ç§°ä¸ºâ€œçˆ†ç‚¸åå·®(exposure bias)â€ã€‚éšç€é¢„æµ‹åºåˆ—çš„é•¿åº¦å¢åŠ ï¼Œé”™è¯¯ä¼šé€æ¸ç´¯ç§¯ã€‚ä¸ºäº†è§£å†³ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæ¶ˆé™¤trainé˜¶æ®µå’Œinferé˜¶æ®µçš„è¿™ç§å·®åˆ«ï¼Œä¸€ä¸ªå¯èƒ½çš„è§£å†³æ–¹æ³•æ˜¯ï¼šåœ¨trainé˜¶æ®µï¼ŒdecoderåŒæ—¶æ ¹æ®çœŸå®çš„è¯$\\lbrace{y_1^*,y_2^*,â€¦,y_{t-1}^*}\\rbrace$å’Œé¢„æµ‹çš„è¯$\\lbrace{y_1â€™,y_2â€™,â€¦,y_{t-1}â€™}\\rbrace$æ¥ç”Ÿæˆ$y_tâ€™$ã€‚ ç¬¬äºŒä¸ªé—®é¢˜æ˜¯: NMTæ¨¡å‹é€šå¸¸æœ€ä¼˜åŒ–$Yä¸Yâ€™$ä¹‹é—´çš„äº¤å‰ç†µç›®æ ‡å‡½æ•°æ¥æ›´æ–°æ¨¡å‹å‚æ•°ï¼Œä½†äº¤å‰ç†µå‡½æ•°ä¼šä¸¥æ ¼åŒ¹é…é¢„æµ‹è¾“å‡º$Yâ€™$ä¸çœŸå®çš„è¾“å‡º$Y$ã€‚ä½†åœ¨NMTä»»åŠ¡ä¸­ï¼Œä¸€å¥è¯å¯ä»¥æœ‰å¤šä¸ªä¸åŒä½†åˆç†çš„ç¿»è¯‘ã€‚ä¸€æ—¦é¢„æµ‹è¾“å‡º$Yâ€™$çš„æŸä¸ªè¯ä¸$Y$ä¸åŒï¼Œå°½ç®¡å®ƒæ˜¯åˆç†çš„ï¼Œä¹Ÿä¼šè¢«äº¤å‰ç†µå‡½æ•°çº æ­£ã€‚è¿™ç§æƒ…å†µç§°ä¸ºâ€œè¿‡åº¦çº æ­£çš„ç°è±¡â€ã€‚ ä¸ºäº†æ¶ˆé™¤trainé˜¶æ®µä¸inferé˜¶æ®µçš„å·®åˆ«ï¼Œè®ºæ–‡æå‡ºäº†ä¸€ç§åœ¨trainé˜¶æ®µåšæ”¹è¿›çš„è§£å†³æ–¹æ¡ˆã€‚é¦–å…ˆï¼Œä»é¢„æµ‹çš„è¯ä¸­é€‰æ‹©oracle word $y_{j-1}^{oracle}$ï¼Œè®¾çœŸå®è¾“å‡ºä¸­ä¸Šä¸€ä¸ªè¯ä¸º$y_{j-1}^{*}$ã€‚æ¥ç€ä»$\\lbrace{y_{j-1}^{oracle},y_{j-1}^{*}}\\rbrace$ä¸­æŠ½æ ·ä¸€ä¸ªè¯ï¼ŒæŠ½ä¸­$y_{j-1}^{*}$çš„æ¦‚ç‡ä¸º$p$ï¼ŒæŠ½ä¸­$y_{j-1}^{oracle}$çš„æ¦‚ç‡ä¸º$1-p$ã€‚æœ€åï¼Œdecoderæ ¹æ®æŠ½æ ·çš„è¿™ä¸ªè¯æ¥é¢„æµ‹$y_j$ã€‚ åœ¨trainé˜¶æ®µåˆšå¼€å§‹æ—¶ï¼ŒæŠ½ä¸­çœŸå®çš„è¯$y_{j-1}^{*}$çš„æ¦‚ç‡æ¯”è¾ƒå¤§ï¼Œéšç€æ¨¡å‹é€æ¸æ”¶æ•›ï¼ŒæŠ½ä¸­é¢„æµ‹çš„è¯$y_{j-1}^{oracle}$çš„æ¦‚ç‡å˜å¤§ï¼Œè®©æ¨¡å‹æœ‰èƒ½åŠ›å¤„ç†â€è¿‡åº¦çº æ­£çš„é—®é¢˜â€ã€‚ Fig.1 è®ºæ–‡æå‡ºçš„æ–¹æ³•çš„ç»“æ„å›¾ RNN-based NMT ModelNMTä»»åŠ¡å¸¸é‡‡ç”¨encoder-decoderæ¡†æ¶ï¼Œå¯ä»¥åŸºäºRNNæˆ–CNNæˆ–çº¯attentionã€‚è®ºæ–‡æå‡ºçš„æ¶ˆé™¤trainé˜¶æ®µå’Œinferé˜¶æ®µå·®åˆ«çš„æ–¹æ³•ï¼Œå¯ä»¥ç”¨äºä»»ä½•NMTæ¨¡å‹ã€‚è®ºæ–‡ä»¥åŸºäºRNNçš„NMTæ¨¡å‹ä¸ºä¾‹ï¼Œæ¥ä»‹ç»è¿™ç§æ–¹æ³•ã€‚è¿™ä¸€èŠ‚å…ˆä»‹ç»RNN-based NMTæ¨¡å‹ã€‚ä¸‹ä¸€èŠ‚ä»‹ç»NMTæ¨¡å‹å¦‚ä½•ç»“åˆè¿™ç§æ–¹æ³•ã€‚ encoderè®°è¾“å…¥ä¸º$X = \\lbrace{x_1,x_2,â€¦,x_m}\\rbrace$ï¼ŒçœŸå®è¾“å‡ºä¸º$Y = \\lbrace{y_1,y_2,â€¦,y_n}\\rbrace$ã€‚encoderé‡‡ç”¨bi-GRUåˆ†åˆ«è·å–æ­£å‘å’Œåå‘çš„éšè—çŠ¶æ€$\\overrightarrow{h_i},\\overleftarrow{h_i}$ã€‚$x_i$çš„embeddingå‘é‡ä¸º$e_{x_i}$ã€‚$$\\overrightarrow{h_i} = GRU(e_{x_i},h_{i-1})$$ $$\\overleftarrow{h_i} = GRU(e_{x_i},h_{i+1})$$ å°†$\\overrightarrow{h_i},\\overleftarrow{h_i}$è¿æ¥èµ·æ¥ï¼Œä½œä¸º$x_i$å¯¹åº”çš„éšè—çŠ¶æ€ï¼š$$h_i = [\\overrightarrow{h_i},\\overleftarrow{h_i}] \\tag{1}$$ attentionattentionæœºåˆ¶ç”¨æ¥è”ç³»encoderå’Œdecoderï¼Œæ›´å¥½åœ°æ•æ‰source sequenceçš„ä¿¡æ¯ã€‚ä¹Ÿå°±æ˜¯åœ¨æ—¶é—´æ­¥t,é€šè¿‡encoderæ‰€æœ‰çš„éšè—çŠ¶æ€$\\lbrace h_1,h_2,â€¦,h_m \\rbrace$æ¥è®¡ç®—context vector $c_t$ã€‚è®°decoderä¸Šä¸€æ—¶é—´æ­¥çš„éšè—çŠ¶æ€ä¸º$s_{t-1}$ã€‚ $c_t$æ˜¯encoderæ‰€æœ‰éšè—çŠ¶æ€$\\lbrace h_1,h_2,â€¦,h_m \\rbrace$çš„åŠ æƒå’Œï¼š$$c_t = \\sum_{i=1}^{m}\\alpha_{ti}h_i \\tag{2}$$ å…¶ä¸­$\\alpha_{ti}$æ˜¯attentionæƒé‡ï¼Œè®¡ç®—æ–¹å¼ä¸º:$$\\beta_{ti} = v_a^\\top tanh(W_as_{t-1} + U_ah_i) \\tag{3}$$ $$\\alpha_{ti} = softmax(\\beta_{ti}) = \\frac{exp(\\beta_{ti})}{\\sum_jexp(\\beta_{tj})}$$ decoderdecoderé‡‡ç”¨å•å‘GRUçš„å˜ä½“ï¼Œéšè—çŠ¶æ€æ›´æ–°å…¬å¼ä¸º:$$s_t = GRU(s_{t-1},e_{y_{t-1}^*},c_t) \\tag{4}$$ æœ€åæ ¹æ®e_{y_{t-1}^*}ï¼Œdecoderçš„éšè—çŠ¶æ€$s_t$ï¼Œå¯¹åº”çš„context vector $c_t$æ¥é¢„æµ‹$y_t$ã€‚ $$o_t = W_og(e_{y_{t-1}^*},s_t,c_t) \\tag{5}$$ åœ¨è¯æ±‡è¡¨ä¸Šçš„æ¦‚ç‡åˆ†å¸ƒä¸ºï¼š$$P_t(y_t = w) = softmax(o_t) \\tag{6}$$ æ–¹æ³•ä¸ºäº†æ¶ˆé™¤æˆ–å‡è½»trainé˜¶æ®µå’Œinferé˜¶æ®µçš„å·®åˆ«ï¼Œè®ºæ–‡æå‡º ä»çœŸå®çš„è¯$y_{t-1}*$å’Œ$y_{t-1}^{oracle}$é¢„æµ‹çš„è¯ä¸­æŠ½æ ·ï¼Œdecoderæ ¹æ®æŠ½æ ·çš„è¯æ¥é¢„æµ‹ä¸‹ä¸€ä¸ªè¯$y_t$ã€‚ä½¿ç”¨è®ºæ–‡æå‡ºçš„æ–¹æ³•ï¼Œåœ¨æ—¶é—´æ­¥té¢„æµ‹$y_t$åˆ†ä¸ºä¸‰æ­¥ï¼š å…ˆä»é¢„æµ‹çš„è¯ä¸­é€‰æ‹©$y_{t-1}^{oracle}$ã€‚ è®ºæ–‡æå‡ºäº†ä¸¤ç§æ–¹æ³•æ¥é€‰æ‹©oracle wordï¼Œåˆ†åˆ«æ˜¯è¯çº§åˆ«çš„æ–¹æ³•å’Œå¥å­çº§åˆ«çš„æ–¹æ³•ã€‚ ä»$\\lbrace{y_{t-1}^{oracle},y_{t-1}*}\\rbrace$ä¸­æŠ½æ ·å¾—åˆ°$y_{t-1}$ï¼ŒæŠ½ä¸­$y_{t-1}*$çš„æ¦‚ç‡ä¸º$p$ï¼ŒæŠ½ä¸­$y_{t-1}^{oracle}$çš„æ¦‚ç‡ä¸º$1-p$ã€‚ ç”¨æŠ½æ ·çš„è¯$y_{t-1}$æ¥æ›¿æ¢å…¬å¼$(4)(5)$ä¸­çš„$y_{t-1}^*$æ¥é¢„æµ‹ä¸‹ä¸€ä¸ªè¯ã€‚ oracle wordçš„é€‰æ‹©ä¼ ç»Ÿçš„æ–¹æ³•ä¸­ï¼Œdecoderä¼šæ ¹æ®ä¸Šä¸€ä¸ªæ—¶é—´æ­¥çœŸå®çš„$y_{t-1}^*$æ¥é¢„æµ‹$y_t$ã€‚ä¸ºäº†æ¶ˆé™¤trainé˜¶æ®µçš„inferé˜¶æ®µçš„å·®åˆ«ï¼Œå¯ä»¥ä»é¢„æµ‹çš„è¯ä¸­é€‰æ‹©oracle word $y_{t-1}^{oracle}$æ¥ä»£æ›¿$y_{t-1}^*$ã€‚ä¸€ç§æ–¹æ³•æ˜¯æ¯ä¸ªæ—¶é—´æ­¥é‡‡ç”¨è¯çº§åˆ«çš„greedy searchæ¥ç”Ÿæˆoracle wordï¼Œç§°ä¸ºword-level oracle(WO)ï¼Œå¦ä¸€ç§æ–¹æ³•æ˜¯é‡‡ç”¨beam-searchï¼Œæ‰©å¤§æœç´¢ç©ºé—´ï¼Œç”¨å¥å­çº§çš„è¡¡é‡æŒ‡æ ‡(å¦‚ï¼šBLEU)å¯¹beam-searchçš„ç»“æœè¿›è¡Œæ’åºï¼Œç§°ä¸ºsentence-level oracle(SO). word-level oracleé€‰æ‹©$y_{t-1}^{oracle}$æœ€ç®€å•ç›´è§‚çš„æ–¹æ³•æ˜¯ï¼Œåœ¨æ—¶é—´æ­¥t-1ï¼Œé€‰æ‹©å…¬å¼$P_{t-1}$ä¸­æ¦‚ç‡æœ€é«˜çš„è¯ä½œä¸º$y_{t-1}^{oracle}$ï¼Œå¦‚Fig.2æ‰€ç¤ºã€‚ ä¸ºäº†è·å¾—æ›´å¥å£®çš„$y_{t-1}^{oracle}$ï¼Œæ›´å¥½åœ°é€‰æ‹©æ˜¯ä½¿ç”¨gumbel maxæŠ€æœ¯æ¥å†²ç¦»æ•£åˆ†å¸ƒä¸­è¿›è¡ŒæŠ½æ ·ï¼Œå¦‚Fig.3æ‰€ç¤ºã€‚å…·ä½“åœ°è®²ï¼Œå°†gumbel noise $\\eta$ä½œä¸ºæ­£åˆ™åŒ–é¡¹åŠ åˆ°å…¬å¼(5)ä¸­çš„$o_{t-1}$ï¼Œå†è¿›è¡Œsoftmaxæ“ä½œå¾—åˆ°$y_{t-1}$çš„æ¦‚ç‡åˆ†å¸ƒã€‚$$\\eta = -log(-log(u)) $$ $$\\tilde{o_{t-1}} = \\frac{o_{t-1} + \\eta}{\\tau} \\tag{7}$$ $$\\tilde{P_{t-1}} = softmax(\\tilde{o_{t-1}}) \\tag{8}$$ å…¶ä¸­å˜é‡$u \\sim U(0,1)$æœä»å‡åŒ€åˆ†å¸ƒã€‚$\\tau$ä¸ºæ¸©åº¦ç³»æ•°ï¼Œå½“$\\tau \\to 0$æ—¶ï¼Œå…¬å¼(8)çš„softmax()é€æ¸ç›¸å½“äºargmax()å‡½æ•°ï¼›å½“$\\tau \\to \\infty$æ—¶ï¼Œsoftmax()å‡½æ•°é€æ¸ç›¸å½“äºå‡åŒ€åˆ†å¸ƒã€‚åˆ™$y_{t-1}^{oracle}$ä¸º$$y_{t-1}^{oracle} = y_{t-1}^{WO} =argmax(\\tilde{P_{t-1}}) \\tag{9}$$éœ€è¦æ³¨æ„çš„æ˜¯gumbel noise $\\eta$åªç”¨æ¥é€‰æ‹©oracle wordï¼Œè€Œä¸ä¼šå½±å“trainé˜¶æ®µçš„ç›®æ ‡å‡½æ•°ã€‚ Fig.2. word level oracle without gumbel noise Fig.3. word level oracle with gumbel noise sentence-level oracleä¸ºäº†é€‰æ‹©sentence-level oracle wordï¼Œé¦–å…ˆè¦è¿›è¡Œbeam-searchè§£ç ï¼Œè®¾beam sizeä¸ºkï¼Œå¾—åˆ°kä¸ªcandidateå¥å­ã€‚åœ¨beam-searchè§£ç çš„è¿‡ç¨‹ä¸­ï¼Œç”Ÿæˆæ¯ä¸ªè¯æ—¶ä¹Ÿåº”ç”¨gumbel maxæŠ€æœ¯ã€‚æ¥ç€ï¼Œå¾—åˆ°kä¸ªcandidateå¥å­åï¼Œç”¨å¥å­çº§è¡¡é‡æŒ‡æ ‡BLEUæ¥ç»™è¿™kä¸ªå¥å­æ‰“åˆ†ï¼Œå¾—åˆ†æœ€é«˜çš„å¥å­ä¸ºoracle sentence $Y^S = \\lbrace{y_1^S,y_2^S,..,y_{|y^S|}^S}\\rbrace$ã€‚åˆ™æ—¶é—´æ­¥tè§£ç å¯¹åº”çš„oracle word $y_{t-1}^{oracle}$ä¸º$$y_{t-1}^{oracle} = y_{t-1}^{SO} = y_{t-1}^{S} \\tag{10}$$ å½“æ¨¡å‹ä»çœŸå®è¾“å‡º$Y$å’Œsentence oracle $Y^S$æŠ½æ ·ï¼Œè¿™æœ‰ä¸€ä¸ªå‰ææ˜¯ï¼Œè¿™ä¸¤ä¸ªåºåˆ—çš„é•¿åº¦éœ€è¦æ˜¯ä¸€è‡´çš„ã€‚ä½†beam-search decodeä¸èƒ½ä¿è¯è§£ç åºåˆ—çš„é•¿åº¦ã€‚ä¸ºäº†ä¿è¯è¿™ä¸¤ä¸ªåºåˆ—é•¿åº¦ä¸€è‡´ï¼Œè®ºæ–‡æå‡ºäº†force decodingçš„è§£å†³æ–¹æ³•ã€‚ force decodingè®¾çœŸå®è¾“å‡º$Y = \\lbrace{y_1,y_2,â€¦,y_n}\\rbrace$çš„åºåˆ—é•¿åº¦ä¸ºnã€‚force decodingéœ€è¦è§£ç å¾—åˆ°é•¿åº¦åŒæ ·ä¸ºnçš„åºåˆ—ï¼Œä»¥ç‰¹æ®Šå­—ç¬¦â€EOSâ€ç»“æŸã€‚è®¾beam search decodeæ—¶ï¼Œæ—¶é—´æ­¥tå¯¹åº”çš„æ¦‚ç‡åˆ†å¸ƒä¸º$P_t$ã€‚ å½“$t&lt; n$æ—¶ï¼Œå¯¹äºæ¦‚ç‡åˆ†å¸ƒ$P_t$ï¼Œå³ä½¿å­—ç¬¦â€EOSâ€æ˜¯æ¦‚ç‡æœ€é«˜çš„è¯ï¼Œé‚£ä¹ˆç”Ÿæˆæ¦‚ç‡æ¬¡é«˜çš„è¯ã€‚ å½“$t = n+1$æ—¶ï¼Œå¯¹äºæ¦‚ç‡åˆ†å¸ƒ$P_{n+1}$ï¼Œå³ä½¿å­—ç¬¦â€EOSâ€ä¸æ˜¯æ¦‚ç‡æœ€é«˜çš„è¯ï¼Œä¹Ÿè¦ç”Ÿæˆâ€EOSâ€ã€‚ æœçœŸæ˜¯å¼ºåˆ¶ç”Ÿæˆé•¿åº¦ä¸ºnçš„åºåˆ—ã€‚è¿™æ ·beam-search decodeå¾—åˆ°çš„åºåˆ—ä¸çœŸå®è¾“å‡ºåºåˆ—çš„é•¿åº¦å°±æ˜¯ä¸€è‡´çš„ï¼Œéƒ½ä¸ºnã€‚ é€’å‡æŠ½æ ·æ ¹æ®å…¬å¼(9)æˆ–(10)å¾—åˆ°$y_{t-1}^{oracle}$åï¼Œä¸‹ä¸€æ­¥æ˜¯ä»$\\lbrace{y_{t-1}^{oracel},y_{t-1}^*}\\rbrace$ä¸­æŠ½æ ·ï¼ŒæŠ½ä¸­$y_{t-1}^*$çš„æ¦‚ç‡æ˜¯pï¼ŒæŠ½ä¸­$y_{t-1}^{oracle}$çš„æ¦‚ç‡æ˜¯1-pã€‚åœ¨è®­ç»ƒçš„åˆå§‹é˜¶æ®µï¼Œå¦‚æœè¿‡å¤šåœ°é€‰æ‹©$y_{t-1}^{oracle}$ï¼Œä¼šå¯¼è‡´æ¨¡å‹æ”¶æ•›é€Ÿåº¦æ…¢ï¼›åœ¨è®­ç»ƒçš„åæœŸé˜¶æ®µï¼Œå¦‚æœè¿‡å¤šåœ°é€‰æ‹©$y_{t-1}^*$ï¼Œä¼šå¯¼è‡´æ¨¡å‹åœ¨trainé˜¶æ®µæ²¡æœ‰å­¦ä¹ åˆ°å¦‚ä½•å¤„ç†inferé˜¶æ®µçš„å·®åˆ«ã€‚å› æ­¤ï¼Œå¥½çš„é€‰æ‹©æ˜¯ï¼šåœ¨è®­ç»ƒçš„åˆå§‹é˜¶æ®µï¼Œæ›´å¤§æ¦‚ç‡åœ°é€‰æ‹©$y_{t-1}^*$æ¥åŠ å¿«æ¨¡å‹æ”¶æ•›ï¼Œå½“æ¨¡å‹é€æ¸æ”¶æ•›åï¼Œä»¥æ›´å¤§æ¦‚ç‡é€‰æ‹©$y_{t-1}^{oracle}$ï¼Œæ¥è®©æ¨¡å‹å­¦ä¹ åˆ°å¦‚ä½•å¤„ç†inferé˜¶æ®µçš„å·®åˆ«ã€‚ä»æ•°å­¦è¡¨ç¤ºä¸Šï¼Œæ¦‚ç‡$p$å…ˆå¤§åé€æ¸è¡°å‡ï¼Œ$p$éšç€è®­ç»ƒè½®æ•°$e$çš„å¢å¤§è€Œé€æ¸å˜å°ã€‚$$p = \\frac{\\mu}{\\mu + exp(\\frac{e}{\\mu})} \\tag{11}$$å…¶ä¸­ï¼Œ$\\mu$æ˜¯è¶…å‚æ•°ã€‚$p$æ˜¯è½®æ•°$e$çš„å•è°ƒé€’å‡å‡½æ•°ã€‚$e$ä»0å¼€å§‹ï¼Œæ­¤æ—¶ï¼Œ$p=1$ã€‚ è®­ç»ƒå°†é‡‡æ ·å¾—åˆ°çš„$y_{t-1}$ä»£æ›¿å…¬å¼(4)-(6)ä¸­çš„$y_{t-1}^*$æ¥é¢„æµ‹$y_t$åœ¨è¯æ±‡è¡¨ä¸Šçš„æ¦‚ç‡åˆ†å¸ƒã€‚é‡‡ç”¨æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼Œç›¸å½“äºæœ€å°åŒ–ä»¥ä¸‹ç›®æ ‡å‡½æ•°ï¼š$$L(\\theta) = -\\sum_{n=1}^{N}\\sum_{j=1}^{|y_n|}logP_j^n[y_j^n]$$","categories":[{"name":"è®ºæ–‡","slug":"è®ºæ–‡","permalink":"http://yoursite.com/categories/è®ºæ–‡/"}],"tags":[{"name":"ACL2019","slug":"ACL2019","permalink":"http://yoursite.com/tags/ACL2019/"},{"name":"Neural Machine Translation","slug":"Neural-Machine-Translation","permalink":"http://yoursite.com/tags/Neural-Machine-Translation/"}]},{"title":"è®ºæ–‡ç¬”è®°ã€ŠMulti-Level Memory for Task Oriented Dialogsã€‹","slug":"è®ºæ–‡ç¬”è®°ã€ŠMulti-Level-Memory-for-Task-Oriented-Dialogsã€‹","date":"2019-08-01T06:14:37.000Z","updated":"2019-08-01T08:32:54.000Z","comments":true,"path":"2019/08/01/è®ºæ–‡ç¬”è®°ã€ŠMulti-Level-Memory-for-Task-Oriented-Dialogsã€‹/","link":"","permalink":"http://yoursite.com/2019/08/01/è®ºæ–‡ç¬”è®°ã€ŠMulti-Level-Memory-for-Task-Oriented-Dialogsã€‹/","excerpt":"ã€æ¥æºã€‘ï¼šNAACL2019ã€é“¾æ¥ã€‘ï¼šhttps://arxiv.org/pdf/1810.10647.pdfã€ä»£ç ã€æ•°æ®é›†ã€‘ï¼šhttps://github.com/DineshRaghu/multi-level-memory-network","text":"ã€æ¥æºã€‘ï¼šNAACL2019ã€é“¾æ¥ã€‘ï¼šhttps://arxiv.org/pdf/1810.10647.pdfã€ä»£ç ã€æ•°æ®é›†ã€‘ï¼šhttps://github.com/DineshRaghu/multi-level-memory-network å·²æœ‰å·¥ä½œä¸­ï¼Œç«¯åˆ°ç«¯çš„ä»»åŠ¡å‹å¯¹è¯ç³»ç»Ÿé‡‡ç”¨memory networkæ¥ç»“åˆå¤–éƒ¨çš„çŸ¥è¯†åº“(knowledgt base) å’Œ å¯¹è¯å†å²(context)ã€‚ä¸ºäº†ä½¿ç”¨ä»è·‘ä¸€è¶Ÿ networkï¼Œé€šå¸¸å°†äºŒè€…æ”¾åœ¨åŒä¸€ä¸ªmemoryä¸­ã€‚è¿™æ ·å¸¦æ¥çš„é—®é¢˜æ˜¯ï¼šmemoryå˜å¾—å¤ªå¤§ï¼Œæ¨¡å‹åœ¨è¯»å–memoryæ—¶éœ€è¦åŒºåˆ†å¤–éƒ¨çŸ¥è¯†åº“å’Œå¯¹è¯å†å²ï¼Œå¹¶ä¸”åœ¨memoryä¸Šçš„æ¨ç†å˜å¾—å¾ˆéš¾ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè®ºæ–‡å°†å¤–éƒ¨çŸ¥è¯†åº“å’Œå¯¹è¯å†å²åŒºåˆ†å¼€ï¼Œå¦å¤–ï¼Œå°†å¤–éƒ¨çŸ¥è¯†åº“ä¿å­˜ä¸ºåˆ†å±‚çš„memoryã€‚ æ¨¡å‹ç»“æ„æ¨¡å‹ä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ã€‚ åˆ†çº§encoderï¼š åˆ†åˆ«ç¼–ç å¯¹è¯å†å²ä¸­çš„å¥å­ã€‚ milti-level memory ä¿å­˜äº†ç›®å‰ä¸ºæ­¢æ‰€æœ‰çš„queryä»¥åŠå¯¹åº”çš„çŸ¥è¯†åº“æŸ¥è¯¢ç»“æœï¼Œæ˜¯ä»¥åˆ†çº§çš„æ–¹å¼ä¿å­˜åœ¨memoryä¸­çš„ã€‚ copyæœºåˆ¶å¢å¼ºçš„decoderï¼š ä»è¯æ±‡è¡¨ä¸­ç”Ÿæˆè¯ï¼Œæˆ–è€…ä»çŸ¥è¯†åº“multi-level memoryä¸­å¤åˆ¶è¯ï¼Œæˆ–è€…ä»å¯¹è¯å†å²(context)ä¸­å¤åˆ¶è¯ã€‚ Fig.1. æ¨¡å‹çš„æ•´ä½“æ¡†æ¶å›¾æ¥æº:Revanth Reddy2019 åˆ†çº§encoderåœ¨ç¬¬tè½®ï¼Œå¯¹è¯å†å²å…±æœ‰2t-1ä¸ªå¥å­$\\lbrace{c_1,c_2,â€¦,c_{2t-1}}\\rbrace$ï¼Œå…¶ä¸­ç”¨æˆ·å¯¹è¯ä¸ºtè½®ï¼Œå›å¤å¯¹è¯ä¸ºt-1è½®ã€‚ æ¯ä¸ªå¥å­$c_i$éƒ½æ˜¯è¯åºåˆ—$\\lbrace{w_{i1},w_{i2},â€¦,w_{im}}\\rbrace$ã€‚æ¯ä¸ªå¥å­$c_i$å…ˆç»è¿‡embedding layerå¾—åˆ°è¯å‘é‡è¡¨ç¤ºï¼Œå†ç»è¿‡å•å±‚bi-GRUå¾—åˆ°å¥å­çš„å‘é‡è¡¨ç¤º$\\varphi(c_i)$ã€‚$h_{ij}^e$è¡¨ç¤ºè¯$w_{ij}$å¯¹åº”çš„éšè—çŠ¶æ€ã€‚å†å°†$\\varphi{c_i}$ç»è¿‡å¦ä¸€ä¸ªå•è¯GRUæ¥å¾—åˆ°contextçš„å‘é‡è¡¨ç¤º$c$ã€‚ multi-level memorymemoryçš„å…³é”®æ˜¯åˆ†çº§çš„åˆ†ä¸ºä¸‰çº§ï¼šquery $\\to$ result $\\to$ result keyå’Œresult valueã€‚è§Fig.2ã€‚è®°æœ¬è½®å¯¹è¯ä¹‹å‰æ‰€æœ‰çš„çŸ¥è¯†åº“queryä¸º$q_1,â€¦,q_k$ã€‚æ¯ä¸ªquery $q_i$æ˜¯ä¸€ä¸ª(key,value)å¯¹ï¼Œ$q_i = \\lbrace{k_a^{q_i}:v_a^{q_i},0&lt; a&lt; n_{q_i}}\\rbrace $ã€‚å…¶ä¸­keyå’Œvalueåˆ†åˆ«å¯¹åº”queryçš„æ§½(slots)å’Œæ§½å€¼ï¼Œ$n_{q_i}$æ˜¯query $q_i$çš„æ§½å€¼ä¸ªæ•°ã€‚ç¬¬jè½®å¯¹è¯ï¼Œç”¨query $q_i$æŸ¥è¯¢çŸ¥è¯†åº“çš„è¿”å›ç»“æœä¸ºresult $r_{ij}$ã€‚$r_{ij}$ä¹Ÿæ˜¯ä¸€ä¸ªkey-valueå¯¹ï¼Œ$r_{ij} = \\lbrace{k_a^{r_{ij}}:v_a^{r_{ij}},0&lt; a &lt; n_{r_{ij}}}\\rbrace$ã€‚å…¶ä¸­$n_{r_{ij}}$æ˜¯key-valueå¯¹çš„ä¸ªæ•°ã€‚ Fig.2. multi memoryæ¥æº:Revanth Reddy2019 ç¬¬ä¸€çº§memoryæ˜¯queryçš„å‘é‡è¡¨ç¤ºã€‚ $q_i$çš„å‘é‡è¡¨ç¤ºä¸º$q_i^v$ï¼Œ$q_i^v$ä¸ºæ‰€æœ‰values $v_a^{q_i}$çš„è¯è¢‹(bag of words)å‘é‡è¡¨ç¤ºã€‚ ç¬¬äºŒçº§memoryæ˜¯resultçš„å‘é‡è¡¨ç¤ºã€‚åŒæ ·åœ°ï¼Œ$r_{ij}$çš„å‘é‡è¡¨ç¤ºä¸º$r_{ij}^v$ï¼Œ$r_{ij}^v$ä¸ºæ‰€æœ‰values $v_a^{r_{ij}}$çš„è¯è¢‹(BOW)å‘é‡è¡¨ç¤ºã€‚ ç¬¬ä¸‰çº§memoryæ˜¯resultçš„key-valueå¯¹ï¼Œ$(k_a^{r_{ij}}:v_a^{r_{ij}})$ï¼Œå…¶ä¸­value $v_a^{r_{ij}}$å¯èƒ½ä¼šè¢«å¤åˆ¶åˆ°å›å¤ä¸­ã€‚ copyæœºåˆ¶å¢å¼ºçš„decoderdecoderä¸€ä¸ªè¯ä¸€ä¸ªè¯åœ°ç”Ÿæˆå›å¤ã€‚åœ¨æ—¶é—´æ­¥tç”Ÿæˆè¯$y_t$æ—¶ï¼Œå¯èƒ½ä»è¯æ±‡è¡¨ä¸­ç”Ÿæˆï¼Œä¹Ÿèƒ½ä»ä¸¤ä¸ªåˆ†å¼€çš„memoryä¸Šå¤åˆ¶ã€‚ç”¨é—¨$g_1$æ¥é€‰æ‹©æ˜¯ä»è¯æ±‡è¡¨ä¸Šç”Ÿæˆï¼Œè¿˜æ˜¯ä»memoryä¸­å¤åˆ¶ã€‚å¦‚æœæ˜¯åè€…ï¼Œç”¨å¦ä¸€ä¸ªé—¨$g_2$æ¥é€‰æ‹©æ˜¯ä»contextä¸­å¤åˆ¶ï¼Œè¿˜æ˜¯ä»çŸ¥è¯†åº“å¤åˆ¶ã€‚ ä»è¯æ±‡è¡¨ç”Ÿæˆè¯ æ—¶é—´æ­¥tï¼Œdecoderçš„éšè—çŠ¶æ€$h_t$ä¸º$$h_t = GRU(y_{t-1},s_{t-1})$$ç”¨$h_t$è®¡ç®—åœ¨encoderçš„æ‰€æœ‰éšè—çŠ¶æ€ä¸Šçš„attentionæƒé‡ï¼Œé‡‡ç”¨â€concat attentionâ€æœºåˆ¶ï¼š$$a_{ij} = softmax(w_1^\\top tanh(W_2tanh(W_3[h_t,h_{ij}^e]))) = \\frac{w_1^\\top tanh(W_2tanh(W_3[h_t,h_{ij}^e]))}{\\sum_{ij}w_1^\\top tanh(W_2tanh(W_3[h_t,h_{ij}^e]))}$$åˆ™context vectorä¸º$$d_t = \\sum_{ij}a_{ij}h^e_{ij}$$ $h_t$å’Œ$d_t$è¿æ¥åç»è¿‡çº¿æ€§å±‚å’Œsoftmaxå±‚å¾—åˆ°åœ¨è¯æ±‡è¡¨ä¸Šçš„æ¦‚ç‡åˆ†å¸ƒï¼š$$P_g(y_t) = softmax(W_1[h_t,d_t] + b_1)$$ ä»context memoryä¸­å¤åˆ¶è¯ ç›´æ¥å°†è®¡ç®—context vectoræ—¶çš„attentionæƒé‡ï¼Œä½œä¸ºåœ¨contextæ‰€æœ‰è¯$w_{ij}$ä¸Šçš„æ¦‚ç‡åˆ†å¸ƒï¼š$$P_{con}(y_t = w) = \\sum_{ij:w_{ij}=w}a_{ij}$$ ä»KB memoryä¸­å¤åˆ¶å®ä½“ æ—¶é—´æ­¥tçš„éšè—çŠ¶æ€$h_t$å’Œcontext vector $d_t$ç”¨æ¥è®¡ç®—åœ¨æ‰€æœ‰queryä¸Šçš„attentionæƒé‡ã€‚ç¬¬ä¸€çº§åœ¨æ‰€æœ‰query $q_1,q_2,â€¦,q_k$çš„attentionæƒé‡ä¸º$$\\alpha_i = softmax(w_2^\\top tanh(W_4[h_t,d_t,q_i^v])) = \\frac{w_2^\\top tanh(W_4[h_t,d_t,q_i^v])}{\\sum_{i}w_2^\\top tanh(W_4[h_t,d_t,q_i^v])}$$ ç¬¬äºŒçº§$\\beta_i$åœ¨$q_i$å¯¹åº”çš„$r_i$ä¸Šçš„attentionæƒé‡ä¸º$$\\beta_{ij} = softmax(w_3^\\top tanh(W_5[h_t,d_t,r_{ij}^v])) = \\frac{w_3^\\top tanh(W_5[h_t,d_t,r_{ij}^v])}{\\sum_{j}w_3^\\top tanh(W_5[h_t,d_t,r_{ij}^v])}$$ ç¬¬ä¸€çº§attentionå’Œç¬¬äºŒçº§attentionçš„ä¹˜ç§¯æ˜¯åœ¨æ‰€æœ‰resultä¸Šçš„attentionæƒé‡åˆ†å¸ƒã€‚åˆ™memoryæ€»çš„å‘é‡è¡¨ç¤ºä¸º$$m_t = \\sum_{i}\\sum_j\\alpha_i\\beta_{ij}r_{ij}^v$$ ç¬¬ä¸‰çº§memoryä¸ºresultçš„key-valueå¯¹$(k_a^{r_{ij}}:v_a^{r_{ij}})$ï¼Œç±»ä¼¼äº(Eric and Manning, 2017)ï¼Œç”¨key $k_a^{r_{ij}}$æ¥è®¡ç®—attentionæƒé‡ï¼Œå°†å¯¹åº”çš„value $v_a^{r_{ij}}$å¤åˆ¶åˆ°å›å¤ä¸­ã€‚åœ¨$r_{ij}$æ‰€æœ‰keysä¸Šçš„attentionæƒé‡ä¸º$$\\gamma_{ijl} = softmax(w_4^\\top tanh(W_6[h_t,d_t,m_t,k_l^{r_{ij}}]))$$åˆ™åœ¨æ‰€æœ‰values $v_a^{r_{ij}}$çš„æ¦‚ç‡åˆ†å¸ƒä¸º:$$P_{kb}(y_t = w) = \\sum_{ijl:v_l^{r_{ij}}=w}\\alpha_i\\beta_{ij}\\gamma_{ijl}$$ decoding æˆ‘ä»¬ç”¨é—¨æœºåˆ¶$g_2$æ¥æ¥ç»“åˆ$P_{con}(y_t)$å’Œ$P_{kb}(y_t)$ï¼Œå¾—åˆ°memoryä¸Šçš„copyæ¦‚ç‡åˆ†å¸ƒ$P_c(y_t)$ã€‚$$g_2 = sigmoid(W_7[h_t,d_t,m_t]+b_2)$$ $$P_c(y_t) = g_2P_{kb}(y_t) + (1-g_2)P_{con}(y_t)$$ ç”¨é—¨æœºåˆ¶$g_1$æ¥ç»“åˆ$P_{c}(y_t)$å’Œ$P_{g}(y_t)$æ¥å¾—åˆ°æ€»çš„æ¦‚ç‡åˆ†å¸ƒ$P(y_t)$ï¼š$$g_1 = sigmoid(W_8[h_t,d_t,m_t]+b_3)$$ $$P(y_t) = g_1P_g(y_t) + (1-g_1)P_c(y_t)$$","categories":[{"name":"è®ºæ–‡","slug":"è®ºæ–‡","permalink":"http://yoursite.com/categories/è®ºæ–‡/"}],"tags":[{"name":"dialog system","slug":"dialog-system","permalink":"http://yoursite.com/tags/dialog-system/"},{"name":"NAACL2019","slug":"NAACL2019","permalink":"http://yoursite.com/tags/NAACL2019/"},{"name":"Memory Network","slug":"Memory-Network","permalink":"http://yoursite.com/tags/Memory-Network/"}]},{"title":"Neural Turing Machinesä¸Memory Network","slug":"Neural-Turing-Machinesä¸Memory-Network","date":"2019-07-26T03:03:15.000Z","updated":"2019-08-01T02:30:21.000Z","comments":true,"path":"2019/07/26/Neural-Turing-Machinesä¸Memory-Network/","link":"","permalink":"http://yoursite.com/2019/07/26/Neural-Turing-Machinesä¸Memory-Network/","excerpt":"ä»‹ç»Memory Networksã€‚","text":"ä»‹ç»Memory Networksã€‚ Neural Turing Machines-ç¥ç»å›¾çµæœºGoogle DeepMindå›¢é˜Ÿåœ¨Alex Graves2014æå‡ºNeural Turing Machinesï¼Œç¬¬ä¸€æ¬¡æå‡ºç”¨external memoryæ¥æé«˜ç¥ç»ç½‘ç»œçš„è®°å¿†èƒ½åŠ›ã€‚è¿™ä¹‹ååˆå‡ºç°äº†å¤šç¯‡å…³äºMemory Networksçš„è®ºæ–‡ã€‚æˆ‘ä»¬å…ˆçœ‹çœ‹Turing Machinesçš„æ¦‚å¿µã€‚ Turing Machines-å›¾çµæœºè®¡ç®—æœºå…ˆé©±turingåœ¨1936å¹´æå‡ºäº†Turing Machinesè¿™æ ·ä¸€ä¸ªè®¡ç®—æ¨¡å‹ã€‚å®ƒç”±ä¸‰ä¸ªåŸºæœ¬çš„ç»„ä»¶ï¼š tape: ä¸€ä¸ªæ— é™é•¿çš„çº¸å¸¦ä½œä¸ºmemoryï¼ŒåŒ…å«æ— æ•°ä¸ªsymbolsï¼Œæ¯ä¸ªsymbolçš„å€¼ä¸º0ã€1æˆ–â€$\\space$â€ã€‚ head: è¯»å†™å¤´ï¼Œå¯¹tapeä¸Šçš„symbolsè¿›è¡Œè¯»æ“ä½œå’Œå†™æ“ä½œã€‚ controllerï¼š æ ¹æ®å½“å‰çŠ¶æ€æ¥æ§åˆ¶headçš„æ“ä½œã€‚ ç†è®ºä¸ŠTuring Machineså¯ä»¥æ¨¡æ‹Ÿä»»ä½•ä¸€ä¸ªè®¡ç®—ç®—æ³•ï¼Œä¸ç®¡è¿™ä¸ªç®—æ³•å¤šä¹ˆå¤æ‚ã€‚ä½†ç°å®ä¸­ï¼Œè®¡ç®—æœºä¸å¯èƒ½æœ‰æ— é™å¤§çš„memory spaceï¼Œå› æ­¤Turing Machinesåªæ˜¯æ•°å­¦æ„ä¹‰ä¸Šçš„è®¡ç®—æ¨¡å‹ã€‚ Fig. 1. How a Turing machine looks like.(æ¥æº: http://aturingmachine.com/) Neural Turing MachinesNeural Turing Machines(NTM,Alex Graves2014)ç”¨external memoryæ¥æé«˜ç¥ç»ç½‘ç»œçš„è®°å¿†èƒ½åŠ›ã€‚LSTM(Long and short memory)é€šè¿‡é—¨æœºåˆ¶æœ‰æ•ˆç¼“è§£äº†RNNçš„â€™æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸é—®é¢˜â€™ï¼Œå¯ä»¥é€šè¿‡internal memoryå®ç°é•¿æœŸè®°å¿†ã€‚å½“LSTMçš„internal memoryçš„è®°å¿†èƒ½åŠ›æœ‰é™ï¼Œéœ€è¦ç”¨external memoryæ¥æé«˜ç¥ç»ç½‘ç»œçš„è®°å¿†èƒ½åŠ›ã€‚ Neural Turing MachinesåŒ…å«ä¸¤ä¸ªåŸºæœ¬ç»„ä»¶ï¼ša neural network controllerå’Œmemory bankã€‚memoryæ˜¯ä¸€ä¸ª $N\\cdot M$é˜¶çš„çŸ©é˜µï¼ŒåŒ…å«Nä¸ªå‘é‡ï¼Œæ¯ä¸ªå‘é‡çš„ç»´åº¦æ˜¯Mã€‚æˆ‘ä»¬æŠŠæ¯ä¸ªmemory vectorç§°ä¸ºmemory locationã€‚controlleræ§åˆ¶headså¯¹memoryè¿›è¡Œè¯»å†™æ“ä½œã€‚ å¦‚ä½•å¯¹memory matrixè¿›è¡Œè¯»å†™æ“ä½œå‘¢ï¼Ÿå…³é”®é—®é¢˜æ˜¯å¦‚ä½•è®©è¯»å†™æ“ä½œæ˜¯å¯å¾®çš„ï¼Œè¿™æ ·æ‰èƒ½ç”¨æ¢¯åº¦ä¸‹é™æ³•æ¥æ›´æ–°æ¨¡å‹å‚æ•°ã€‚å…·ä½“æ¥è¯´ï¼Œé—®é¢˜æ˜¯è®©æ¨¡å‹å…³äºmemory locationæ˜¯å¯å¾®çš„ï¼Œä½†memory locationsæ˜¯ç¦»æ•£çš„ã€‚Neural Turing Machinesç”¨äº†ä¸€ä¸ªå¾ˆèªæ˜çš„æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼šä¸æ˜¯å¯¹å•ç‹¬æŸä¸ªmemory locationè¿›è¡Œè¯»å†™æ“ä½œï¼Œè€Œæ˜¯å¯¹æ‰€æœ‰çš„memory locationsè¿›è¡Œä¸åŒç¨‹åº¦çš„è¯»å†™æ“ä½œï¼Œè¿™ä¸ªç¨‹åº¦æ˜¯é€šè¿‡attentionçš„æƒé‡åˆ†å¸ƒæ¥æ§åˆ¶çš„ã€‚ Fig. 2. Neural Turing Machine Architecture è¯»æ“ä½œè®°æ—¶é—´æ­¥t memory matrixä¸º$N\\cdot M$é˜¶çŸ©é˜µ$M_t$ï¼Œ$w_t$æ˜¯åœ¨Nä¸ªmemoryå‘é‡ä¸Šçš„æƒé‡åˆ†å¸ƒï¼Œæ˜¯ä¸€ä¸ªNç»´å‘é‡ã€‚åˆ™æ—¶é—´æ­¥tçš„read vector $r_t$ä¸º$$r_t = \\sum_{i=1}^{N}w_t(i)\\cdot M_t(i)$$ $$where: \\sum_{i=1}^{N}w_t(i) = 1; 0 \\le w_t(i) \\le 1,\\forall i $$å…¶ä¸­ï¼Œ$w_t(i)$æ˜¯$w_t$çš„ç¬¬iä¸ªå…ƒç´ ï¼Œ$M_t(i)$æ˜¯$M_t$çš„ç¬¬iä¸ªè¡Œå‘é‡ã€‚ å†™æ“ä½œå—LSTMé—¨æœºåˆ¶çš„å¯å‘ï¼Œå°†å†™æ“ä½œåˆ†æˆä¸¤æ­¥ï¼šå…ˆeraseï¼Œå†addã€‚å…ˆæ ¹æ®erase vector $e_t$æ“¦å»æ—§çš„å†…å®¹ï¼Œå†æ ¹æ®add vector $a_t$æ·»åŠ æ–°çš„å†…å®¹ã€‚ å…ˆeraseï¼š åœ¨æ—¶é—´æ­¥tï¼Œattentionæƒé‡åˆ†å¸ƒä¸º$w_t$ï¼Œerase vector $e_t$æ˜¯ä¸€ä¸ªMç»´å‘é‡ï¼Œæ¯ä¸ªå…ƒç´ å–å€¼[0,1]ï¼Œä¸Šä¸€ä¸ªæ—¶é—´æ­¥çš„memory vectorä¸º$M_{t-1}$ã€‚åˆ™eraseæ“ä½œä¸º$$\\tilde{M_{t}}(i) = M_{t-1}(i)[\\vec{1}-w_t(i)e_t]$$ $\\vec{1}$æ˜¯ä¸€ä¸ªMç»´çš„å…¨1å‘é‡ã€‚å¯¹memory vectorçš„eraseæ“ä½œæ˜¯é€ç‚¹è¿›è¡Œçš„ã€‚å½“$e_t$çš„å…ƒç´ å’Œmemory locationå¯¹åº”æƒé‡$w_t(i)$çš„å…ƒç´ å€¼éƒ½æ˜¯1æ—¶ï¼Œmemory vector $M_t(i)$çš„å…ƒç´ å€¼æ‰ä¼šç½®ä¸º0ã€‚å¦‚æœ$e_t$æˆ–$w_t(i)$çš„å…ƒç´ å€¼ä¸º0æ—¶ï¼Œmemory vector $M_t(i)$çš„å…ƒç´ å€¼ä¿æŒä¸å˜ã€‚ å†add: æ¯ä¸ªwrite headä¼šäº§ç”Ÿä¸€ä¸ªMç»´çš„add vector a_tï¼Œåˆ™ï¼š$$M_t(i) = \\tilde{M_{t}}(i) + w_t(i)a_t$$è‡³æ­¤ï¼Œå°±å®Œæˆäº†å†™æ“ä½œã€‚ å¯»å€æœºåˆ¶è¿›è¡Œè¯»å†™æ“ä½œå‰ï¼Œè¦ææ¸…æ¥šå¯¹å“ªä¸ªmemory locationè¿›è¡Œè¯»å†™å‘¢ï¼Ÿè¿™å°±æ˜¯å¯»å€ã€‚ä¸ºäº†è®©æ¨¡å‹å…³äºmemory locatioså¯å¾®ï¼ŒNeural Turing Machinesä¸æ˜¯å¯¹æŸä¸ªå•ç‹¬çš„memory locationè¿›è¡Œè¯»å†™æ“ä½œï¼Œè€Œæ˜¯å¯¹æ‰€æœ‰memory locationsè¿›è¡Œä¸åŒç¨‹åº¦çš„è¯»å†™æ“ä½œï¼Œè¿™ä¸ªç¨‹åº¦å°±æ˜¯ç”±æƒé‡åˆ†å¸ƒ$w_t$æ¥æ§åˆ¶çš„ã€‚æ¨¡å‹ç»“åˆå¹¶åŒæ—¶ä½¿ç”¨äº†content-basedå’Œlocation-basedä¸¤ç§å¯»å€æ–¹å¼æ¥è®¡ç®—è¿™ä¸ªæƒé‡åˆ†å¸ƒ$w_t$ã€‚å…·ä½“åœ°ï¼Œæƒé‡è®¡ç®—åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š content-based addressing æ—¶é—´æ­¥tï¼Œæ¯ä¸ªheadäº§å‡ºä¸€ä¸ªMç»´çš„key vector $k_t$ï¼Œé€šè¿‡$k_t$ä¸memory vectors $M_t(i)$ä¹‹é—´çš„ç›¸ä¼¼æ€§æ¥è®¡ç®—content-based attentionæƒé‡åˆ†å¸ƒ$w_{t}^{c}$ã€‚ç›¸ä¼¼æ€§æ˜¯é€šè¿‡ä½™å¼¦ç›¸ä¼¼åº¦æ¥è¡¡é‡çš„ã€‚$$w_{t}^{c} = softmax(\\beta_tK(k_t,M_t(i))) = \\frac{\\beta_tK(k_t,M_t(i))}{\\sum_{j}K(k_t,M_t(j))}$$ $$K(u,v) = \\frac{u\\cdot v}{|u|\\cdot |v|}$$ $\\beta_t$å¯ä»¥æ”¾å¤§æˆ–ç¼©å°æƒé‡çš„ç²¾åº¦ã€‚ å†…æ’æ³• æ¯ä¸ªheadäº§ç”Ÿä¸€ä¸ªinterpolation gate $g_t$ï¼Œå–å€¼[0,1]ã€‚content-based attentionæƒé‡åˆ†å¸ƒä¸º$w_t^{c}$ï¼Œä¸Šä¸€ä¸ªæ—¶é—´æ­¥çš„attentionæƒé‡åˆ†å¸ƒä¸º$w_{t-1}$ã€‚åˆ™é—¨æ§åˆ¶çš„æƒé‡åˆ†å¸ƒ$w_t^g$ä¸ºï¼š$$w_t^g = g_tw_t^c + (1-g_t)w_{t-1}$$å½“$g_t$ä¸º0æ—¶ï¼Œé‡‡ç”¨ä¸Šä¸€ä¸ªæ—¶é—´æ­¥çš„æƒé‡åˆ†å¸ƒ$w_{t-1}$ï¼Œå½“$g_t$ä¸º1æ—¶ï¼Œé‡‡ç”¨content-based attentionæƒé‡åˆ†å¸ƒ$w_t^c$ã€‚ å¾ªç¯å·ç§¯ å¯¹ç»è¿‡æ’å€¼åçš„æƒé‡åˆ†å¸ƒ$w_t^g$è¿›è¡Œå¾ªç¯å·ç§¯ï¼Œä¸»è¦åŠŸèƒ½æ˜¯å¯¹æƒé‡è¿›è¡Œæ—‹è½¬ä½ç§»ã€‚æ¯”å¦‚å½“æƒé‡åˆ†å¸ƒå…³æ³¨æŸä¸ªmemory locationæ—¶ï¼Œç»è¿‡å¾ªç¯å·ç§¯å°±ä¼šæ‰©å±•åˆ°é™„è¿‘çš„memory locationsï¼Œä¹Ÿä¼šå¯¹é™„è¿‘çš„memory locationsè¿›è¡Œå°‘é‡çš„è¯»å†™æ“ä½œã€‚æ¯ä¸ªheadäº§ç”Ÿçš„è½¬ç§»æƒé‡ä¸º$s_t$,å¾ªç¯å·ç§¯çš„æ“ä½œä¸º:$$\\tilde{w_t(i)} = \\sum_{j=0}^{N-1}w_t^g(i)s_t(i-j)$$ å…³äº$s_t$çš„è¯¦ç»†ä»‹ç»å¯ä»¥è§attention?attenion!; å¾ªç¯å·ç§¯çš„è¯¦ç»†ä»‹ç»å¯ä»¥è§Neural Turing Machines-NTMç³»åˆ—ï¼ˆä¸€ï¼‰ç®€è¿° é”åŒ– å¾ªç¯å·ç§¯å¾€å¾€ä¼šé€ æˆæƒé‡æ³„æ¼å’Œåˆ†æ•£ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦æœ€åè¿›è¡Œé”åŒ–æ“ä½œã€‚$$w_t(i) = \\frac{\\tilde{w_t(i)^{\\gamma_t}}}{\\sum_j\\tilde{w_t(j)^{\\gamma_t}}}$$å…¶ä¸­$\\gamma_t &gt;1$ã€‚è‡³æ­¤ï¼Œå°±å¾—åˆ°äº†æ—¶é—´æ­¥tçš„æƒé‡åˆ†å¸ƒ$w_t$ã€‚å¯ä»¥æ ¹æ®è¿™ä¸ªæƒé‡åˆ†å¸ƒ$w_t$å¯¹memory matrixè¿›è¡Œè¯»å†™æ“ä½œã€‚ æ€»ç»“ä»¥ä¸‹è¿™4æ­¥æ“ä½œã€‚ç¬¬ä¸€æ­¥content-based addressingæ ¹æ®è¾“å…¥å¾—åˆ°å…³äºmemory locationsçš„ç›¸ä¼¼åº¦ï¼›åä¸‰æ­¥å®ç°äº†location-based addressingã€‚ç¬¬äºŒæ­¥æ’å€¼æ“ä½œå¼•å…¥äº†ä¸Šä¸€ä¸ªæ—¶é—´æ­¥çš„æƒé‡åˆ†å¸ƒï¼Œå¯¹content-based æƒé‡è¿›è¡Œä¿®æ­£ï¼›ç¬¬ä¸‰æ­¥å¾ªç¯å·ç§¯å°†æ¯ä¸ªä½ç½®çš„æƒé‡å‘ä¸¤è¾¹åˆ†æ•£ï¼›ç¬¬å››æ­¥é”åŒ–æ“ä½œå°†æƒé‡çªå‡ºåŒ–ï¼Œå¤§çš„æ›´å¤§ï¼Œå°çš„æ›´å°ã€‚ Fig.3. å¯»å€æœºåˆ¶çš„4æ­¥æ“ä½œ Fig.4. å¯»å€æœºåˆ¶çš„4æ­¥æ“ä½œæ¥æºï¼š[Alex Graves2014](https://arxiv.org/abs/1410.5401) å‚è€ƒé“¾æ¥ Attention and Augmented Recurrent Neural Networks ç”¨åŠ¨å›¾ç›´è§‚åœ°è¡¨ç°Neural Turing Machinesçš„è®¡ç®—è¿‡ç¨‹ã€‚æ¨èï¼ğŸ‘ è®°å¿†ç½‘ç»œä¹‹Neural Turing Machinesï¼Œä¸­æ–‡ attention?attenion! Memory Networkåœ¨Neural Turing Machinesæå‡ºä»…ä»…äº”å¤©åï¼ŒFacebookç ”ç©¶å‘˜Jason Westonå‘è¡¨äº†MEMORY NETWORKSã€‚åœ¨QAç³»ç»Ÿçš„é¢†åŸŸï¼Œåº”ç”¨memory networkã€‚è™½ç„¶RNNæˆ–LSTMå¯ä»¥é€šè¿‡hidden stateå’Œweightsæ¥è¿›è¡ŒçŸ­æœŸè®°å¿†ï¼Œä½†å®ƒä»¬çš„è®°å¿†èƒ½åŠ›æ˜¯æœ‰é™çš„ã€‚è¦å®ç°é•¿æœŸè®°å¿†ï¼Œéœ€è¦memory networkã€‚ Memory Networkçš„ä¸€èˆ¬æ¡†æ¶memory networkåŒ…æ‹¬ä¸€ä¸ªè®°å¿†å•å…ƒmemoryï¼Œå’Œå››ä¸ªåŸºæœ¬ç»„ä»¶ï¼š I(input feature map): å°†input xè¿›è¡Œå‘é‡åŒ–è¡¨ç¤ºï¼Œç¼–ç ä¸ºfeature representation I(x)ã€‚ G(generalization): å¯¹memoryè¿›è¡Œå†™æ“ä½œã€‚æ ¹æ®input æ¥æ›´æ–°memory $m_i$ã€‚$m_i = G(m_i,I(x),m)$ O(output feature map): å¯¹memoryè¿›è¡Œè¯»æ“ä½œã€‚æ ¹æ®inputå’Œmemoryç”Ÿæˆoutput featureã€‚$o = O(I(x),m)$ R(response): æ ¹æ®output feature oæ¥ç”Ÿæˆresponseã€‚ Fig.5. memory networkçš„æ¡†æ¶å›¾ memory networkæ¡†æ¶çš„å®ç°â€“MemNNsåœ¨Iæ¨¡å—å°†input $x_i$ç¼–ç ä¸º$I(x_i)$åï¼ŒGæ¨¡å—ä¹‹é—´å°†$I(x_i)$ä¿å­˜åˆ°ä¸‹ä¸€ä¸ªç©ºçš„memory slotä¸­ï¼Œè€Œä¸æ›´æ–°æ—§çš„memory slotsã€‚çœŸæ­£å®ç°inferenceçš„æ ¸å¿ƒæ¨¡å—æ˜¯Oå’ŒRã€‚ Oæ¨¡å—åœ¨ç»™å®šxçš„æ¡ä»¶ä¸‹ï¼Œä¾æ¬¡æ‰¾åˆ°ä¸xæœ€ç›¸å…³çš„kä¸ªmemory slotsã€‚è®ºæ–‡ä¸­é‡‡ç”¨k = 2ã€‚å…ˆæ‰¾åˆ°ç¬¬ä¸€ä¸ªæœ€ç›¸å…³çš„memory slotï¼š$$m_{o1} = \\mathop{argmax}\\limits_{i = 1,â€¦,N} s_{o1}(x,m_i)$$å…¶ä¸­$s_o()$æ˜¯ä¸€ä¸ªåŒ¹é…å‡½æ•°ï¼Œè®¡ç®—xä¸$m_i$ä¹‹é—´çš„ç›¸å…³ç¨‹åº¦ã€‚æ¥ç€ï¼Œæ ¹æ®xå’Œç¬¬ä¸€ä¸ªmemoryæ‰¾åˆ°ä¸‹ä¸€ä¸ªmemoryï¼š$$m_{o2} = \\mathop{argmax}\\limits_{i = 1,â€¦,N} s_{o2}([x,m_{o1}],m_i)$$å°†output feature o = $[x,m_{o1},m_{o2}]$ä½œä¸ºRæ¨¡å—çš„è¾“å…¥ã€‚ Ræ¨¡å—å°†è¯æ±‡è¡¨ä¸­æ‰€æœ‰è¯ä¸output featureè¿›è¡ŒåŒ¹é…ï¼Œé€‰æ‹©åŒ¹é…åº¦æœ€é«˜çš„è¯ä½œä¸ºresponseã€‚è¿™æ ·ç”Ÿæˆçš„responseåªæœ‰ä¸€ä¸ªè¯ã€‚$$r = \\mathop{argmax}\\limits_{w \\in W}s_R([x,m_{o1},m_{o2}],w)$$å…¶ä¸­$s_R()$æ˜¯ä¸€ä¸ªåŒ¹é…å‡½æ•°ã€‚ åŒ¹é…å‡½æ•°$s_O$å’Œ$s_R$éƒ½é‡‡ç”¨ä»¥ä¸‹å‡½æ•°ï¼š$$s(x,y) = \\Phi_x(x)^\\top U^\\top U \\Phi_y(y)$$å…¶ä¸­$\\Phi_x(x),\\Phi_y(y)$åˆ†åˆ«å°†x/yç¼–ç ä¸ºå‘é‡ã€‚ç›®æ ‡å‡½æ•°åœ¨è®­ç»ƒé˜¶æ®µé‡‡ç”¨æœ€å¤§è¾¹ç¼˜ç›®æ ‡å‡½æ•°ï¼Œè®¾å¯¹äºquestion xï¼ŒçœŸå®çš„labelä¸ºrï¼Œå¯¹åº”çš„memoryä¸º$m_{o1},m_{o2}$ã€‚åˆ™æœ€å¤§è¾¹ç¼˜ç›®æ ‡å‡½æ•°ä¸ºï¼š$$\\sum_{m_i\\ne m_{o1}}max(0,\\gamma - s_{O1}(x,m_{o1}) + s_{O1}(x,m_i)) + $$ $$\\sum_{m_j\\ne m_{o2}}max(0,\\gamma - s_{O2}([x,m_{o1}],m_{o2}) + s_{O2}([x,m_{o1}],m_j)) + $$ $$\\sum_{râ€™ \\ne r}max(0,\\gamma - s_{R}([x,m_{o1},m_{o2}],r) + s_{R}([x,m_{o1},m_{o2}],râ€™))$$ ç”±äºargmax()å‡½æ•°çš„å­˜åœ¨ï¼Œè¿™ä¸ªæ¨¡å‹æ˜¯ä¸å¯å¾®çš„ã€‚è€Œä¸”ä¸­é—´è¿‡ç¨‹æ‰¾åˆ°ç›¸å…³memoryéœ€è¦ç›‘ç£ï¼Œè¿™ä¸ªæ¨¡å‹ä¸æ˜¯ç«¯åˆ°ç«¯çš„ã€‚æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªmemory networkæ˜¯ä¸€ç§æ™®é€‚æ€§çš„æ¶æ„ï¼Œæ˜¯å¾ˆåˆçº§å¾ˆç®€å•çš„ï¼Œå¾ˆå¤šéƒ¨åˆ†è¿˜ä¸å®Œå–„ï¼Œä¸è¶³ä»¥åº”ç”¨å…·ä½“çš„ä»»åŠ¡ä¸Šã€‚ä¸è¿‡ï¼Œé€šè¿‡å¤šè·³æ–¹å¼æ‰¾åˆ°ç›¸å…³memoryçš„æ€è·¯æ˜¯å¾ˆå€¼å¾—å­¦ä¹ çš„ã€‚ End-to-End Memory NetworkJason Westonä½œä¸ºä¸‰ä½œçš„Sainbayar Sukhbaatar2015å¯¹Memory networkå·¥ä½œçš„æ”¹è¿›ï¼Œä¸»è¦æ”¹è¿›æ˜¯å®ç°äº†ç«¯åˆ°ç«¯ï¼Œå‡å°‘äº†ç›‘ç£ã€‚End-to-End Memory Networké‡‡ç”¨soft attentionè€Œä¸æ˜¯hard attentionæ¥read memoryï¼Œå› æ­¤æ˜¯ç«¯åˆ°ç«¯çš„ã€‚å¦å¤–ä¸éœ€è¦å¯¹ç›¸å…³memoryè¿›è¡Œç›‘ç£ã€‚æé«˜memory networkçš„å¯ç”¨æ€§ã€‚å‡è®¾å¤šä¸ªå¥å­input $x_1,â€¦,x_n$ä½œä¸ºmemoryï¼Œå¯¹äºquery qï¼Œè¾“å‡ºå¯¹åº”çš„answer aã€‚ç»™å®šquery qï¼Œç»è¿‡å¤šè·³æ‰¾åˆ°ç›¸å…³çš„memoryï¼Œå¹¶ç”Ÿæˆå¯¹åº”çš„answer aã€‚ single layerç»™å®šinput $x_1,x_2,â€¦,x_n$ï¼Œé‡‡ç”¨ä¸¤ä¸ªä¸åŒçš„embedding matrix Aå’ŒCåˆ†åˆ«ç¼–ç ä¸ºå‘é‡$\\lbrace{m_1,â€¦,m_n}\\rbrace$ï¼Œ$\\lbrace{c_1,â€¦,c_n}\\rbrace$,åˆ†åˆ«å¯¹åº”attentionæœºåˆ¶çš„keyså’Œvaluesã€‚å°†query qç»è¿‡embedding matrix Bç¼–ç ä¸ºå‘é‡è¡¨ç¤ºuã€‚ é‡‡ç”¨dot-product attentionè®¡ç®—æƒé‡ï¼š$$p_i = softmax(u^\\top m_i) = \\frac{exp(u^\\top m_i)}{\\sum_{j}exp(u^\\top m_j)}$$åˆ™memory representationä¸ºï¼š$$o = \\sum_{i}p_i m_i$$æ ¹æ®uå’Œoæ¥è¿›è¡Œé¢„æµ‹ï¼š$$\\hat{a} = softmax(W (o + u))$$é€šè¿‡æœ€å°åŒ–aä¸$\\hat{a}$ä¹‹é—´çš„äº¤å‰ç†µæ¥è®­ç»ƒæ¨¡å‹å‚æ•°A,B,C,Wã€‚è¿™ä¸ªsingle layer end-to-end Memory networkæ˜¯ç®€å•è€Œç›´è§‚çš„ã€‚æ ¸å¿ƒæ˜¯ç”¨soft attentionæ¥read memoryï¼Œæ‰¾åˆ°ç›¸å…³çš„memoryï¼Œå¹¶è¿›è¡Œinferenceã€‚ Fig.6.å·¦:single layer;å³:multi layersæ¥æºï¼š[Sainbayar Sukhbaatar2015](http://arxiv.org/abs/1503.08895) multi layerså°†Kå±‚single layerè¿›è¡Œstackå¾—åˆ°Kå±‚memory networkï¼Œè¿›è¡ŒKè·³memoryæŸ¥è¯¢æ“ä½œã€‚å…·ä½“åœ°stackæ–¹å¼ä¸ºï¼š å°†ç¬¬kå±‚çš„è¾“å…¥$u^k$å’Œmemory representation $o^k$ç›¸åŠ ä½œä¸ºç¬¬k+1å±‚çš„è¾“å…¥:$$u^{k+1} = u^k + o^k$$ æ¯ä¸€å±‚éƒ½æœ‰å•ç‹¬çš„embedding matrix $A^k$å’Œ$C^k$ æœ€åä¸€å±‚çš„é¢„æµ‹è¾“å‡ºä¸ºï¼š$$\\hat{a} = softmax(W u^{K+1}) = softmax(W(u^K + o^K))$$ ä¸ºäº†å‡å°‘å‚æ•°é‡ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼š adjacent: è®©ç›¸é‚»å±‚çš„embedding matrix A=Cï¼Œå…±äº«å‚æ•°ã€‚å³ï¼š$C^k = A^{k+1}$ï¼Œå¯¹ç¬¬ä¸€å±‚æœ‰$A^1 = B$ï¼Œæœ€åä¸€å±‚æœ‰ï¼š$C^K = W$ã€‚è¿™æ ·å°±å‡å°‘äº†ä¸€åŠçš„å‚æ•°é‡ã€‚ RNN-like: è·ŸRNNä¸€æ ·ï¼Œé‡‡ç”¨å®Œå…¨å‚æ•°å…±äº«çš„æ–¹æ³•ï¼Œ$A^1 = A^2 = â€¦ = A^K$;$C^1 = C^2 = â€¦ = C^K$ã€‚å‚æ•°æ•°é‡å¤§å¤§å‡å°‘å¯¼è‡´æ¨¡å‹æ•ˆæœå˜å·®ï¼Œåœ¨å±‚ä¸å±‚ä¹‹é—´æ·»åŠ ä¸€ä¸ªçº¿æ€§æ˜ å°„ï¼š$u^{k+1} = Hu^k + o^k$ key-value Memory NetworksJason Westonä½œä¸ºä½œè€…ä¹‹ä¸€çš„Alexander Miller2016åœ¨End-to-End Memory networksçš„åŸºç¡€ä¸Šç»§ç»­æ¨è¿›ï¼Œå¯ä»¥æ›´å¥½çš„é€šè¿‡memoryæ¥ç¼–ç å’Œåˆ©ç”¨å…ˆéªŒçŸ¥è¯†ï¼Œå¹¶ä¸”å…·ä½“åœ°åº”ç”¨åˆ°äº†QAç³»ç»Ÿä¸­ã€‚ ä½œä¸ºmemoryçš„å…ˆéªŒçŸ¥è¯†å¯ä»¥æ˜¯ç»“æ„åŒ–çš„ä¸‰å…ƒç»„çŸ¥è¯†åº“ï¼Œä¹Ÿå¯ä»¥æ˜¯éç»“æ„åŒ–çš„æ–‡æœ¬ã€‚ ä¸‰å…ƒç»„çŸ¥è¯†åº“ã€‚ä¸‰å…ƒç»„çš„å½¢å¼æ˜¯â€å®ä½“-å…³ç³»-å®ä½“â€ï¼Œæˆ–â€ä¸»è¯­-è°“è¯­-å®¾è¯­â€ã€‚ä¸‰å…ƒç»„çŸ¥è¯†åº“çš„ä¼˜ç‚¹æ˜¯ç»“æ„åŒ–çš„ï¼Œä¾¿äºæœºå™¨å¤„ç†ã€‚ä½†ç¼ºç‚¹æ˜¯ä¸ä¸€å¥å®Œæ•´çš„è¯æ¯”è¾ƒï¼Œä¸‰å…ƒç»„ç¼ºå°‘äº†ä¸€äº›ä¿¡æ¯ã€‚ç”±äºä¸‰å…ƒç»„çŸ¥è¯†åº“æ˜¯äººå·¥æ„å»ºçš„ï¼Œéš¾å…ä¼šæœ‰è¦†ç›–ä¸åˆ°çš„çŸ¥è¯†ï¼Œå¯¹äºæŸä¸ªé—®é¢˜å¯èƒ½çŸ¥è¯†åº“ä¸­æ ¹æœ¬å°±æ²¡æœ‰å¯¹åº”çš„çŸ¥è¯†ã€‚å¦å¤–ï¼Œä¸‰å…ƒç»„ä¸­çš„å®ä½“å¯ä»¥æœ‰å¤šç§ä¸åŒçš„è¡¨è¾¾ï¼Œæ¯”å¦‚çŸ¥è¯†åº“ä¸­æœ‰ä¸‰å…ƒç»„â€ä¸­å›½-é¦–éƒ½-åŒ—äº¬â€ã€‚å½“é—®é¢˜æ˜¯â€œä¸­åäººæ°‘å…±å’Œå›½çš„é¦–éƒ½æ˜¯ï¼Ÿâ€æ—¶ï¼Œå¯èƒ½å°±ä¸èƒ½å¾ˆå¥½åœ°å›ç­”ã€‚ åƒâ€œç»´åŸºç™¾ç§‘â€è¿™æ ·çš„éç»“æ„åŒ–æ–‡æœ¬ã€‚ä¼˜ç‚¹æ—¶è¦†ç›–é¢å¹¿ï¼Œå‡ ä¹åŒ…å«æ‰€æœ‰é—®é¢˜çš„çŸ¥è¯†ã€‚ç¼ºç‚¹æ˜¯éç»“æ„åŒ–çš„ï¼Œæœ‰æ­§ä¹‰ï¼Œéœ€è¦ç»è¿‡å¤æ‚çš„æ¨ç†æ‰èƒ½æ‰¾åˆ°ç­”æ¡ˆã€‚ ä½œä¸ºå…ˆéªŒçŸ¥è¯†çš„memoryæ˜¯(key,value)å½¢å¼çš„ã€‚ key memoryç”¨äºå¯»å€(addressing/lookup)é˜¶æ®µï¼Œé€šè¿‡è®¡ç®—queryä¸key memoryçš„ç›¸å…³ç¨‹åº¦æ¥è®¡ç®—attentionæƒé‡ï¼Œå› æ­¤åœ¨è®¾è®¡key memoryæ—¶ï¼Œkey memoryçš„ç‰¹å¾åº”è¯¥æ›´å¥½åœ°åŒ¹é…queryã€‚ value memoryç”¨äºreadé˜¶æ®µï¼Œå°†value memoryçš„åŠ æƒå’Œä½œä¸ºmemoryæ€»çš„å‘é‡è¡¨ç¤ºï¼Œå› æ­¤åœ¨æ¶‰åŠvalue memoryæ—¶ï¼Œvalue memoryçš„ç‰¹å¾åº”è¯¥æ›´å¥½åœ°åŒ¹é…responseã€‚ æ¯”è¾ƒä¸€ä¸‹end-to-end memory networkä¸key-value memory networkçš„åŒºåˆ«ï¼š å‰è€…æ˜¯å°†ç›¸åŒçš„è¾“å…¥ç»è¿‡ä¸¤ä¸ªä¸åŒçš„embedding matrixç¼–ç åˆ†ä¸ºä½œä¸ºkey memoryå’Œvalue memoryã€‚è€Œåè€…å¯ä»¥å°†ä¸åŒçš„çŸ¥è¯†(key,value)åˆ†åˆ«ç¼–ç ä¸ºkey memoryå’Œvalue memoryï¼Œå¯ä»¥æ›´çµæ´»åœ°åˆ©ç”¨å…ˆéªŒçŸ¥è¯†ã€‚ åè€…çš„æ¯ä¸ªhopä¹‹é—´æ·»åŠ äº†ç”¨$R_j$æ¥è¿›è¡Œçº¿æ€§æ˜ å°„ã€‚ æ¨¡å‹ç»“æ„åœ¨é—®ç­”ç³»ç»Ÿä¸­ï¼Œè®°memory slotsä¸º$(k_1,v_1),â€¦,(k_M,v_M)$ï¼Œé—®é¢˜queryä¸ºxï¼ŒçœŸå®å›å¤ä¸ºaï¼Œé¢„æµ‹å›å¤ä¸º$\\hat{a}$ã€‚$\\Phi_{X},\\Phi_{Y},\\Phi_{K},\\Phi_{V}$åˆ†åˆ«æ˜¯x,a,key,valueçš„embedding matrixï¼Œå°†æ–‡æœ¬ç¼–ç ä¸ºå‘é‡è¡¨ç¤ºã€‚ åˆ™å•æ¬¡memoryçš„å¯»å€å’Œè¯»å–å¯ä»¥åˆ†ä¸ºä¸‰æ­¥ï¼š key hashing: å½“çŸ¥è¯†åº“å¾ˆå¤§æ—¶ï¼Œè¿™ä¸€æ­¥æ˜¯éå¸¸å¿…è¦çš„ã€‚æ ¹æ®queryä»çŸ¥è¯†åº“ä¸­æ£€ç´¢ç­›é€‰å‡ºç›¸å…³çš„facts $ (k_{h_1},v_{h_1}),(k_{h_2},v_{h_2}),â€¦,(k_{h_N},v_{h_N})$ï¼Œç­›é€‰æ¡ä»¶å¯ä»¥æ˜¯keyä¸­è‡³å°‘åŒ…å«queryä¸­ä¸€ä¸ªç›¸åŒçš„è¯ï¼ˆå»é™¤åœç”¨è¯ï¼‰ã€‚è¿™ä¸€æ­¥å¯ä»¥åœ¨æ•°æ®é¢„å¤„ç†æ—¶è¿›è¡Œï¼Œç›´æ¥å°†queryå’Œç›¸å…³çš„factsä½œä¸ºæ¨¡å‹çš„è¾“å…¥ã€‚ key addressing(å¯»å€é˜¶æ®µ) è®¡ç®—queryä¸memoryçš„ç›¸å…³ç¨‹åº¦æ¥åˆ†é…åœ¨memoryä¸Šçš„æ¦‚ç‡åˆ†å¸ƒï¼š$$p_{h_i} = softmax(A\\Phi_{X}(x) \\cdot A\\Phi_{K}(k_{h_i}))$$å…¶ä¸­$\\Phi$å°†æ–‡æœ¬ç¼–ç ä¸ºDç»´å‘é‡ï¼ŒAæ˜¯ä¸€ä¸ª$d\\times D$çš„å¯è®­ç»ƒçŸ©é˜µã€‚ value readingï¼š å°†valueçš„åŠ æƒæ±‚å’Œä½œä¸ºmemoryæ€»çš„å‘é‡è¡¨ç¤ºã€‚$$o = \\sum_{i}p_{h_i}A\\Phi_{V}(v_{h_i})$$ memoryçš„è¯»å–è¿‡ç¨‹æ˜¯ç”±controllerç¥ç»ç½‘ç»œé€šè¿‡query $q = A\\Phi_{X}(x)$æ¥æ§åˆ¶çš„ã€‚æ¨¡å‹ä¼šåˆ©ç”¨query $q$ä¸ä¸Šä¸€è·³(hop)çš„$o$æ¥æ›´æ–°queryï¼Œè¿›è€Œè¿­ä»£åœ°å¯»å€å’Œè¯»å–memoryï¼Œè¿™ä¸ªè¿­ä»£çš„è¿‡ç¨‹ç§°ä¸ºå¤šè·³(hops)ã€‚ç”¨å¤šè·³æ–¹å¼æ¥è¿­ä»£åœ°å¯»å€å’Œè¯»å–memoryï¼Œå¯ä»¥è¿™æ ·æ¥ç†è§£ï¼šæµ…å±‚ç¥ç»ç½‘ç»œå¯ä»¥å­¦ä¹ åˆ°ä½çº§çš„ç‰¹å¾ï¼Œéšç€ç¥ç»ç½‘ç»œå±‚æ•°å¢å¤šå°±å¯ä»¥å­¦ä¹ åˆ°æ›´é«˜çº§çš„ç‰¹å¾ã€‚ç±»æ¯”CNNå¤„ç†äººè„¸å›¾ç‰‡æ—¶ï¼Œç¬¬ä¸€å±‚å¯ä»¥å­¦ä¹ åˆ°ä¸€äº›è¾¹ç¼˜ç‰¹å¾ï¼Œç¬¬äºŒå±‚å¯ä»¥å­¦ä¹ åˆ°çœ¼ç›ã€é¼»å­ã€å˜´å·´è¿™æ ·çš„ç‰¹å¾ï¼Œæœ€åä¸€å±‚å¾—åˆ°æ•´ä¸ªäººè„¸çš„ç‰¹å¾ã€‚åŒæ ·åœ°ï¼Œç”¨å¤šè·³æ–¹å¼æ¥å¯»å€å’Œè¯»å–memoryï¼Œå¯ä»¥å¾—åˆ°æ›´ç›¸å…³æ›´çªå‡ºçš„memoryï¼ŒåŒæ—¶å¯ä»¥èµ·åˆ°æ¨ç†çš„ä½œç”¨ã€‚ queryçš„æ›´æ–°å…¬å¼ä¸º:$$q_2 = R_1(q + o)$$å…¶ä¸­Ræ˜¯ä¸€ä¸ª$d\\times d$çš„å¯è®­ç»ƒçŸ©é˜µã€‚æ¯ä¸€è·³ä½¿ç”¨ä¸åŒçš„çŸ©é˜µ$R_j$ã€‚åˆ™ç¬¬jè·³æ›´æ–°queryåï¼Œå¯»å€é˜¶æ®µçš„è®¡ç®—å…¬å¼ä¸º$$p_{h_i} = softmax(q_{j+1}^\\top \\cdot A\\Phi_{K}(k_{h_i}))$$åœ¨ç»è¿‡Hè·³ä¹‹åï¼Œç”¨controllerç¥ç»ç½‘ç»œçš„æœ€ç»ˆçŠ¶æ€è¿›è¡Œé¢„æµ‹:$$\\hat{a} = argmax_{i=1,â€¦,C}softmax(q_{H+1}B\\Phi_{y}(y_i))$$å…¶ä¸­Bæ˜¯ä¸€ä¸ª$d\\times D$çš„å¯è®­ç»ƒçŸ©é˜µï¼Œå½¢çŠ¶è·ŸAä¸€æ ·ã€‚$y_i$å¯ä»¥æ˜¯çŸ¥è¯†åº“ä¸­çš„å®ä½“ï¼Œæˆ–è€…å€™é€‰å¥å­ã€‚ æ¨¡å‹çš„ç›®æ ‡å‡½æ•°ä¸ºé¢„æµ‹å›å¤$\\hat{a}$ä¸çœŸå®å›å¤$a$ä¹‹é—´çš„äº¤å‰ç†µï¼Œç”¨æ¢¯åº¦ä¸‹é™çš„æ–¹æ³•æ¥æ›´æ–°æ¨¡å‹å‚æ•°ï¼š$A,B,R_1,â€¦,R_H$ Fig.7. é—®ç­”ç³»ç»Ÿkey-value memory networksçš„æ¨¡å‹æ¡†æ¶æ¥æº:Alexander Miller2016 key-valueçš„é€‰æ‹©ä¸ç¼–ç æ–¹å¼è®ºæ–‡æ ¹æ®ä¸åŒå½¢å¼çš„å…ˆéªŒçŸ¥è¯†ï¼Œæå‡ºäº†key-valueä¸åŒçš„ç¼–ç æ–¹å¼ï¼š çŸ¥è¯†åº“ä¸‰å…ƒç»„ã€‚ä¸‰å…ƒç»„å½¢å¼ä¸ºâ€subject-relation-objectâ€ï¼Œå°†â€subject-relationâ€ä½œä¸ºå¯»å€çš„keyï¼Œå°†â€objectâ€ä½œä¸ºè®°å¿†çš„valueã€‚ sentence levelã€‚ç›´æ¥å°†å¥å­çš„è¯è¢‹å‘é‡è¡¨ç¤ºä½œä¸ºkeyå’Œvalueï¼Œkeyå’Œvalueæ˜¯ä¸€æ ·çš„ã€‚æ¯ä¸ªmemory slotå­˜ä¸€ä¸ªå¥å­ã€‚ window levelã€‚ä»¥å¤§å°ä¸ºWçš„çª—å£å¯¹æ–‡æ¡£è¿›è¡Œåˆ†å‰²ï¼ˆåªä¿ç•™ä¸­å¿ƒè¯ä¸ºå®ä½“çš„çª—å£ï¼‰ï¼Œå°†å•ä¸ªçª—å£å†…çš„è¯ä½œä¸ºå¯»å€çš„keyï¼Œå°†çª—å£çš„ä¸­å¿ƒè¯ä½œä¸ºvalueã€‚ å‚è€ƒé“¾æ¥ è®°å¿†ç½‘ç»œ-Memory Network Memory network (MemNN) &amp; End to end memory network (MemN2N), Dynamic memory network Memory Networks for Language Understanding, ICML Tutorial 2016","categories":[{"name":"æ·±åº¦å­¦ä¹ ","slug":"æ·±åº¦å­¦ä¹ ","permalink":"http://yoursite.com/categories/æ·±åº¦å­¦ä¹ /"}],"tags":[{"name":"Neural Turing Machines","slug":"Neural-Turing-Machines","permalink":"http://yoursite.com/tags/Neural-Turing-Machines/"},{"name":"Memory Network","slug":"Memory-Network","permalink":"http://yoursite.com/tags/Memory-Network/"}]},{"title":"attention? attention!","slug":"attention-attention","date":"2019-07-23T08:20:18.000Z","updated":"2019-07-30T03:41:02.000Z","comments":true,"path":"2019/07/23/attention-attention/","link":"","permalink":"http://yoursite.com/2019/07/23/attention-attention/","excerpt":"è¯»äº†åšä¸»Weng, Liliançš„æ–‡ç« attention? attention!ï¼Œæ˜¯ä¸€ç¯‡å¾ˆå¥½çš„æ–‡ç« ã€‚æ‰“ç®—æŒ‰ç…§è¿™ç¯‡æ–‡ç« çš„æ€è·¯ï¼Œè¿›è¡Œç¿»è¯‘ï¼Œå¹¶æ·»åŠ è‡ªå·±çš„ç†è§£ã€‚attentionæœºåˆ¶åœ¨æ·±åº¦å­¦ä¹ ä¸­è¢«å¹¿ä¸ºä½¿ç”¨ï¼Œæœ¬æ–‡ä»‹ç»attentionæœºåˆ¶çš„æå‡ºï¼Œä¸åŒçš„attentionæœºåˆ¶ï¼ŒåŠattentionæœºåˆ¶çš„è¿›ä¸€æ­¥æ¢ç´¢å’Œåº”ç”¨ã€‚","text":"è¯»äº†åšä¸»Weng, Liliançš„æ–‡ç« attention? attention!ï¼Œæ˜¯ä¸€ç¯‡å¾ˆå¥½çš„æ–‡ç« ã€‚æ‰“ç®—æŒ‰ç…§è¿™ç¯‡æ–‡ç« çš„æ€è·¯ï¼Œè¿›è¡Œç¿»è¯‘ï¼Œå¹¶æ·»åŠ è‡ªå·±çš„ç†è§£ã€‚attentionæœºåˆ¶åœ¨æ·±åº¦å­¦ä¹ ä¸­è¢«å¹¿ä¸ºä½¿ç”¨ï¼Œæœ¬æ–‡ä»‹ç»attentionæœºåˆ¶çš„æå‡ºï¼Œä¸åŒçš„attentionæœºåˆ¶ï¼ŒåŠattentionæœºåˆ¶çš„è¿›ä¸€æ­¥æ¢ç´¢å’Œåº”ç”¨ã€‚ why we need attention?ä»seq2seqæ¨¡å‹è°ˆèµ·seq2seqæ¨¡å‹ä¸14å¹´æå‡º(Sutskever, et al. 2014)ï¼Œå®ç°è¾“å…¥åºåˆ—(source sequence)åˆ°è¾“å‡ºåºåˆ—(target sequence)çš„æ˜ å°„ï¼Œè¿™ä¸¤ä¸ªåºåˆ—çš„é•¿åº¦éƒ½æ˜¯å¯å˜çš„ã€‚åºåˆ—åˆ°åºåˆ—æ˜ å°„çš„ä»»åŠ¡åŒ…æ‹¬æœºå™¨ç¿»è¯‘ã€é—®ç­”ç³»ç»Ÿã€å¯¹è¯ç³»ç»Ÿã€æ‘˜è¦ç”Ÿæˆç­‰ã€‚ ç”¨æ•°å­¦è¯­è¨€æ¥å®šä¹‰åºåˆ—åˆ°åºåˆ—çš„ä»»åŠ¡ï¼Œç»™å®šè¾“å…¥åºåˆ—(source sequence) $X = \\lbrace{ x_1,x_2,â€¦,x_n \\rbrace}$ï¼Œéœ€è¦ç”Ÿæˆè¾“å‡ºåºåˆ—(target sequence) $Y = \\lbrace{ y_1,y_2,â€¦,y_m \\rbrace}$ï¼Œå…¶ä¸­source sequenceé•¿åº¦ä¸º$n$,target sequenceé•¿åº¦ä¸º$m$ã€‚ seq2seqæ¨¡å‹åŸºäºencoder-decoderæ¡†æ¶ï¼ŒåŒ…æ‹¬2ä¸ªéƒ¨åˆ†ï¼š encoderå°†source sequenceç¼–ç ï¼ˆæ˜ å°„ï¼‰ä¸ºä¸€ä¸ªå›ºå®šç»´åº¦çš„å‘é‡è¡¨ç¤º(context vector,æˆ–ç§°ä¸ºsentence embedding)ï¼Œæˆ‘ä»¬å¸Œæœ›è¿™ä¸ªå‘é‡è¡¨ç¤ºå¯ä»¥å¾ˆå¥½çš„è¡¨ç¤ºsource sequenceçš„æ„æ€ã€‚ encoderå¯ä»¥é‡‡ç”¨å·ç§¯ç¥ç»ç½‘ç»œCNNï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨å¾ªç¯ç¥ç»ç½‘ç»œRNNï¼Œä½†ç”¨çš„æ›´å¤šçš„æ•ˆæœä¹Ÿæ›´å¥½çš„è¿˜æ˜¯RNNã€‚é€šå¸¸ä½¿ç”¨LSTM æˆ– GRUã€‚ encoder RNNçš„éšè—çŠ¶æ€æ›´æ–°å…¬å¼ä¸ºï¼š$$\\begin{gather}h_t = f(h_{t-1},x_t)\\end{gather}$$å…¶ä¸­$h_t$ä¸ºRNNåœ¨æ—¶é—´æ­¥tçš„éšè—çŠ¶æ€ï¼Œfä¸ºLSTM æˆ–GRU. å¯¹äºé•¿åº¦ä¸ºnçš„source sequenceï¼Œä¸€ä¸ªè¯æ¥ä¸€ä¸ªè¯åœ°è¾“å…¥RNNåï¼Œå¯ä»¥å¾—åˆ°nä¸ªéšè—çŠ¶æ€$(h_1,h_2,â€¦,h_n)$ï¼Œé€šå¸¸å°†æœ€åä¸€ä¸ªæ—¶é—´æ­¥æœ€åä¸€ä¸ªè¯å¯¹åº”çš„éšè—çŠ¶æ€$h_t$ä½œä¸ºsource sequenceçš„å‘é‡è¡¨ç¤ºï¼Œä¹Ÿå°±æ˜¯context vectorï¼Œè®°ä¸º$c$ã€‚ decoderæ ¹æ®source sequenceçš„å‘é‡è¡¨ç¤ºcontext vectorï¼Œæ¥ä¸€ä¸ªè¯ä¸€ä¸ªè¯çš„ç”Ÿæˆtarget sequenceã€‚ decoderé‡‡ç”¨å•å‘RNNï¼Œdecoder RNNéšè—çŠ¶æ€çš„æ›´æ–°å…¬å¼ä¸º:$$\\begin{gather}s_t = f(s_{t-1},y_{t-1},c)\\end{gather}$$å…¶ä¸­$s_t$ä¸ºdecoderåœ¨æ—¶é—´æ­¥tçš„éšè—çŠ¶æ€ï¼Œ$y_{t-1}$ä¸ºtarget sequenceä¸­çš„ä¸Šä¸€ä¸ªè¯ï¼Œåœ¨trainé˜¶æ®µï¼Œ$y_{n-1}$ä¸ºçœŸå®target sequenceä¸­çš„ä¸Šä¸€ä¸ªè¯ï¼Œåœ¨inferé˜¶æ®µï¼Œ$y_{t-1}$ä¸ºé¢„æµ‹è¾“å‡ºçš„ä¸Šä¸€ä¸ªè¯ï¼›cä¸ºcontext vectorã€‚ æ—¶é—´æ­¥tï¼Œéšè—çŠ¶æ€$s_t$å†ç»è¿‡çº¿æ€§å±‚å’Œsoftmaxå¾—åˆ°åœ¨è¯è¡¨ä¸Šçš„æ¦‚ç‡åˆ†å¸ƒï¼Œå°†æ¦‚ç‡æœ€å¤§çš„è¯ä½œä¸ºprediction word $y_t$ã€‚è¿­ä»£å¾ªç¯ç›´åˆ°è¾“å‡ºæ•´ä¸ªtarget sequenceã€‚ Fig.1. seq2seqæ¨¡å‹çš„æ¡†æ¶å›¾ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å½“ç”Ÿæˆä¸åŒçš„$y_t$æ—¶ï¼Œæ‰€ä¾æ®çš„context vectoréƒ½æ˜¯å›ºå®šä¸å˜çš„ã€‚å›ºå®šçš„context vectoræœ‰ä¸€ä¸ªç¼ºç‚¹æ˜¯ï¼šå½“encoderç¼–ç å®Œæ•´ä¸ªsource sequenceæ—¶ï¼Œä¼šåå‘äºæœ€è¿‘çš„è¯ï¼Œè€Œé—å¿˜äº†è·ç¦»æ›´è¿œçš„æœ€å¼€å§‹çš„ä¸€äº›è¯ã€‚(Bahdanau et al., 2015)æå‡ºäº†attentionæœºåˆ¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ attentionæœºåˆ¶:born for Translationattentionæœºåˆ¶æœ€å…ˆåœ¨æœºå™¨ç¿»è¯‘(neural machine translation,NMT)ä»»åŠ¡ä¸Šæå‡ºã€‚ä»è§£å†³é•¿æœŸä¾èµ–é—®é¢˜çš„è§’åº¦ï¼Œattentionå¯ä»¥å®ç°é•¿è·ç¦»çš„è®°å¿†ï¼›ä»æ³¨æ„åŠ›çš„è§’åº¦ï¼Œattentionæœºåˆ¶å¯ä»¥å®ç°å¯¹é½(alignment)ï¼Œç”¨æ›´å¤šçš„æ³¨æ„åŠ›å…³æ³¨åˆ°ç›¸å…³çš„éƒ¨åˆ†ï¼Œè€Œå¿½ç•¥æˆ–ä½æ³¨æ„åŠ›å…³æ³¨åˆ°ä¸ç›¸å…³çš„éƒ¨åˆ†ã€‚ ä¸Šæ–‡ä¸­æåˆ°ï¼Œåœ¨ç”Ÿæˆä¸åŒçš„$y_t$æ—¶ï¼Œç›´æ¥å°†encoderæœ€åä¸€ä¸ªæ—¶é—´æ­¥çš„éšè—çŠ¶æ€$h_n$ä½œä¸ºå›ºå®šcontext vectorã€‚ä¸åŒäºè¿™ç§æ–¹æ³•ï¼Œattentionæœºåˆ¶å°†æ‰€æœ‰encoderéšè—çŠ¶æ€$\\lbrace{ h_1,h_2,â€¦,h_n }\\rbrace$çš„åŠ æƒå’Œä½œä¸ºcontext vectorï¼Œè¿™æ ·åœ¨æ¯ä¸ªæ—¶é—´æ­¥tç”Ÿæˆ$y_t$æ—¶ï¼Œæ‰€ä¾æ®çš„context vectoréƒ½æ˜¯ä¸“é—¨é’ˆå¯¹äº$y_t$çš„ã€‚ä¸€æ–¹é¢ï¼Œcontext vectorå¯ä»¥è·å–åˆ°æ‰€æœ‰éšè—çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªsource sequenceçš„ä¿¡æ¯ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°é•¿è·ç¦»çš„è®°å¿†ã€‚å¦ä¸€æ–¹é¢ï¼Œsource sequence ä¸target sequenceä¹‹é—´çš„è¯­ä¹‰å¯¹é½(aligenment)æ˜¯ä¹Ÿæ˜¯é€šè¿‡context vectorå®ç°çš„ã€‚åœ¨è®¡ç®—æ—¶é—´æ­¥tç”Ÿæˆ$y_t$å¯¹åº”çš„context vector $c_t$çš„è®¡ç®—éœ€è¦ä¸‰ä¸ªéƒ¨åˆ†çš„ä¿¡æ¯ï¼š æ‰€æœ‰çš„encoderéšè—çŠ¶æ€ï¼š $\\lbrace{ h_1,h_2,â€¦,h_n }\\rbrace$ ä¸Šä¸ªæ—¶é—´æ­¥t-1çš„decoder éšè—çŠ¶æ€ï¼š $s_{t-1}$ sourceä¸targetä¹‹é—´çš„alignment. Fig.2.æœ‰attentionæœºåˆ¶çš„encoder-decoderæ¨¡å‹ï¼Œæ¥æº:[Bahdanau et al., 2015.](https://arxiv.org/pdf/1409.0473.pdf) attentionçš„æ•°å­¦å®šä¹‰åœ¨è®¡ç®—æ—¶é—´æ­¥tç”Ÿæˆ$y_t$å¯¹åº”çš„context vector $c_t$æ—¶ï¼Œencoderçš„æ‰€æœ‰éšè—çŠ¶æ€ä¸º $\\lbrace{ h_1,h_2,â€¦,h_n }\\rbrace$ï¼Œæ—¶é—´æ­¥t-1çš„decoderéšè—çŠ¶æ€ä¸º $s_{t-1}$ï¼Œdecoder RNNçš„éšè—çŠ¶æ€æ›´æ–°å…¬å¼å˜ä¸ºï¼š$$\\begin{gather}s_t = f(s_{t-1},y_{t-1},c_t)\\end{gather}$$ context vector $c_t$ä¸ºencoder hidden stateçš„åŠ æƒå’Œï¼š$$c_t = \\sum_{i=1}^{n}\\alpha_{t,i}h_i$$ $$\\alpha_{t,i} = softmax(\\beta_{t,i}) = \\frac{exp(\\beta_{t,i})}{\\sum_{j = 1}^{n}exp(\\beta_{t,j})}$$ $$\\beta_{t,i} = score(s_{t-1},h_i)$$å…¶ä¸­æƒé‡$\\alpha_{t,i}$æ˜¯æ—¶é—´æ­¥tç”Ÿæˆ$y_t$ä¸éšè—çŠ¶æ€$h_i$ä¹‹é—´çš„scoreï¼Œä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œ$h_i$å¯ä»¥çœ‹ä½œæ˜¯$x_i$çš„è¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯$\\lbrace{x_1,x_2,â€¦,x_{i}}\\rbrace$çš„è¡¨ç¤ºã€‚å› æ­¤ï¼Œ$\\alpha_{t,i}$å¯ä»¥çœ‹ä½œæ˜¯$y_t$ä¸$x_i$ä¹‹é—´è”ç³»ï¼ˆç›¸å…³æ€§ï¼‰çš„scoreã€‚æ‰€æœ‰æƒé‡$\\lbrace{\\alpha_{t,1},\\alpha_{t,2},â€¦,\\alpha_{t,n}}\\rbrace$è¡¡é‡äº†ç”Ÿæˆ$y_t$æ—¶åº”è¯¥å¦‚ä½•å…³æ³¨åˆ°æ‰€æœ‰çš„encoder hidden stateã€‚ score()ä¸ºæ‰“åˆ†å‡½æ•°ï¼Œæœ‰å¤šç§è®¡ç®—æ–¹æ³•ï¼Œä¸‹æ–‡ä¼šè¯¦ç»†ä»‹ç»ã€‚åœ¨Bahdanau et al., 2015.ä¸­ï¼Œscore()é‡‡ç”¨å‰é¦ˆç¥ç»ç½‘ç»œï¼Œé‡‡ç”¨éçº¿æ€§æ¿€æ´»å‡½æ•°$tanh()$,score()çš„æ•°å­¦å½¢å¼ä¸ºï¼š$$score(s_{t},h_i) = v_a^\\top tanh(W_a[s_t;h_i])$$å…¶ä¸­$v_a,W_a$æ˜¯å¯è®­ç»ƒå‚æ•°ã€‚attentionæƒé‡å¯è§†åŒ–çŸ©é˜µå¾ˆç›´è§‚åœ°è¡¨æ˜äº†source wordsä¸target wordsä¹‹é—´çš„å…³è”å…³ç³»: Fig.3.æ¥æº:[Bahdanau et al., 2015.](https://arxiv.org/pdf/1409.0473.pdf) å„ç§attentionæœºåˆ¶æ±‡æ€»ä¸‹è¡¨æ€»ç»“äº†ä½¿ç”¨æ¯”è¾ƒå¹¿æ³›çš„attentionæœºåˆ¶ï¼ŒåŠå…¶å¯¹åº”çš„alignment score functionã€‚ åå­— alignment score funtion æ¥æº content-based attention $score(s_t,h_i) = cosine(s_t,h_i)$ Graves2014 concat/additive $score(s_{t},h_i) = v_a^\\top tanh(W_a[s_t;h_i])$ Bahdanau2015 location-based $\\alpha_{t,i} = softmax(W_as_t)$å°†alignmentç®€åŒ–ä¸ºåªä¾èµ–äºtarget position Luong2015 general $score(s_{t},h_i) = s_t^\\top W_ah_i$ Luong2015 dot-product $score(s_{t},h_i) = s_t^\\top h_i$note:å½“general attentionçš„$W_a$ä¸ºå•ä½çŸ©é˜µæ—¶ï¼Œå°±é€€å‡ºä¸ºdot-product attention Luong2015 scaled dot-product(*) $score(s_{t},h_i) = \\frac{s_t^\\top h_i}{\\sqrt{n}}$note:è·Ÿdot-product attentionå¾ˆåƒï¼Œnæ˜¯encoder hidden state $h_i$çš„ç»´åº¦ Vaswani2017 (*)scaled dot-product attentionæœºåˆ¶æ·»åŠ äº†æ¯”ä¾‹å› å­$/frac{1}{/sqrt{n}}$ï¼ŒåŠ¨æœºæ˜¯ï¼šå¯¹äºsoftmax()å‡½æ•°ï¼Œå½“è¾“å…¥å¾ˆå¤§æ—¶ï¼Œå¯¹åº”çš„æ¢¯åº¦å¾ˆå°ï¼ˆæ¢¯åº¦é€æ¸æ¶ˆå¤±ï¼‰ï¼Œéš¾ä»¥è¿›è¡Œé«˜æ•ˆçš„ä¼˜åŒ–å’Œå­¦ä¹ ã€‚å› æ­¤ï¼Œæ·»åŠ æ¯”ä¾‹å› å­å¯ä»¥å‡å°$score(s_t,h_i)$ã€‚ ä¸‹è¡¨åˆ—å‡ºäº†æ›´å¹¿èŒƒç•´ä¸Šçš„attentionæœºåˆ¶ã€‚ åå­— å®šä¹‰ æ¥æº self attention(&) å°†input sequenceçš„ä¸åŒéƒ¨åˆ†è”ç³»èµ·æ¥ï¼Œåªç”¨åˆ°input sequenceæœ¬èº«ï¼Œè€Œä¸ç”¨target sequenceã€‚å¯ä»¥ä½¿ç”¨ä¸Šè¡¨ä¸­çš„æ‰€æœ‰score functionï¼Œåªè¦å°†target sequenceæ›¿æ¢ä¸ºinput sequenceå³å¯ã€‚ Cheng2016 global/soft attention context vectoræ˜¯æ•´ä¸ªinput sequenceçš„åŠ æƒå’Œï¼Œæ³¨æ„åˆ°æ•´ä¸ªinput sequence Xu2015 local/hard attention context vectoræ˜¯å±€éƒ¨input sequenceçš„åŠ æƒå’Œï¼Œæ³¨æ„åˆ°å±€éƒ¨input sequence Xu2015ï¼ŒLuong2015 (&)self-attentionåœ¨ä¸€äº›è®ºæ–‡ä¸­ä¹Ÿè¢«ç§°ä¸ºintra-attention. self-attentionself-attention,æœ€å…ˆåœ¨Cheng2016æå‡ºç§°ä¸ºâ€intra-attentionâ€ï¼Œåæ¥åœ¨å¤§ä½œattention is all you needä¸­å‘æŒ¥äº†æ›´å¤§çš„å½±å“åŠ›ã€‚self-attentionå°†åŒä¸€ä¸ªsequenceçš„ä¸åŒä½ç½®çš„tokensè”ç³»èµ·æ¥ï¼Œå»ºæ¨¡tokensä¹‹é—´çš„å…³ç³»ï¼Œè®¡ç®—è¿™ä¸ªsequenceçš„å‘é‡è¡¨ç¤ºã€‚[Cheng2016]æå‡ºself-attentionçš„åŠ¨æœºæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ æˆ‘ä»¬å…ˆçœ‹ä»¥ä¸‹LSTMçš„å±€é™ã€‚LSTMåœ¨ç¼–ç sequenceçš„å‘é‡è¡¨ç¤ºæ—¶ï¼Œéšè—çŠ¶æ€æ›´æ–°å…¬å¼ä¸ºï¼š$$h_t = f(h_{t-1},x_t)$$ä»è¿™ä¸ªæ›´æ–°å…¬å¼å¯ä»¥çœ‹åˆ°ï¼šåœ¨ç»™å®š$h_t$çš„æ¡ä»¶ä¸‹ï¼Œ$h_{t+1}$ä¸ä¹‹å‰çš„çŠ¶æ€$\\lbrace{h_1,h_2,â€¦,h_{t-1}}\\rbrace$åŠä¹‹å‰çš„tokens $\\lbrace{x_1,x_2,â€¦,x_t}\\rbrace$æ˜¯æ¡ä»¶ç‹¬ç«‹çš„ã€‚LSTMçš„æ½œåœ¨å‡è®¾æ˜¯å½“å‰çŠ¶æ€$h_t$åŒ…å«äº†ä¹‹å‰æ‰€æœ‰tokensçš„ä¿¡æ¯ï¼Œè¿™ç›¸å½“äºå‡è®¾LSTMæœ‰æ— é™å¤§çš„memoryï¼Œè¿™ä¸ªå‡è®¾å®é™…ä¸Šæ˜¯ä¸æˆç«‹çš„ã€‚å®é™…ä¸ŠLSTMä¼šåå‘äºæ›´è¿‘çš„tokensï¼Œè€Œé€æ¸é—å¿˜è·ç¦»æ›´è¿œçš„tokensã€‚å¦ä¸€æ–¹é¢ï¼ŒLSTMåœ¨ç¼–ç tokençš„éšè—çŠ¶æ€æ—¶ï¼Œæ²¡æœ‰å»ºæ¨¡tokensä¹‹é—´çš„å…³ç³»ã€‚è€Œè¿™æ°æ°å°±æ˜¯self-attentionè¦è§£å†³çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯self-attentionçš„æ ¸å¿ƒæ€æƒ³ï¼šåœ¨è®¡ç®—sequenceçš„å‘é‡è¡¨ç¤ºæ—¶ï¼Œå¼•å…¥tokensä¹‹é—´çš„å…³ç³»ã€‚ æ¥ä¸‹æ¥çœ‹self-attentionçš„æ•°å­¦è¡¨ç¤ºã€‚å¯¹äºsequence $\\lbrace{x_1,x_2,â€¦,x_n}\\rbrace$ï¼Œæ¯ä¸ªtoken $x_t$åˆ†åˆ«å¯¹åº”ä¸€ä¸ªhidden vector å’Œmemory vectorã€‚å½“å‰çš„memory tape $C_{t-1} = \\lbrace{c_1,c_2,â€¦,c_{t-1}}\\rbrace$ï¼Œhidden state tapeä¸º$H_{t-1} = \\lbrace{h_1,h_2,â€¦,h_{t-1}}\\rbrace$ã€‚self-attentionè®¡ç®—$x_t$ä¸$\\lbrace{x_1,x_2,â€¦,x_{t-1}}\\rbrace$ä¹‹é—´çš„å…³ç³»ï¼š$$\\beta_{t,i} = score(x_t,h_i) = v^\\top tanh(W_hh_i,W_xx_t,W_{\\tilde{h}}\\tilde{h_{t-1}})$$ $$\\alpha_{t,i} = softmax(\\beta_{t,i}) ;i\\in[1,t-1]$$ attentionæƒé‡$\\alpha_{t,i}$æ˜¯tæ—¶é—´æ­¥x_tåœ¨ä¹‹å‰çš„tokens $\\lbrace{x_1,x_2,â€¦,x_{t-1}}\\rbrace$å¯¹åº”çš„hidden vectorä¸Šçš„æ¦‚ç‡åˆ†å¸ƒã€‚ Fig.4.çº¢è‰²è¡¨ç¤ºå½“å‰tokenï¼Œè“è‰²çš„æ·±æµ…è¡¨ç¤ºç›¸å…³ç¨‹åº¦ã€‚æ¥æº:[Cheng2016](https://arxiv.org/pdf/1601.06733.pdf) æ¯”è¾ƒä¸€ä¸‹self-attentionæœºåˆ¶ä¸ä¼ ç»Ÿattentionæœºåˆ¶çš„åŒºåˆ«ï¼š ä¼ ç»Ÿçš„attentionæœºåˆ¶æ˜¯å°†target sequenceä¸source sequenceè”ç³»èµ·æ¥ï¼Œattentionæƒé‡$\\lbrace{\\alpha_{t,1},\\alpha_{t,2},â€¦,\\alpha_{t,n}}\\rbrace$æ˜¯åœ¨encoder hidden states $\\lbrace{h_1,h_2,â€¦,h_n}\\rbrace$ä¸Šçš„æ¦‚ç‡åˆ†å¸ƒã€‚è€Œself-attentionæ˜¯å°†åŒä¸ªsequenceä¸åŒä½ç½®çš„tokensè”ç³»èµ·æ¥ï¼Œattentionæƒé‡$\\alpha_{t,i}$æ˜¯tæ—¶é—´æ­¥$x_t$åœ¨ä¹‹å‰çš„tokens $\\lbrace{x_1,x_2,â€¦,x_{t-1}}\\rbrace$å¯¹åº”çš„hidden vectorä¸Šçš„æ¦‚ç‡åˆ†å¸ƒã€‚ ä¼ ç»Ÿçš„attentionæœºåˆ¶å¸¸ä¸RNNè”åˆä½¿ç”¨ï¼Œåœ¨transformerä¸­self-attentionå¯ä»¥ä¸RNNè§£è€¦å¼€ï¼ˆä¹Ÿå°±æ˜¯åˆ†å¼€ä½¿ç”¨ï¼‰ï¼Œå•ç‹¬ç”¨self-attentionä¹Ÿå¯ä»¥ç¼–ç sequenceçš„è¡¨ç¤ºå‘é‡ã€‚ soft vs hard attentionShow, Attend and Tell,Kelvin Xu2015å°†attentionæœºåˆ¶ç”¨åˆ°äº†â€ç»™å›¾ç‰‡ç”Ÿæˆæè¿°â€çš„ä»»åŠ¡ï¼Œç¬¬ä¸€æ¬¡æ˜ç¡®åŒºåˆ†äº†hard attentionä¸soft attentionï¼ŒåŒºåˆ†çš„ä¾æ®æ˜¯attentionæ˜¯å…³æ³¨åˆ°æ•´å¼ å›¾ç‰‡ï¼Œè¿˜æ˜¯å›¾ç‰‡çš„å±€éƒ¨ã€‚ soft attentionï¼šattentionå…³æ³¨åˆ°æ•´å¼ å›¾ç‰‡ï¼Œæˆ–è€…æ˜¯æ•´ä¸ªåºåˆ—ã€‚alignment æƒé‡$\\alpha_{t,i}$æ˜¯åœ¨æ•´ä¸ªåºåˆ—ä¸Šçš„æ¦‚ç‡åˆ†å¸ƒã€‚å°±åƒæ™®é€šçš„attentionä¸€æ ·ã€‚ å¥½å¤„ï¼šæ¨¡å‹æ˜¯å¯å¾®çš„ã€‚ åå¤„ï¼šè®¡ç®—é‡æ¯”è¾ƒå¤§ã€‚ hard attentionï¼šattentionå…³æ³¨åˆ°å›¾ç‰‡çš„å±€éƒ¨ï¼Œæˆ–è€…æ˜¯åºåˆ—çš„ä¸€éƒ¨åˆ†ã€‚ å¥½å¤„ï¼šå‡å°‘äº†è®¡ç®—é‡ã€‚ åå¤„ï¼šæ¨¡å‹ä¸å¯å¾®ï¼Œéœ€è¦ç”¨æ›´å¤æ‚çš„æŠ€æœ¯ï¼Œæ¯”å¦‚å¼ºåŒ–å­¦ä¹ æˆ–è€…æ–¹å·®ç¼©å‡æ¥è®­ç»ƒæ¨¡å‹ã€‚Luong2015 global vs local attentionLuong2015åœ¨NMTä»»åŠ¡ä¸Šæå‡ºäº†global å’Œlocal attentionçš„æ¦‚å¿µã€‚åŒºåˆ†çš„ä¾æ®æ˜¯attentionæ˜¯å…³æ³¨åˆ°æ•´ä¸ªåºåˆ—ï¼Œè¿˜æ˜¯å…³æ³¨åˆ°åºåˆ—çš„ä¸€éƒ¨åˆ†ã€‚ global attentionã€‚ ç±»ä¼¼äºsoft attentionï¼Œå…³æ³¨åˆ°æ•´ä¸ªåºåˆ—ã€‚è¿™é‡Œæ¯”è¾ƒä¸‹Luong2015çš„global attentionä¸Bahdanau2015ä¸­attentionçš„åŒºåˆ«ã€‚ Bahdanau2015ä¸­attentionçš„è®¡ç®—è·¯å¾„æ˜¯ï¼š$s_{t-1} \\to \\alpha_{t} \\to c_t \\to s_t$$$\\beta_{t,i} = score(s_{t-1},h_i)$$ $$\\alpha_{t,i} = softmax(\\beta_{t,i})$$ $$c_t = \\sum_{i = 1}^{n}\\alpha_{t,i}h_i$$ $$RNNæ›´æ–°å…¬å¼ï¼šs_t = f(s_{t-1},y_{t-1},c_t)$$ $$y_té¢„æµ‹å…¬å¼:p(y_t|y_{&lt; t},x) = g(y_{t-1},c_t,s_t)$$ Luong2015çš„global attentionçš„è®¡ç®—è·¯å¾„æ˜¯ï¼š$s_t \\to \\alpha_{t} \\to c_t \\to \\tilde{s_t}$$$\\beta_{t,i} = score(s_{t},h_i)$$ $$\\alpha_{t,i} = softmax(\\beta_{t,i})$$ $$c_t = \\sum_{i = 1}^{n}\\alpha_{t,i}h_i$$ $$RNNæ›´æ–°å…¬å¼ï¼šs_t = f(s_{t-1},y_{t-1},c_t)$$ $$\\tilde{s_t} = tanh(W_c[c_t,s_t])$$ $$y_té¢„æµ‹å…¬å¼:p(y_t|y_{&lt; t},x) = softmax(W_s\\tilde{s_t})$$ local attentionã€‚æ˜¯soft ä¸hard attentionçš„ç»“åˆï¼Œå…³æ³¨åˆ°åºåˆ—çš„ä¸€éƒ¨åˆ†ã€‚å¯¹hard attentionè¿›è¡Œæ”¹è¿›ï¼Œä½¿å¾—æ¨¡å‹å¯å¾®ï¼Œè®­ç»ƒå’Œè®¡ç®—å˜å¾—æ›´å®¹æ˜“ã€‚æ”¹è¿›çš„æ–¹æ³•å¦‚ä¸‹ï¼š å¯¹äºæ—¶é—´æ­¥tçš„target token $y_t$å…ˆç”¨æ¨¡å‹é¢„æµ‹ï¼Œç”Ÿæˆä¸€ä¸ªå¯¹é½çš„ä½ç½®$p_t$ï¼Œ å†æ ¹æ®å›ºå®šçª—å£å¤§å°å†…$[p_t - D,p_t + D]$çš„encoder hidden stateæ¥è®¡ç®—context vectorã€‚Dæ˜¯çª—å£å¤§å°ï¼Œæ˜¯æŒ‰ç»éªŒå®šä¹‰å¥½çš„ã€‚ Fig.5. global and local attenion.æ¥æºï¼š[Luong2015](https://arxiv.org/pdf/1508.04025.pdf) pointer networkå¯¹äºè¾“å‡ºåºåˆ—çš„ç±»åˆ«æ•°ä¾èµ–äºè¾“å…¥åºåˆ—çš„é•¿åº¦çš„é—®é¢˜ï¼Œseq2seqæ¨¡å‹æˆ–ç¥ç»å›¾çµæœºä¸èƒ½è§£å†³ã€‚å› ä¸ºè¿™ç±»é—®é¢˜ä¸­ï¼Œè¾“å‡ºçš„ç±»åˆ«æ•°æ˜¯å¯å˜çš„ï¼Œè€Œseq2seqæ¨¡å‹çš„decoderåªèƒ½åœ¨å›ºå®šæ•°ç›®çš„ç±»åˆ«ä¸Šç”Ÿæˆä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒã€‚Vinyals2017æå‡ºäº†pointer networkï¼ˆPr_Netï¼‰æ¥è§£å†³è¾“å‡ºè¯è¡¨å¯å˜çš„é—®é¢˜ã€‚pointer networkå®é™…ä¸Šæ˜¯ä»¥attentionä¸ºåŸºç¡€çš„ã€‚ æˆ‘ä»¬æ¯”è¾ƒä¸‹attentionæœºåˆ¶ä¸pointer networkçš„åŒºåˆ«ã€‚è®°è¾“å…¥åºåˆ—$X = \\lbrace{x_1,â€¦,x_n}\\rbrace$,è¾“å‡ºåºåˆ—$Y = {y_1,â€¦,y_m}$ï¼Œ$y_j$æ˜¯Xçš„ä½ç½®ç´¢å¼•ï¼Œ$y_i \\in [1,n] $ã€‚encoderçš„æ‰€æœ‰hidden stateä¸º$\\lbrace{h_1,h_2,â€¦,h_n}\\rbrace$ï¼Œdecoderåœ¨æ—¶é—´æ­¥tçš„éšè—çŠ¶æ€ä¸º$s_t$ï¼Œåˆ™ï¼š attentionæœºåˆ¶ç”¨alignmentæƒé‡æ¥è®¡ç®—context vectorï¼š $$\\beta_{t,i} = score(s_t,h_i) = v^\\top tanh(W_ss_t,W_hh_i); i \\in [1,n]$$ $$\\alpha_{t,i} = softmax(\\beta_{t,i})$$ $$c_t = \\sum_{i=1}^{n}\\alpha_{t,i}h_i$$ pointer networkåˆ™ç”¨alignmentæƒé‡åœ¨ä½œä¸ºåœ¨è¾“å…¥åºåˆ—ä¸Šçš„æ¦‚ç‡åˆ†å¸ƒï¼Œå°†è¾“å…¥åºåˆ—ä¸­çš„tokenç›´æ¥å¤åˆ¶åˆ°è¾“å‡ºåºåˆ—ä¸­ï¼š $$\\beta_{t,i} = score(s_t,h_i) = v^\\top tanh(W_ss_t,W_hh_i); i \\in [1,n]$$ $$p(y_i|y_{&lt; i},X) = softmax(\\beta_{t,i})$$ Fig.6.Pointer Network modelæ¥æº:[Vinyals2017](https://arxiv.org/abs/1506.03134) pointer networkè§£å†³OOVé—®é¢˜ä»€ä¹ˆæ˜¯OOVï¼ˆout of vocabularyï¼‰é—®é¢˜ï¼Ÿåœ¨åºåˆ—ï¼ˆsource sequenceï¼‰åˆ°åºåˆ—ï¼ˆtarget sequenceï¼‰çš„æ˜ å°„é—®é¢˜ï¼ˆå¯¹è¯ç³»ç»Ÿï¼Œé—®ç­”ç³»ç»Ÿï¼‰ä¸­ï¼Œä¼šæ ¹æ®è®­ç»ƒé›†è¯­æ–™æ¥æ„å»ºè¯è¡¨ï¼Œæ ¹æ®å®Œæˆ$word \\to index \\to embedding$çš„å‘é‡åŒ–è¡¨ç¤ºã€‚è€Œåœ¨æµ‹è¯•é›†çš„source sequenceä¸­éš¾å…ä¼šå‡ºç°ä¸€äº›è¯è¡¨ä¸­æ²¡æœ‰çš„è¯ï¼Œé€šå¸¸ä¼šå°†è¿™äº›out of vocabularyçš„è¯æ˜ å°„åˆ°ä¸€ä¸ªç‰¹å®šçš„å­—ç¬¦â€UNKâ€ï¼Œè€Œdecoderåœ¨ç”Ÿæˆresponseæ—¶ä¹Ÿå¯èƒ½ç”Ÿæˆâ€UNKâ€è¿™ä¸ªç‰¹æ®Šå­—ç¬¦ã€‚è¿™å°±æ˜¯OOVé—®é¢˜ã€‚ pointer networkæ˜¯è§£å†³OOVé—®é¢˜çš„æœ‰æ•ˆæ–¹æ³•ã€‚å½“source sequenceä¸­å‡ºç°ä¸åœ¨è¯è¡¨ä¸­çš„è¯æ—¶ï¼Œpointer networkå¯ä»¥ç›´æ¥å°†è¿™ä¸ªç”Ÿè¯ä»è¾“å…¥åºåˆ—å¤åˆ¶åˆ°è¾“å‡ºåºåˆ—ä¸­ã€‚Abigail See2017å°±ç”¨äº†pointer networkæ¥è§£å†³OOVé—®é¢˜ã€‚ è®°æ—¶é—´æ­¥t decoderçš„éšè—çŠ¶æ€ä¸º$s_t$,å¯¹åº”çš„context vectorä¸º$c_t$,alignmentæƒé‡ä¸º$\\alpha_{t,i},i \\in [1,n]$ åœ¨è¯æ±‡è¡¨ä¸Šçš„æ¦‚ç‡åˆ†å¸ƒä¸º:$p_{vocab} = softmax(W[s_t,c_t] + b)$ åœ¨è¾“å…¥åºåˆ—çš„æ¦‚ç‡åˆ†å¸ƒä¸º:$p_{ptr} = \\alpha_{t,i} = softmax(\\beta_{t_i})$ é€‰æ‹©å¼€å…³ä¸º: $p_{gen} = sigmoid(W_ss_t + W_cc_t + W_xx_t + b)$ä¸ºé€»è¾‘å›å½’ï¼Œå–å€¼ä¸º[0,1] æœ€ç»ˆåœ¨extend vocabularyä¸Šçš„æ¦‚ç‡åˆ†å¸ƒä¸º:$p(w) = p_{gen}p_{vocab} + (1-p_{gen})p_{ptr}$.å½“$p_{gen}$ä¸º1æ—¶ï¼Œä»è¯æ±‡è¡¨ä¸­ç”Ÿæˆwordï¼›å½“$p_{gen}$ä¸º0æ—¶ï¼Œå°†è¾“å…¥åºåˆ—çš„è¯å¤åˆ¶åˆ°è¾“å‡ºåºåˆ—ä¸­ã€‚ Fig.7.Pointer-generator model.æ¥æºï¼š[Abigail See2017](https://arxiv.org/abs/1704.04368) ç±»ä¼¼çš„è®ºæ–‡è¿˜æœ‰ï¼šCopyNet,Jiatao Gu2016 transformerattention is all you need!(Vaswani, et al., 2017)æå‡ºäº†transformerã€‚transformerä¹Ÿæ˜¯åŸºäºencoder-decoderæ¡†æ¶çš„ï¼Œä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªseq2seqæ¨¡å‹ã€‚ä½†ä¸åŒäºencoderå’Œdecoderéƒ½é‡‡ç”¨RNNçš„seq2seqæ¨¡å‹ï¼Œtransformerå®Œå…¨ä¾èµ–self-attentionæœºåˆ¶æ¥è®¡ç®—inputå’Œoutputçš„å‘é‡è¡¨ç¤ºï¼Œè€Œä¸ä½¿ç”¨RNNæˆ–CNNã€‚ä¸€èˆ¬æ¥è¯´ï¼Œattentionæœºåˆ¶æ˜¯ä¸RNNè”åˆä½¿ç”¨çš„ï¼ŒtransformeræŠŠattentionå’ŒRNNè§£è€¦å¼€äº†ï¼Œåªä½¿ç”¨attentionæœºåˆ¶ã€‚ ä¸ºä»€ä¹ˆtransformerç”¨self-attentionæ¥ç¼–ç inputå’Œoutputï¼Œè€Œä¸ä½¿ç”¨RNNå‘¢ï¼Ÿä¸€æ–¹é¢ï¼Œç”±RNNçš„æ›´æ–°å…¬å¼$s_t = f(s_{t-1},x_t)$å¯ä»¥çœ‹åˆ°ï¼ŒRNNå¤„ç†åºåˆ—æ—¶æ˜¯ä¸²è¡Œè®¡ç®—çš„ï¼Œå°¤å…¶æ˜¯å¤„ç†é•¿åºåˆ—æ—¶æ›´è´¹æ—¶é—´ã€‚ä¸åˆ©äºå¹¶è¡ŒåŒ–ï¼Œè®¡ç®—æ•ˆç‡ä½ã€‚è€Œtransformeré‡‡ç”¨attentionæ¥ç¼–ç è®¡ç®—å‘é‡ï¼Œå¯ä»¥è¿›è¡Œå¹¶è¡ŒåŒ–è®¡ç®—ï¼Œæé«˜è®¡ç®—æ•ˆç‡ã€‚å¦ä¸€æ–¹é¢ï¼ŒRNNåœ¨ç¼–ç é•¿åºåˆ—æ—¶ï¼Œéšç€è·ç¦»çš„å¢å¤§ï¼Œå¾€å¾€ä¼šåå‘äºæœ€è¿‘çš„éƒ¨åˆ†ï¼Œè€Œå­¦ä¹ ä¸åˆ°é•¿æœŸä¾èµ–ã€‚ä½†self-attentionæœºåˆ¶ä¸å—è·ç¦»çš„é™åˆ¶ï¼Œå¯ä»¥æœ‰æ•ˆåœ°å­¦ä¹ åˆ°é•¿æœŸä¾èµ–ã€‚ scaled dot-product attentionä¸key,value,querytransformerçš„ä¸»è¦ç»„ä»¶æ˜¯multi-heads self-attenion mechanismï¼Œè¿™ä¸ªç»„ä»¶ç”¨åˆ°äº†scaled dot-product attentionæœºåˆ¶ã€‚ä¸€èˆ¬åœ°ï¼Œattentionæœºåˆ¶å°†queryå’Œ(key,value)æ˜ å°„ä¸ºoutputï¼Œå…¶ä¸­query,key,value,outputéƒ½æ˜¯vectorã€‚outputæ˜¯æ‰€æœ‰valuesçš„åŠ æƒå’Œï¼Œæƒé‡æ˜¯é€šè¿‡è®¡ç®—queryä¸å¯¹åº”keyä¹‹é—´çš„å…³è”åº¦å¾—åˆ°ã€‚ å…·ä½“æ¥è¯´ï¼Œå°†ä»€ä¹ˆä½œä¸ºkey,value,queryï¼Ÿåˆ†ä¸¤ç§æƒ…å†µï¼Œä»æ¡†å›¾å¯ä»¥ç›´è§‚çš„çœ‹åˆ°ï¼š åœ¨encoder-decoderæ¡†æ¶ä¸­ï¼Œè”ç³»encoderä¸decoderçš„attentionæœºåˆ¶é€šå¸¸å°†encoderçš„æ‰€æœ‰hidden statesä¹˜ä»¥ä¸¤ä¸ªä¸åŒçš„çŸ©é˜µ$W^Q,W^K$åˆ†åˆ«ä½œä¸ºkeyså’Œvaluesã€‚å°†decoderä¸Šä¸€ä¸ªæ—¶é—´æ­¥çš„hidden stateä½œä¸ºqueryã€‚ åœ¨encoderæ¨¡å—ï¼Œself-attentionæœºåˆ¶å°†inputè¯çº§åˆ«çš„å‘é‡è¡¨ç¤ºä¹˜ä»¥ä¸‰ä¸ªä¸åŒçš„çŸ©é˜µ$W^Q,W^K,W^V$åˆ†åˆ«ä½œä¸ºquery,key,valueã€‚è¿›è€Œè®¡ç®—inputæ€»çš„å¥å­çº§åˆ«çš„å‘é‡è¡¨ç¤ºã€‚åŒæ ·åœ°ï¼Œåœ¨decoderæ¨¡å—ä¸­self-attentionæœºåˆ¶å°†outputè¯çº§åˆ«çš„å‘é‡è¡¨ç¤ºåˆ†åˆ«ä¹˜ä»¥ä¸‰ä¸ªä¸åŒçŸ©é˜µ$W^Q,W^K,W^V$åˆ†åˆ«ä½œä¸ºquery,key,valueã€‚è¿›è€Œè®¡ç®—outputæ€»çš„å¥å­çº§åˆ«çš„å‘é‡è¡¨ç¤ºã€‚ æœ‰äº†å…·ä½“çš„key,value,queryåï¼Œscaled dot-product attentionæœºåˆ¶æ€ä¹ˆæ¥è®¡ç®—outputå‘¢ï¼Ÿè®°query,key,valueçš„çŸ©é˜µå½¢å¼åˆ†åˆ«ä¸ºQ,K,Vã€‚queryå’Œkeyç»´åº¦ä¸º$d_k$,valueç»´åº¦ä¸º$d_v$ã€‚åˆ™outputçš„è®¡ç®—æ–¹å¼ä¸ºï¼š$$Attention(Q,K,V) = softmax(\\frac{QK^\\top}{\\sqrt{d_k}})V$$ å¤šç§attentionæœºåˆ¶ä¸­ï¼Œtransformerä¸ºä»€ä¹ˆé€‰æ‹©é‡‡ç”¨scale dot-product attentionæœºåˆ¶å‘¢ï¼Ÿæœ€å¸¸ç”¨çš„ä¸¤ç§attentionæœºåˆ¶æ˜¯dot-productå’Œadditive attentionæœºåˆ¶ã€‚dot-product attentionç”¨ç‚¹ä¹˜æ¥åšæ‰“åˆ†å‡½æ•°ï¼Œadditive attenionå°†æœ‰ä¸€å±‚éšè—å±‚çš„å‰é¦ˆç½‘ç»œä½œä¸ºæ‰“åˆ†å‡½æ•°ã€‚ç†è®ºä¸Šæ¥è¯´ï¼Œè¿™ä¸¤ç§attentionçš„è®¡ç®—å¤æ‚åº¦æ˜¯ä¸€æ ·çš„ï¼›ä½†å®é™…ä¸Šï¼Œdot-product attentionè®¡ç®—æ›´å¿«ï¼Œå ç”¨å†…å­˜æ›´å°ã€‚å› ä¸ºdot-product attentionæœºåˆ¶å¯ä»¥é‡‡ç”¨é«˜åº¦ä¼˜åŒ–çš„çŸ©é˜µä¹˜æ³•ä»£ç ã€‚å½“ç»´åº¦$d_k$è¾ƒå°æ—¶ï¼Œè¿™ä¸¤ç§attentionæœºåˆ¶çš„æ•ˆæœæ˜¯å·®ä¸å¤šçš„ã€‚å½“ç»´åº¦$d_k$æ›´å¤§æ—¶ï¼Œadditive attentionçš„æ•ˆæœè¦å¥½äºdot-product attentionã€‚è¿™å¯èƒ½æ˜¯å› ä¸ºå½“ç»´åº¦$d_k$å˜å¤§æ—¶ï¼Œç‚¹ä¹˜çš„å€¼å˜å¾—è¿‡å¤§ï¼Œè€Œsoftmax()å‡½æ•°åœ¨å€¼è¿‡å¤§çš„èŒƒå›´æ¢¯åº¦æ˜¯å¾ˆå°çš„ï¼Œç±»ä¼¼äºæ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚å› æ­¤ï¼Œæ·»åŠ æ¯”ä¾‹å› å­$\\frac{1}{\\sqrt{d_k}}$æ¥å‡å°ç‚¹ä¹˜çš„å€¼ã€‚ multi-head attentionå¹¶ä¸æ˜¯åªç”¨ä¸€æ¬¡attentionæœºåˆ¶ï¼Œå°†ç»´åº¦ä¸º$d_{model}$çš„key,value,queryæ˜ å°„ä¸ºoutputã€‚è€Œæ˜¯å°†query,key,valueæ˜ å°„åˆ°ç»´åº¦ä¸º$d_k,d_k,d_v$ä¸åŒçš„å­å‘é‡ç©ºé—´ï¼Œå¹¶è¡Œçš„è®¡ç®—$h$æ¬¡ï¼Œåˆ†åˆ«å¾—åˆ°outputåšconcatæ“ä½œï¼Œå¾—åˆ°æ€»çš„outputã€‚$h$ä¸ºheadçš„ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯å¹¶è¡Œattention layerçš„å±‚æ•°ã€‚æœ‰å…³ç³»$d_{model} = d_v \\cdot h$ï¼Œè®ºæ–‡ä¸­é‡‡ç”¨$d_{model} =512,h=8,d_k = d_v = \\frac{d_{model}}{h} = 64$ $$MultiHead(Q,K,V) = concat(head_1,head_2,â€¦,head_h)W^O$$ $$where \\quad head_i = Attention(QW_i^Q,KW_i^K,VW_i^V)$$ å…¶ä¸­$W_i^Q \\in R^{d_{model} \\cdot d_k},W_i^K \\in R^{d_{model} \\cdot d_k},W_i^V \\in R^{d_{model} \\cdot d_v},W^O \\in R^{hd_{v} \\cdot d_{model}}$ Fig.7.multi-head scaled dot-product attentionæ¥æº:Vaswani, et al., 2017 encoderencoderå°†input textç¼–ç ä¸ºåŸºäºattentionçš„åŒ…å«ä½ç½®ä¿¡æ¯çš„å‘é‡è¡¨ç¤ºã€‚ ç”±6ä¸ªå®Œå…¨ç›¸åŒçš„å±‚å †å èµ·æ¥ã€‚ æ¯ä¸€å±‚åŒ…å«ä¸¤ä¸ªå­å±‚ã€‚ç¬¬ä¸€å­å±‚æ˜¯multi-head attentionå±‚ï¼Œç¬¬äºŒå±‚æ˜¯ä¸€ä¸ªç®€å•çš„å…¨è¿æ¥å±‚ã€‚ ä¸¤ä¸ªå­å±‚ä¹‹é—´é‡‡ç”¨æ®‹å·®è¿æ¥ï¼Œå¹¶è¿›è¡Œå½’ä¸€åŒ–ã€‚è¿™æ ·æ‰€æœ‰å­å±‚çš„è¾“å‡ºéƒ½æœ‰ç›¸åŒçš„ç»´åº¦$d_{model} = 512$ Fig.9. transformer encoderæ¥æº:Vaswani, et al., 2017 decoderä»encoder outputå¾—åˆ°æ€»çš„context vectorï¼Œå¹¶æ®æ­¤ç”Ÿæˆresponseã€‚ ä¸encoderç›¸åŒï¼Œç”±6ä¸ªå®Œå…¨ç›¸åŒçš„å±‚å †å èµ·æ¥ã€‚ æ¯ä¸€å±‚é™¤äº†encoderä¸­çš„ä¸¤ä¸ªå­å±‚å¤–ï¼Œè¿˜æ’å…¥äº†ä¸€ä¸ªmulti-head layeræ¥åœ¨æ‰€æœ‰encoder outputä¸Šè¿›è¡Œattentionæ“ä½œã€‚ ä¸¤ä¸ªå­å±‚ä¹‹é—´é‡‡ç”¨æ®‹å·®è¿æ¥ï¼Œå¹¶è¿›è¡Œå½’ä¸€åŒ–ã€‚ ç¬¬ä¸€ä¸ªmulti-head attention sub-layerè¿›è¡Œmaskæ“ä½œï¼Œmaskæ‰outputå½“å‰æ—¶é—´æ­¥åæ‰€æœ‰çš„tokensã€‚é˜²æ­¢attentionæœºåˆ¶çœ‹åˆ°æœªæ¥çš„ä¿¡æ¯ã€‚ Fig.10. transformer decoderæ¥æº:Vaswani, et al., 2017 transformerçš„æ€»ä½“ç»“æ„ inputå’Œoutputéƒ½å…ˆç»è¿‡ä¸€ä¸ªembedding layerå¾—åˆ°å„è‡ªçš„å‘é‡è¡¨ç¤ºï¼Œç»´åº¦ä¸º$d_{model} = 512$ ç”±äºself-attentionä¸èƒ½åƒRNNä¸€æ ·è‡ªåŠ¨åœ°ç¼–ç ä½ç½®ä¿¡æ¯ï¼Œå› æ­¤éœ€è¦é¢å¤–åœ°å°†ä½ç½®ä¿¡æ¯æ·»åŠ åˆ°è¾“å…¥ã€‚ åœ¨æœ€ådecoderçš„è¾“å‡ºå¤–æ¥ä¸€ä¸ªçº¿æ€§å±‚å’Œsoftmaxå±‚ã€‚ Fig.11. transformerçš„æ•´ä½“æ¡†æ¶æ¥æº:Vaswani, et al., 2017 å‚è€ƒé“¾æ¥ Attention? Attention! by Weng, Lilian","categories":[{"name":"æ·±åº¦å­¦ä¹ ","slug":"æ·±åº¦å­¦ä¹ ","permalink":"http://yoursite.com/categories/æ·±åº¦å­¦ä¹ /"}],"tags":[{"name":"rnn","slug":"rnn","permalink":"http://yoursite.com/tags/rnn/"},{"name":"attention","slug":"attention","permalink":"http://yoursite.com/tags/attention/"}]},{"title":"pipå®‰è£…pythonæ¨¡å—æŠ¥é”™","slug":"pipå®‰è£…pythonæ¨¡å—æŠ¥é”™","date":"2019-07-12T01:51:58.000Z","updated":"2019-07-12T02:11:58.000Z","comments":true,"path":"2019/07/12/pipå®‰è£…pythonæ¨¡å—æŠ¥é”™/","link":"","permalink":"http://yoursite.com/2019/07/12/pipå®‰è£…pythonæ¨¡å—æŠ¥é”™/","excerpt":"åœ¨ä½¿ç”¨pip installå‘½ä»¤å®‰è£…pythonæ¨¡å—æ—¶ï¼ŒæŠ¥é”™ï¼š 1Cannot uninstall &apos;PyYAML&apos;. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall.","text":"åœ¨ä½¿ç”¨pip installå‘½ä»¤å®‰è£…pythonæ¨¡å—æ—¶ï¼ŒæŠ¥é”™ï¼š 1Cannot uninstall &apos;PyYAML&apos;. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall. é”™è¯¯åˆ†ææŠ¥é”™ä¿¡æ¯å‘Šè¯‰æˆ‘ä»¬ï¼šâ€œä¸èƒ½å¸è½½â€˜pyyamlâ€™æ¨¡å—ï¼Œå› ä¸ºè¿™ä¸ªæ¨¡å—æ˜¯distutilsæ–¹å¼å®‰è£…çš„ï¼Œä¸èƒ½ç¡®å®šå“ªäº›æ–‡ä»¶å±äºè¿™ä¸ªæ¨¡å—ï¼Œå› æ­¤ä¸èƒ½å®Œæ•´åœ°å¸è½½è¿™ä¸ªæ¨¡å—ã€‚â€ distutilsæ˜¯pythonæœ€åˆçš„æ¨¡å—å®‰è£…å’Œåˆ†å‘ç³»ç»Ÿï¼Œdistutilsä¸ä¼šä¿ç•™å“ªäº›æ–‡ä»¶å±äºå“ªä¸ªå®‰è£…åŒ…çš„ä¿¡æ¯ï¼Œç”šè‡³ä¸ä¼šä¿ç•™å®‰è£…åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚ç›´æ¥ä½¿ç”¨distutilsçš„æ–¹å¼å·²ç»è¢«æ·˜æ±°ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯setuptools. æ‰€è°“æ¨¡å—çš„åˆ†å‘ï¼Œå°±æ˜¯å¼€å‘è€…æ‰“åŒ…å¹¶å‘å¸ƒè‡ªå·±çš„æ¨¡å—ï¼Œä¾›å…¶ä»–äººä½¿ç”¨ã€‚ è¿™æ ·æˆ‘ä»¬å°±çŸ¥é“äº†ï¼Œå› ä¸ºpyyamlæ¨¡å—æ—¶é€šè¿‡distutilsæ–¹å¼å®‰è£…çš„ï¼Œå› æ­¤ä¸èƒ½æ˜ç¡®æ–‡ä»¶ä¸åŒ…ä¹‹é—´çš„éš¶å±å…³ç³»ï¼Œä¸èƒ½æ­£ç¡®å¸è½½ã€‚ è§£å†³åŠæ³•ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å¿½ç•¥å·²å®‰è£…çš„æ¨¡å—ï¼Œå¼ºåˆ¶å®‰è£…å’Œæ›´æ–° 1pip3 install &lt;package-name&gt; --ignore-installed &lt;pyyaml&gt; --upgrade å‚è€ƒé“¾æ¥ å¼ºåˆ¶å®‰è£…å’Œæ›´æ–° å¦‚ä½•åœ¨Windowsæ“ä½œç³»ç»Ÿä¸­å‡çº§/å¸è½½distutilsè½¯ä»¶åŒ…ï¼ˆPyYAMLï¼‰ï¼Ÿ pythonå®˜æ–¹æ‰‹å†Œ-å®‰è£…pythonæ¨¡å— setuptoolsä¸distutils","categories":[{"name":"python","slug":"python","permalink":"http://yoursite.com/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"http://yoursite.com/tags/python/"}]},{"title":"NAACL2019-å¯¹è¯ç³»ç»Ÿ","slug":"NAACL2019-å¯¹è¯ç³»ç»Ÿ","date":"2019-07-10T12:55:17.000Z","updated":"2019-07-21T15:03:16.000Z","comments":true,"path":"2019/07/10/NAACL2019-å¯¹è¯ç³»ç»Ÿ/","link":"","permalink":"http://yoursite.com/2019/07/10/NAACL2019-å¯¹è¯ç³»ç»Ÿ/","excerpt":"è®°å½•NAACL2019å¯¹è¯ç³»ç»Ÿç›¸å…³çš„è®ºæ–‡é˜…è¯»ç¬”è®°ã€‚åŒ…æ‹¬ä»»åŠ¡å‹å’Œé—²èŠå¼å¯¹è¯ç³»ç»Ÿï¼Œå¯¹è®ºæ–‡çš„æ€è·¯å’Œæ¨¡å‹åšç®€å•ä»‹ç»ï¼Œå€¼å¾—åå¤ç²¾è¯»çš„è®ºæ–‡ä¼šå•ç‹¬å¼€ä¸€ç¯‡åšæ–‡æ¥å†™ã€‚NAACL2019çš„ä¼šè®®åˆ—è¡¨é“¾æ¥ï¼šhttps://naacl2019.org/program/accepted/","text":"è®°å½•NAACL2019å¯¹è¯ç³»ç»Ÿç›¸å…³çš„è®ºæ–‡é˜…è¯»ç¬”è®°ã€‚åŒ…æ‹¬ä»»åŠ¡å‹å’Œé—²èŠå¼å¯¹è¯ç³»ç»Ÿï¼Œå¯¹è®ºæ–‡çš„æ€è·¯å’Œæ¨¡å‹åšç®€å•ä»‹ç»ï¼Œå€¼å¾—åå¤ç²¾è¯»çš„è®ºæ–‡ä¼šå•ç‹¬å¼€ä¸€ç¯‡åšæ–‡æ¥å†™ã€‚NAACL2019çš„ä¼šè®®åˆ—è¡¨é“¾æ¥ï¼šhttps://naacl2019.org/program/accepted/ ã€ŠEvaluating Coherence in Dialogue Systems using Entailmentã€‹ã€é“¾æ¥ã€‘https://arxiv.org/abs/1904.03371ã€ä»£ç ã€‘https://github.com/nouhadziri/DialogEntailment åŠ æ‹¿å¤§é˜¿å°”ä¼¯å¡”å¤§å­¦å‘è¡¨çš„è®ºæ–‡ã€‚è®ºæ–‡æå‡ºäº†ä¸€ç§è¯„ä¼°å¯¹è¯ç³»ç»Ÿç”Ÿæˆå›å¤å¥½åçš„æŒ‡æ ‡ã€‚è¿™ç¯‡è®ºæ–‡çš„æƒ³æ³•æ¥æºäºï¼šå‘è¡¨åœ¨ACL2019ä¸Šçš„è®ºæ–‡ã€ŠDialogue Natural Language Inferenceã€‹æå‡ºåˆ©ç”¨NLI(natural language inference)ä»»åŠ¡æ¥æé«˜å¯¹è¯ç³»ç»Ÿç”Ÿæˆå›å¤çš„ä¸€è‡´æ€§ã€‚æœ¬æ–‡çš„ä½œè€…åˆ™æƒ³åˆ°ç”¨NLIä»»åŠ¡æ¥è¯„ä¼°å¯¹è¯ç³»ç»Ÿç”Ÿæˆå›å¤çš„å¥½åã€‚å…·ä½“åœ°ï¼Œè®ºæ–‡ç”¨äº†BERT[Devlin et al., 2018]å’ŒThe Enhanced Sequential Inference Model(ESIM)[Chen et al., 2016] è¿™ä¸¤ç§æ–¹æ³•æ¥è®­ç»ƒNLIæ¨¡å‹ã€‚å¦å¤–è®ºæ–‡è¿˜å…¬å¼€äº†ä¸€ä¸ªç”¨äºNLIä»»åŠ¡çš„æ•°æ®é›†ã€‚","categories":[{"name":"è®ºæ–‡","slug":"è®ºæ–‡","permalink":"http://yoursite.com/categories/è®ºæ–‡/"}],"tags":[{"name":"dialog system","slug":"dialog-system","permalink":"http://yoursite.com/tags/dialog-system/"},{"name":"NAACL2019","slug":"NAACL2019","permalink":"http://yoursite.com/tags/NAACL2019/"}]},{"title":"ACL2019-å¯¹è¯ç³»ç»Ÿ","slug":"ACL2019-å¯¹è¯ç³»ç»Ÿ","date":"2019-07-07T11:19:27.000Z","updated":"2019-07-31T03:40:18.000Z","comments":true,"path":"2019/07/07/ACL2019-å¯¹è¯ç³»ç»Ÿ/","link":"","permalink":"http://yoursite.com/2019/07/07/ACL2019-å¯¹è¯ç³»ç»Ÿ/","excerpt":"è®°å½•ACL2019å¯¹è¯ç³»ç»Ÿç›¸å…³çš„è®ºæ–‡é˜…è¯»ç¬”è®°ã€‚åŒ…æ‹¬ä»»åŠ¡å‹å’Œé—²èŠå¼å¯¹è¯ç³»ç»Ÿï¼Œå¯¹è®ºæ–‡çš„æ€è·¯å’Œæ¨¡å‹åšç®€å•ä»‹ç»ï¼Œå€¼å¾—åå¤ç²¾è¯»çš„è®ºæ–‡ä¼šå•ç‹¬å¼€ä¸€ç¯‡åšæ–‡æ¥å†™ã€‚ACL2019çš„ä¼šè®®åˆ—è¡¨é“¾æ¥ï¼šhttp://www.acl2019.org/EN/program.xhtml","text":"è®°å½•ACL2019å¯¹è¯ç³»ç»Ÿç›¸å…³çš„è®ºæ–‡é˜…è¯»ç¬”è®°ã€‚åŒ…æ‹¬ä»»åŠ¡å‹å’Œé—²èŠå¼å¯¹è¯ç³»ç»Ÿï¼Œå¯¹è®ºæ–‡çš„æ€è·¯å’Œæ¨¡å‹åšç®€å•ä»‹ç»ï¼Œå€¼å¾—åå¤ç²¾è¯»çš„è®ºæ–‡ä¼šå•ç‹¬å¼€ä¸€ç¯‡åšæ–‡æ¥å†™ã€‚ACL2019çš„ä¼šè®®åˆ—è¡¨é“¾æ¥ï¼šhttp://www.acl2019.org/EN/program.xhtml ã€ŠMemory Consolidation for Contextual Spoken Language Understanding with Dialogue Logistic Inferenceã€‹ã€é“¾æ¥ã€‘ï¼šhttps://arxiv.org/abs/1906.01788ã€æºç ã€‘ï¼šæ—  ä¸­ç§‘é™¢è‡ªåŠ¨åŒ–æ‰€å‘è¡¨çš„çŸ­è®ºæ–‡ã€‚åœ¨å¤šè½®å¯¹è¯ä¸­ï¼Œå¯¹è¯å†å²ï¼ˆcontext informationï¼‰å¯¹å›å¤ï¼ˆresponseï¼‰çš„ç”Ÿæˆæœ‰é‡è¦ä½œç”¨ã€‚ä»»åŠ¡å‹å¯¹è¯ä¸­çš„ç®¡é“æ¨¡å‹åˆ†ä¸º4ä¸ªæ¨¡å—ï¼šNLUã€å¯¹è¯çŠ¶æ€è¿½è¸ªã€å¯¹è¯ç­–ç•¥å­¦ä¹  åŠNLGã€‚å¯¹è¯çŠ¶æ€è¿½è¸ªåˆåŒ…å«ä»»åŠ¡ï¼šdomain classificationã€intent detectionå’Œslot fillingã€‚domain classificationå’Œintent detectionä»»åŠ¡å½“åšåˆ†ç±»ä»»åŠ¡æ¥å¤„ç†ï¼Œå¸¸é‡‡ç”¨SVMæˆ–æ·±åº¦ç¥ç»ç½‘ç»œçš„æ–¹æ³•ï¼›slot fillingä»»åŠ¡è¢«å½“åšåºåˆ—æ ‡æ³¨ä»»åŠ¡æ¥å¤„ç†ï¼Œå¸¸é‡‡ç”¨BiLSTM+CRFæ¨¡å‹ã€‚NLUèƒ½å¦å……åˆ†åˆ©ç”¨context informationï¼Œå¯¹è¿™ä¸‰ä¸ªä¸‹æ¸¸ä»»åŠ¡æœ‰å¾ˆå¤§å½±å“ã€‚ä¸ºäº†æ›´å¥½çš„åˆ©ç”¨context informationï¼Œæœ¬æ–‡æå‡ºäº†å¯¹è¯é€»è¾‘æ¨æ–­ä»»åŠ¡ï¼ˆDLI,dialog logic inferenceï¼‰ï¼Œä»»åŠ¡å®šä¹‰ä¸ºï¼šå°†æ‰“ä¹±é¡ºåºçš„å¤šè½®å¯¹è¯é‡æ–°æ’åºï¼›è¾“å…¥ä¹‹å‰çš„å¯¹è¯ï¼Œä»å‰©ä½™çš„utterance candidatesä¸­é€‰ä¸­ä¸‹ä¸€å¥å¯¹è¯ã€‚NLUä»»åŠ¡é‡‡ç”¨äº†æ‰€è°“çš„memory networkï¼Œå…¶å®å°±æ˜¯é‡‡ç”¨å¤šä¸ªencoderå¯¹context informationè¿›è¡Œç¼–ç ï¼Œå†ç”¨attentionæœºåˆ¶æˆ–åˆ«çš„æ–¹æ³•å¾—åˆ°context informationæ€»çš„å‘é‡åŒ–è¡¨ç¤ºã€‚æœ¬æ–‡è”åˆè®­ç»ƒDLIä»»åŠ¡å’ŒNLUä»»åŠ¡ï¼Œé€šè¿‡ä¸¤ä¸ªä»»åŠ¡å…±äº«encoderå’Œmemory retrieveæ¨¡å—ï¼Œæ¥è®©NLUä»»åŠ¡æ›´å¥½åœ°åˆ©ç”¨context informationã€‚å…¶å®æ˜¯å¾—åˆ°context informationæ›´åˆç†çš„å‘é‡åŒ–è¡¨ç¤ºï¼Œæ¥ä½œä¸ºä¸‹æ¸¸domain classificationã€intent detectionå’Œslot fillingä»»åŠ¡çš„è¾“å…¥ã€‚ è®ºæ–‡æå‡ºçš„å°†æ‰“ä¹±é¡ºåºçš„å¯¹è¯é‡æ–°æ’åºçš„DLIä»»åŠ¡ï¼Œå¯ä»¥è¿›ä¸€æ­¥æ·±å…¥ï¼Œå°†å¥å­åˆ‡åˆ†ä¸ºå‡ æ®µæ‰“ä¹±é¡ºåºå†é‡æ–°æ’åºï¼›å¯ä»¥åº”ç”¨åˆ°é—²èŠå¼å¯¹è¯ç³»ç»Ÿä¸­ã€‚ ã€ŠDialogue Natural Language Inferenceã€‹ã€é“¾æ¥ã€‘ï¼šhttps://arxiv.org/abs/1811.00671ã€ä»£ç ã€‘ï¼šæ— ã€æ•°æ®é›†ã€‘ï¼šhttps://wellecks.github.io/dialogue_nli/ åŠ åˆ©ç¦å°¼äºšå¤§å­¦ã€Facebook AI Labå‘è¡¨çš„è®ºæ–‡ã€‚æ ¸å¿ƒæ˜¯æå‡ºç”¨NLI(natural language inference)ä»»åŠ¡æ¥æé«˜persona-based dialog systemçš„ä¸€è‡´æ€§ã€‚è¿™é‡Œå°±è¦å…ˆææ¸…æ¥šNLIä»»åŠ¡å’Œä¸€è‡´æ€§é—®é¢˜ä¸¤ä¸ªæ¦‚å¿µã€‚ å…ˆä»é—®é¢˜å‡ºå‘ï¼Œæ‰€è°“å¯¹è¯çš„ä¸€è‡´æ€§é—®é¢˜ã€‚å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š logical contradictionï¼Œé€»è¾‘çŸ›ç›¾ã€‚æ¯”å¦‚åŒä¸€ä¸ªäººçš„ä¸¤å¥è¯:â€æˆ‘æœ‰ä¸€åªç‹—â€ï¼Œâ€æˆ‘æ²¡å…»è¿‡ç‹—â€ã€‚å°±æ˜¯é€»è¾‘çŸ›ç›¾çš„ã€‚ æ¯”è¾ƒæ¨¡ç³Šçš„éé€»è¾‘çŸ›ç›¾ã€‚åŒä¸€ä¸ªäººä¸å¯èƒ½è¯´å‡ºçš„ä¸¤å¥è¯ï¼šâ€œæˆ‘ä»æ¥ä¸è¿åŠ¨â€ï¼Œâ€œæˆ‘å»ç¯®çƒäº†â€ã€‚å°±æ˜¯è¿™ç§éé€»è¾‘çŸ›ç›¾ã€‚çœŸé¦™è­¦å‘Šã€‚ è‡³äºpersonaä¸€è‡´æ€§é—®é¢˜ï¼Œå°±æ˜¯å›å¤çš„utteranceä¸èƒ½ä¸è¯´è¯äººçš„personaçŸ›ç›¾ï¼Œä¹Ÿä¸èƒ½ä¸ä¹‹å‰çš„å›å¤æœ‰çŸ›ç›¾ã€‚ å…·ä½“ä»‹ç»NLIä»»åŠ¡ã€‚è¿™å…¶å®æ˜¯ä¸€ä¸ªåˆ†ç±»é—®é¢˜ã€‚è®ºæ–‡å…¬å¼€äº†ä¸€ä¸ªè‡ªå·±æ ‡æ³¨çš„NLIæ•°æ®é›†ã€‚ è®­ç»ƒé˜¶æ®µï¼šè®­ç»ƒé›†å½¢å¼æ˜¯ {$ï¼ˆs_1,s_2ï¼‰$,label }ï¼Œå¯¹åº”labels $\\in$ï¼ˆä¸€è‡´ã€æ— å…³ã€çŸ›ç›¾ï¼‰ã€‚ åœ¨testé˜¶æ®µï¼Œç»™å®šä¸€ä¸ªå¥å­å¯¹ï¼ˆå¥å­1ï¼Œå¥å­2ï¼‰æ¥åˆ¤æ–­å¯¹åº”çš„labelã€‚ è®ºæ–‡çš„æœ€ç»ˆç›®çš„æ˜¯é€šè¿‡NLIä»»åŠ¡è®­ç»ƒçš„æ¨¡å‹æ¥æé«˜persona dialog systemçš„ä¸€è‡´æ€§ã€‚è¿™æ˜¯å¦‚ä½•æ¥å®ç°çš„å‘¢ï¼Ÿå¯¹äºä¸€ä¸ªdialog systemï¼Œç»™å®šå¯¹è¯å†å²$ï¼ˆu_1,u_2,â€¦,u_tï¼‰$ åŠè¯´è¯äººçš„personaæ–‡æœ¬æè¿°$ï¼ˆp_1,p_2,â€¦,p_nï¼‰$,ä»response candidates$ï¼ˆy_1,y_2,â€¦,y_mï¼‰$ä¸­é€‰æ‹©ä¸€ä¸ª$u_{t+1}$ï¼ˆå¦‚ä½•ç”Ÿæˆå¤šä¸ªresponsesä¸æ˜¯è¿™ç¯‡è®ºæ–‡è¦è§£å†³çš„ï¼‰ã€‚ç”¨NLIä»»åŠ¡çš„æ¨¡å‹æ¥é¢„æµ‹$(y_i,u_j),(y_i,p_k)å…¶ä¸­ï¼ši\\in [1,m],j\\in [1,t],k \\in [1,n]$å¯¹åº”çš„labelï¼Œå¦‚æœå¥å­ä¹‹é—´æ˜¯çŸ›ç›¾çš„ï¼Œåˆ™æ·»åŠ æƒ©ç½šé¡¹ã€‚ä»è€Œå¾—åˆ°ä¸€è‡´æ€§æœ€å¥½çš„utteranceä½œä¸ºresponseã€‚ ã€ŠReCoSa: Detecting the Relevant Contexts with Self-Attention for Multi-turn Dialogue Generationã€‹ã€é“¾æ¥ã€‘ï¼šhttps://arxiv.org/abs/1907.05339ã€æ•°æ®é›†ã€‘ï¼šEnglish Ubuntu dialogue corpusã€ä»£ç ã€‘ï¼šhttps://github.com/zhanghainan/ReCoSa ä¸­ç§‘é™¢å‘è¡¨çš„è®ºæ–‡ã€‚åœ¨å¤šè½®å¯¹è¯ä¸­ï¼Œç”Ÿæˆresponseæ—¶ï¼Œå¯¹è¯å†å²ä¸­æœ€ç›¸å…³çš„éƒ¨åˆ†èµ·ç€é‡è¦çš„ä½œç”¨ã€‚è®ºæ–‡è¦è§£å†³çš„é—®é¢˜ï¼šå¦‚ä½•æ›´å‡†ç¡®åœ°æ‰¾åˆ°å¹¶åˆ©ç”¨relevant contextæ¥ç”Ÿæˆresponseã€‚å¤šè½®å¯¹è¯ä¸­å¹¿æ³›ä½¿ç”¨çš„HREDæ¨¡å‹,[(Serban et al.,2016;,Sordoni et al., 2015]æ— å·®åˆ«åœ°åˆ©ç”¨context informationï¼Œå¿½ç•¥äº†relevant contextã€‚è™½ç„¶æœ‰åˆ©ç”¨relevant contextçš„ç›¸å…³å·¥ä½œï¼Œä½†è¿™äº›å·¥ä½œéƒ½æœ‰å„è‡ªçš„é—®é¢˜ã€‚[Tian et al., 2017]æå‡ºè®¡ç®—context ä¸postä¹‹é—´çš„cosine similarityæ¥è¡¡é‡context relevanceï¼Œå…¶å‡è®¾æ˜¯contextä¸responseä¹‹é—´çš„relevanceç­‰ä»·äºpostä¸responseä¹‹é—´çš„relevanceï¼Œè¿™ä¸ªå‡è®¾æ˜¯ç«™ä¸ä½è„šçš„ã€‚[Xing et al., 2018]å‘HREDæ¨¡å‹å¼•å…¥äº†attentionæœºåˆ¶ï¼Œä½†attentionæœºåˆ¶å®šä½relevant contextæ—¶ä¼šäº§ç”Ÿåå·®ï¼Œå› ä¸ºåŸºäºRNNçš„attentionæœºåˆ¶å€¾å‘äºæœ€é è¿‘çš„contextï¼ˆclose contextï¼‰ã€‚è®ºæ–‡æå‡ºäº†è‡ªå·±çš„è§£å†³åŠæ³•ï¼Œç”¨self-attentionæœºåˆ¶æ¥è¡¡é‡contextäºresponseä¹‹é—´çš„relevanceã€‚self-attentionæœºåˆ¶çš„ä¼˜ç‚¹æ˜¯å¯ä»¥æœ‰æ•ˆæ•æ‰åˆ°é•¿è·ç¦»çš„ä¾èµ–å…³ç³»ã€‚ æ¨¡å‹åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šcontextåŒ…å«Nè½®å¯¹è¯ï¼š ${s_1,s_2,â€¦,s_N}$å…¶ä¸­ï¼Œ$s_i = {x_1,x_2,â€¦,x_M}$ï¼ŒMä¸ºå¥å­é•¿åº¦ã€‚responseä¸º$Y = {y_1,y_2,â€¦,y_M}$ context representation encoderï¼š å°†context encodeä¸ºvectorã€‚ word-level encoderï¼š ç”¨LSTMå¯¹sentenceç¼–ç ï¼Œå°†LSTMæœ€åä¸€ä¸ªæ—¶é—´æ­¥çš„hidden stateä½œä¸ºsentence representation: $h^{s_i}$ï¼› ç”±äºself-attentionæœºåˆ¶ä¸èƒ½åŒºåˆ†wordä½ç½®ä¿¡æ¯ï¼Œè¿˜éœ€è¦æ·»åŠ position embedding: $p^{s_i}$, æŠŠä¸¤ä¸ªå‘é‡åšconcatenateæ“ä½œï¼Œå¾—åˆ°æ€»å¾—sentence representation:$(h^{s_i},p^{s_i})$ã€‚ å¯¹äºcontextä¸­çš„Nä¸ªå¥å­æœ‰${(h^{s_1},p^{s_1}),â€¦,(h^{s_N},p^{s_N})}$ context self-attention: é‡‡ç”¨multi-head self-attentionæœºåˆ¶ï¼Œå°†${(h^{s_1},p^{s_1}),â€¦,(h^{s_N},p^{s_N})}$ç»è¿‡ä¸åŒçš„çº¿æ€§å˜æ¢ä½œä¸ºqueryã€keysã€values matrix,ç”±Nä¸ªsentence representationå¾—åˆ°æ€»çš„context representation $O_s$ã€‚ response representation encoder åŒæ ·ç”¨multi-head self-attentionæœºåˆ¶,å°†responseçš„word embeddingåŠposition embedding ${(w_1,p_1),â€¦,(w_{t-1},p_{t-1})}$ç»è¿‡ä¸åŒçš„çº¿æ€§å˜æ¢ä½œä¸ºqueryã€keysã€values matrixï¼Œå¾—åˆ°response representation $O_r$ã€‚ åœ¨trainé˜¶æ®µ é‡‡ç”¨maskæ“ä½œï¼Œåœ¨æ—¶é—´æ­¥tå¯¹äºword $y_t$ï¼Œmaskæ‰${y_t,y_{t+1},â€¦,y_M}$ï¼Œåªä¿ç•™${y_1,y_2,â€¦,y_{t-1}}$æ¥è®¡ç®—response representationã€‚ åœ¨inferé˜¶æ®µ åœ¨ç”Ÿæˆresponseçš„æ—¶é—´æ­¥tï¼Œå°†ç”Ÿæˆçš„response ${g_1,â€¦,g_{t-1}}$ï¼Œæ¥ä½œä¸ºresponse representationã€‚ context-response attention decoder é‡‡ç”¨multi-head self-attentionæœºåˆ¶ï¼Œå°†context attention representation $O_s$ä½œä¸ºkeysã€values matrixï¼Œå°†response hidden representation $O_r$ä½œä¸ºquery matrixã€‚å¾—åˆ°è¾“å‡º$O_d$. æ¨¡å‹æ¡†æ¶å›¾ ã€ŠPersuasion for Good: Towards a Personalized Persuasive Dialogue System for Social Goodã€‹ã€é“¾æ¥ã€‘ï¼šhttps://arxiv.org/abs/1906.06725ã€ä»£ç ã€æ•°æ®é›†ã€‘ï¼šhttps://gitlab.com/ucdavisnlp/persuasionforgood/tree/master æµ™æ±Ÿå¤§å­¦ã€åŠ åˆ©ç¦å°¼äºšå¤§å­¦å‘è¡¨ã€‚è·å¾—ACL2019 best paperæåã€‚è®ºæ–‡çš„ä¸»è¦è´¡çŒ®æ˜¯å…¬å¼€äº†ä¸€ä¸ªåŒ…å«è¯´è¯äººä¸ªäººä¿¡æ¯çš„åŠè¯´æ•°æ®é›†ï¼Œåœ¨å­é›†ä¸Šæ ‡æ³¨äº†åç§ä¸åŒçš„åŠè¯´ç­–ç•¥ã€‚å¹¶è®­ç»ƒäº†ç”¨äºåˆ†ç±»ä¸åŒåŠè¯´ç­–ç•¥çš„åˆ†ç±»å™¨ã€‚ ã€ŠDo Neural Dialog Systems Use the Conversation History Effectively? An Empirical Studyã€‹ã€é“¾æ¥ã€‘ï¼šhttps://arxiv.org/abs/1906.01603ã€ä»£ç ã€‘ï¼šhttps://github.com/chinnadhurai/ParlAI/ è®ºæ–‡è·å¾—ACL2019 best short paperæåã€‚è®ºæ–‡çš„ç ”ç©¶ç‚¹æ˜¯ï¼šç”Ÿæˆå¼å¯¹è¯ç³»ç»Ÿæ˜¯å¦æœ‰æ•ˆåˆ©ç”¨æˆ–æ­£ç¡®ç†è§£äº†å¯¹è¯å†å²ï¼Ÿè®ºæ–‡é€šè¿‡å‘å¯¹è¯å†å²ä¸­å¼•å…¥ä¸åŒç±»å‹çš„æ‰°åŠ¨ï¼Œæ¥ç ”ç©¶ç”Ÿæˆå¼å¯¹è¯ç³»ç»Ÿç”Ÿæˆå›å¤çš„å›°æƒ‘åº¦å˜åŒ–ã€‚è¿™ä¸ªæ–¹æ³•çš„ä¸€ä¸ªå‰ææ˜¯å¦‚æœç”Ÿæˆå¼å¯¹è¯ç³»ç»Ÿå¯¹æŸç§ä¿¡æ¯çš„æ‰°åŠ¨ä¸æ•æ„Ÿï¼Œé‚£ä¹ˆå®ƒæ²¡æœ‰æœ‰æ•ˆåˆ©ç”¨è¿™ç§ä¿¡æ¯ã€‚ è®ºæ–‡åœ¨æ¯”è¾ƒäº†ä¸‰ç§æ¨¡å‹ã€‚ åŸºäºLSTMçš„seq2seqæ¨¡å‹ã€‚ åŸºäºLSTMçš„seq2seqæ¨¡å‹ + attentionæœºåˆ¶ã€‚ åŸºäºtransformerçš„seq2seqæ¨¡å‹ã€‚ è®ºæ–‡åœ¨å››ä¸ªå¤šè½®å¯¹è¯æ•°æ®é›†ä¸Šè¿›è¡Œå®éªŒã€‚ bAbI dialogã€‚(Bordes and Weston, 2016) Persona Chatã€‚(Zhang et al., 2018) Dailydialogã€‚ (Li et al., 2017) MutualFriendsã€‚(He et al., 2017) è®ºæ–‡å‘å¯¹è¯å†å²å¼•å…¥äº†ä¸åŒçš„æ‰°åŠ¨ã€‚ å¥å­çº§åˆ«çš„æ‰°åŠ¨ï¼š éšæœºæ‰“ä¹±å¯¹è¯å†å²ä¸­å¥å­çš„é¡ºåºã€‚ å€’åºå¯¹è¯å†å²ä¸­å¥å­çš„é¡ºåºã€‚ éšæœºå»æ‰å¯¹è¯å†å²ä¸­ç‰¹å®šçš„å¥å­ã€‚ å¯¹è¯å†å²ä¸­æœ‰nä¸ªå¥å­ï¼Œåªä¿ç•™æœ€è¿‘çš„kä¸ªå¥å­$(k \\le n)$ã€‚ è¯çº§åˆ«çš„æ‰°åŠ¨ï¼š éšæœºæ‰“ä¹±ä¸€ä¸ªå¥å­ä¸­è¯çš„é¡ºåºã€‚ å€’åºä¸€ä¸ªå¥å­ä¸­è¯çš„é¡ºåºã€‚ éšæœºå»æ‰å¯¹è¯å†å²ä¸­30%çš„è¯ã€‚ å»æ‰æ‰€æœ‰çš„åè¯ã€‚ å»æ‰æ‰€æœ‰çš„åŠ¨è¯ã€‚","categories":[{"name":"è®ºæ–‡","slug":"è®ºæ–‡","permalink":"http://yoursite.com/categories/è®ºæ–‡/"}],"tags":[{"name":"ACL2019","slug":"ACL2019","permalink":"http://yoursite.com/tags/ACL2019/"},{"name":"dialog system","slug":"dialog-system","permalink":"http://yoursite.com/tags/dialog-system/"}]},{"title":"è‡ªç„¶è¯­è¨€å¤„ç†---ä¼šè®®åˆ—è¡¨","slug":"è‡ªç„¶è¯­è¨€å¤„ç†-ä¼šè®®åˆ—è¡¨","date":"2019-04-24T06:55:43.000Z","updated":"2019-07-07T09:00:06.000Z","comments":true,"path":"2019/04/24/è‡ªç„¶è¯­è¨€å¤„ç†-ä¼šè®®åˆ—è¡¨/","link":"","permalink":"http://yoursite.com/2019/04/24/è‡ªç„¶è¯­è¨€å¤„ç†-ä¼šè®®åˆ—è¡¨/","excerpt":"è®°å½•è‡ªç„¶è¯­è¨€å¤„ç†æ–¹å‘çš„å›½é™…ä¼šè®®åˆ—è¡¨ã€‚","text":"è®°å½•è‡ªç„¶è¯­è¨€å¤„ç†æ–¹å‘çš„å›½é™…ä¼šè®®åˆ—è¡¨ã€‚ Aç±»ä¼šè®®AAAIï¼ŒAssociation for the Advancement of Artificial Intelligence å…¶ä»–ICLRï¼ŒThe International Conference on Learning Representationsï¼Œå›½é™…å­¦ä¹ è¡¨å¾ä¼šè®®2013å¹´æ‰åˆšåˆšæˆç«‹äº†ç¬¬ä¸€å±Šã€‚è¿™ä¸ªä¸€å¹´ä¸€åº¦çš„ä¼šè®®å·²ç»è¢«å­¦æœ¯ç ”ç©¶è€…ä»¬å¹¿æ³›è®¤å¯ï¼Œè¢«è®¤ä¸ºã€Œæ·±åº¦å­¦ä¹ çš„é¡¶çº§ä¼šè®®ã€ã€‚è¿™ä¸ªä¼šè®®çš„æ¥å¤´ä¸å°ï¼Œç”±ä½åˆ—æ·±åº¦å­¦ä¹ ä¸‰å¤§å·¨å¤´ä¹‹äºŒçš„ Yoshua Bengio å’Œ Yann LeCun ç‰µå¤´åˆ›åŠã€‚Yoshua Bengio æ˜¯è’™ç‰¹åˆ©å°”å¤§å­¦æ•™æˆï¼Œæ·±åº¦å­¦ä¹ ä¸‰å·¨å¤´ä¹‹ä¸€ï¼Œä»–é¢†å¯¼è’™ç‰¹åˆ©å°”å¤§å­¦çš„äººå·¥æ™ºèƒ½å®éªŒå®¤ï¼ˆMILAï¼‰è¿›è¡Œ AI æŠ€æœ¯çš„å­¦æœ¯ç ”ç©¶ã€‚MILA æ˜¯ä¸–ç•Œä¸Šæœ€å¤§çš„äººå·¥æ™ºèƒ½ç ”ç©¶ä¸­å¿ƒä¹‹ä¸€ï¼Œä¸è°·æ­Œä¹Ÿæœ‰ç€å¯†åˆ‡çš„åˆä½œã€‚è€Œ Yann LeCun å°±è‡ªä¸ç”¨æï¼ŒåŒä¸ºæ·±åº¦å­¦ä¹ ä¸‰å·¨å¤´ä¹‹ä¸€çš„ä»–ç°ä»» Facebook äººå·¥æ™ºèƒ½ç ”ç©¶é™¢ï¼ˆFAIRï¼‰é™¢é•¿ã€çº½çº¦å¤§å­¦æ•™æˆã€‚ä½œä¸ºå·ç§¯ç¥ç»ç½‘ç»œä¹‹çˆ¶ï¼Œä»–ä¸ºæ·±åº¦å­¦ä¹ çš„å‘å±•å’Œåˆ›æ–°ä½œå‡ºäº†é‡è¦è´¡çŒ®ã€‚ å‚è€ƒé“¾æ¥ ä¸­å›½è®¡ç®—æœºå­¦ä¼šæ¨èå›½é™…å­¦æœ¯ä¼šè®®å’ŒæœŸåˆŠç›®å½•","categories":[{"name":"è®ºæ–‡","slug":"è®ºæ–‡","permalink":"http://yoursite.com/categories/è®ºæ–‡/"}],"tags":[{"name":"ä¼šè®®åˆ—è¡¨","slug":"ä¼šè®®åˆ—è¡¨","permalink":"http://yoursite.com/tags/ä¼šè®®åˆ—è¡¨/"}]},{"title":"pythonè¯»å†™csvæ–‡ä»¶","slug":"pythonè¯»å†™csvæ–‡ä»¶","date":"2019-04-19T10:32:22.000Z","updated":"2019-07-21T15:22:55.000Z","comments":true,"path":"2019/04/19/pythonè¯»å†™csvæ–‡ä»¶/","link":"","permalink":"http://yoursite.com/2019/04/19/pythonè¯»å†™csvæ–‡ä»¶/","excerpt":"ä»‹ç»csvæ–‡ä»¶çš„è¯»å†™ã€‚","text":"ä»‹ç»csvæ–‡ä»¶çš„è¯»å†™ã€‚ csvæ¨¡å—csv.writer(csvfile)12345678910import csv row = [&apos;Symbol&apos;,&apos;Price&apos;,&apos;Date&apos;,&apos;Time&apos;,&apos;Change&apos;,&apos;Volume&apos;]rows = [(&apos;AA&apos;, 39.48, &apos;6/11/2007&apos;, &apos;9:36am&apos;, -0.18, 181800), (&apos;AIG&apos;, 71.38, &apos;6/11/2007&apos;, &apos;9:36am&apos;, -0.15, 195500), (&apos;AXP&apos;, 62.58, &apos;6/11/2007&apos;, &apos;9:36am&apos;, -0.46, 935000), ]with open(&apos;name.csv&apos;,&apos;w&apos;) as csvfile: writer = csv.writer(csvfile,delimiter = &apos;\\t&apos;,lineterminator = &apos;\\n&apos;) #delimiterå’Œlineterminatoråˆ†åˆ«æ˜¯åˆ†éš”ç¬¦ï¼Œè¡Œç»“æŸç¬¦ writer.writerow(row) #å†™å…¥å•è¡Œ writer.writerows(rows) #å†™å…¥å¤šè¡Œ csv.reader(csvfile)è¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œè¿”å›å¯¹è±¡readeræ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œä¸èƒ½ç›´æ¥ç”¨ä¸‹æ ‡è®¿é—®ã€‚å¯ä»¥ç”¨forå¾ªç¯å’Œnext()å‡½æ•°è®¿é—®ã€‚ 12345with open(&apos;name.csv&apos;,&apos;r&apos;) as csvfile: reader = csv.reader(csvfile,delimiter = &apos;\\t&apos;) #è¿­ä»£å™¨ rows = [row for row in reader] #ç”¨forå¾ªç¯è®¿é—®ï¼šfor row in rows: print(row) è¾“å‡ºç»“æœä¸ºï¼š å¦‚æœè¦è¯»å–csvæ–‡ä»¶çš„æŸåˆ—ï¼Œå¯ä»¥çœ‹ä¸‹é¢çš„ä¾‹å­ 1234with open(&apos;name.csv&apos;,&apos;r&apos;) as csvfile: reader = csv.reader(csvfile,delimiter = &apos;\\t&apos;) #è¿­ä»£å™¨ column = [row[2] for row in reader] #ç”¨forå¾ªç¯è®¿é—®ï¼šprint(column) è¾“å‡ºç»“æœä¸ºï¼š csv.DictReader(csvfile)ä¸csv.reader()å‡½æ•°ç›¸åŒï¼Œæ¥æ”¶ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨ã€‚ä¸åŒä¹‹å¤„æ˜¯ï¼Œè¿”å›çš„æ¯ä¸ªå•å…ƒæ ¼æ”¾åœ¨å­—å…¸çš„å€¼ä¸­ï¼Œå­—å…¸çš„é”®å°±æ˜¯è¿™ä¸ªå•å…ƒæ ¼çš„åˆ—å¤´ã€‚ 12345with open(&apos;./name.csv&apos;,&apos;r&apos;) as f: reader = csv.DictReader(f,delimiter = &apos;\\t&apos;) rows = [row for row in reader]for row in rows: print(rows) è¾“å‡ºç»“æœä¸ºï¼š å¦‚æœè¦è¯»å–csvæ–‡ä»¶çš„æŸåˆ—ï¼Œå¯ä»¥çœ‹ä¸‹é¢çš„ä¾‹å­: 1234with open(&apos;./name.csv&apos;,&apos;r&apos;) as f: reader = csv.DictReader(f,delimiter = &apos;\\t&apos;) column = [row[&apos;Time&apos;] for row in reader]print(column) è¾“å‡ºç»“æœä¸ºï¼š csv.DictWriter(csvfile)pandasè¯»å†™csvä¹Ÿå¯ä»¥ç›´æ¥ç”¨pandasçš„å‡½æ•°read_csv()æ¥è¯»å–csvæ–‡ä»¶çš„åˆ—ã€‚ 1234import pandas as pdf = pd.read_csv(&apos;name.csv&apos;,delimiter = &apos;\\t&apos;)time = f.Timeprint(time) è¾“å‡ºç»“æœä¸ºï¼š å‚è€ƒé“¾æ¥ pythonå®˜æ–¹æ–‡æ¡£-csvæ¨¡å— è¯»å†™csvæ•°æ® ä½¿ç”¨pythonè·å–csvæ–‡æœ¬çš„æŸè¡Œæˆ–æŸåˆ—æ•°æ®","categories":[{"name":"python","slug":"python","permalink":"http://yoursite.com/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"http://yoursite.com/tags/python/"},{"name":"csv","slug":"csv","permalink":"http://yoursite.com/tags/csv/"},{"name":"panda","slug":"panda","permalink":"http://yoursite.com/tags/panda/"}]},{"title":"torch.cuda.is_available()è¿”å›False,ä½†nvidia-smiæ­£å¸¸","slug":"torch-cuda-is-available-è¿”å›False-ä½†nvidia-smiæ­£å¸¸","date":"2019-04-16T09:04:44.000Z","updated":"2019-07-22T01:27:54.000Z","comments":true,"path":"2019/04/16/torch-cuda-is-available-è¿”å›False-ä½†nvidia-smiæ­£å¸¸/","link":"","permalink":"http://yoursite.com/2019/04/16/torch-cuda-is-available-è¿”å›False-ä½†nvidia-smiæ­£å¸¸/","excerpt":"torch.cuda.is_available()è¿”å›False,ä½†nvidia-smiå¯ä»¥æ­£å¸¸è¿è¡Œã€‚","text":"torch.cuda.is_available()è¿”å›False,ä½†nvidia-smiå¯ä»¥æ­£å¸¸è¿è¡Œã€‚ é—®é¢˜æè¿°åœ¨pytorchç”¨GPUæ¥åŠ é€Ÿè®¡ç®—æ—¶å‘ç°ã€‚torch.cuda.is_available()è¿”å›False,ä½†nvidia-smiå¯ä»¥æ­£å¸¸è¿è¡Œã€‚ 123&gt;&gt;&gt; import torch&gt;&gt;&gt; torch.cuda.is_available()False æ­¤æ—¶ï¼Œnvidia-smiå¯ä»¥æ­£å¸¸è¿è¡Œã€‚ å¯èƒ½åŸå› åœ¨nvidia-smiçš„è¿è¡Œç»“æœä¸­å¯ä»¥çœ‹åˆ°ï¼Œdriver versionæ˜¯390.xxã€‚å¯èƒ½æ˜¯driver versionç‰ˆæœ¬å¤ªä½ï¼Œé€ æˆäº†è¿™ä¸ªé—®é¢˜ï¼Œå®é™…ä¸Šä¹Ÿæ˜¯å¦‚æ­¤ã€‚driver versionçš„å¸¸è§ç‰ˆæœ¬æ˜¯384.xx,390.xx,396.xxã€‚æ¥ä¸‹æ¥ï¼ŒæŠŠdriver versionå‡çº§åˆ°396.xxçœ‹èƒ½ä¸èƒ½è§£å†³é—®é¢˜ã€‚ å‡çº§nvidia driver version å¸è½½æ—§ç‰ˆæœ¬çš„NVIDIA driver 1sudo apt-get remove --purge nvidia-\\* æ·»åŠ NVIDIAçš„ppaæº. 1sudo add-apt-repository ppa:graphics-drivers/ppa å®‰è£…æ–°ç‰ˆæœ¬çš„NVIDIA driver 1sudo apt-get update &amp;&amp; sudo apt-get install nvidia-driver-396 æ­¤æ—¶ï¼Œè¿è¡Œnvidia-smiï¼Œä¼šæŠ¥ä»¥ä¸‹é”™è¯¯ã€‚ 1Failed to initialize NVML: Driver/library version mismatch è¿™æ˜¯æ›´æ–°NVIDIA driverç‰ˆæœ¬åçš„å¸¸è§é—®é¢˜ã€‚è¿™ä¸ªé—®é¢˜å‡ºç°çš„åŸå› æ˜¯kernel modçš„NVIDIA driverç‰ˆæœ¬æ²¡æœ‰æ›´æ–°ã€‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹nvidia kernel modçš„versionã€‚ 1cat /proc/driver/nvidia/version å¯ä»¥çœ‹åˆ°å·²ç»åŠ è½½çš„nvidia kernel modçš„ç‰ˆæœ¬æ˜¯è¿˜æ˜¯æ—§ç‰ˆæœ¬390.xxã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé‡å¯æœåŠ¡å™¨å°±èƒ½è§£å†³é—®é¢˜ã€‚å¦‚æœç”±äºæŸäº›åŸå› ä¸èƒ½é‡å¯ï¼Œå¯ä»¥é‡æ–°åŠ è½½kernel modã€‚æ€è·¯æ˜¯å…ˆunload kernel modï¼Œå†reload kernel mod. è¯¦è§è§£å†³Driver/library version mismatchnvidia-smiå¯ä»¥æ­£å¸¸è¿è¡Œåï¼Œé—®é¢˜å°±è§£å†³äº†ã€‚ 123&gt;&gt;&gt; import torch&gt;&gt;&gt; torch.cuda.is_available()True å‚è€ƒé“¾æ¥ Torch.cuda.is_available() returns False, nvidia-smi is working How can I update the NVIDIA drivers to version 390.77?","categories":[{"name":"pytorch","slug":"pytorch","permalink":"http://yoursite.com/categories/pytorch/"}],"tags":[{"name":"nvidia-smi","slug":"nvidia-smi","permalink":"http://yoursite.com/tags/nvidia-smi/"},{"name":"GPU","slug":"GPU","permalink":"http://yoursite.com/tags/GPU/"},{"name":"cuda","slug":"cuda","permalink":"http://yoursite.com/tags/cuda/"}]},{"title":"nvidia-smiè¿”å›é”™è¯¯ä¿¡æ¯â€˜Failed to initialize NVML: Driver/library version mismatchâ€™","slug":"nvidia-smiè¿”å›é”™è¯¯ä¿¡æ¯â€˜Failed-to-initialize-NVML-Driver-library-version-mismatchâ€™","date":"2019-03-29T11:47:03.000Z","updated":"2019-07-21T15:23:36.000Z","comments":true,"path":"2019/03/29/nvidia-smiè¿”å›é”™è¯¯ä¿¡æ¯â€˜Failed-to-initialize-NVML-Driver-library-version-mismatchâ€™/","link":"","permalink":"http://yoursite.com/2019/03/29/nvidia-smiè¿”å›é”™è¯¯ä¿¡æ¯â€˜Failed-to-initialize-NVML-Driver-library-version-mismatchâ€™/","excerpt":"Ubuntuè¿è¡Œå‘½ä»¤nvidia-smiå‡ºé”™ã€‚","text":"Ubuntuè¿è¡Œå‘½ä»¤nvidia-smiå‡ºé”™ã€‚ é—®é¢˜æè¿°åœ¨Ubuntu18.04çš„å‘½ä»¤è¡Œä¸­è¿è¡Œå‘½ä»¤nvidia-smiï¼Œè¿”å›é”™è¯¯ä¿¡æ¯ 1Failed to initialize NVML: Driver/library version mismatch æ–¹æ³•1ï¼šé‡å¯è§£å†³å¤§éƒ¨åˆ†é—®é¢˜åšå®¢è§£å†³Driver/library version mismatchè®²è¿°çš„å¾ˆæ¸…æ¥šï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚æˆ–è€…å‚è€ƒå¤§å‹äº¤å‹ç½‘ç«™stack overflowçš„é—®é¢˜NVIDIA NVML Driver/library version mismatch æ–¹æ³•2ï¼šé‡è£…é©±åŠ¨çœ‹è¿”å›çš„é”™è¯¯ä¿¡æ¯ï¼Œè¿™ä¸ªé—®é¢˜å‡ºç°çš„åŸå› æ˜¯NVIDIA Driverçš„ç‰ˆæœ¬ä¸åŒ¹é…ã€‚å¦‚æœé‡å¯ä¸èƒ½è§£å†³é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å¸è½½é‡è£…NVIDIA driverã€‚ æŸ¥çœ‹é©±åŠ¨ç¨‹åºç‰ˆæœ¬ dpkg -l | grep nvidia å¯ä»¥çœ‹åˆ°é©±åŠ¨ç‰ˆæœ¬æ˜¯390.116 cat /proc/driver/nvidia/version è¿™é‡ŒNVRMçš„ç‰ˆæœ¬æ˜¯390.87ã€‚é”™è¯¯ä¿¡æ¯å°±æ˜¯è¿™ä¸¤ä¸ªç‰ˆæœ¬ä¸åŒ¹é…é€ æˆçš„ã€‚æ¥ä¸‹æ¥å…ˆå¸è½½NVIDIA driverï¼Œå†é‡æ–°å®‰è£…ã€‚ å¸è½½æ—§ç‰ˆæœ¬çš„NVIDIA driver 1sudo apt-get remove --purge nvidia-\\* æ·»åŠ NVIDIAçš„ppaæº 1sudo add-apt-repository ppa:graphics-drivers/ppa é‡æ–°å®‰è£…NVIDIAçš„é©±åŠ¨ 1sudo apt-get update &amp;&amp; sudo apt-get install nvidia-390 ç”¨ä½ è‡ªå·±çš„ç‰ˆæœ¬å·æ›¿æ¢390ã€‚ è¿™æ—¶å†ç”¨cat /proc/driver/nvidia/versionæŸ¥çœ‹NVIDIA driverçš„é©±åŠ¨ã€‚ å¯ä»¥çœ‹åˆ°NVRMçš„ç‰ˆæœ¬æ˜¯390.116ï¼Œè¿™æ—¶ç‰ˆæœ¬å°±åŒ¹é…äº†ã€‚å†æ¬¡æ‰§è¡Œnvidia-smi,ç»ˆäºçœ‹åˆ° åœ¨nvidia driverå„ç‰ˆæœ¬æ€»è§ˆå¯ä»¥çœ‹åˆ°NVIDIA driverçš„å„ä¸ªç‰ˆæœ¬ã€‚ é¢å¤–çš„ï¼šupdate ä¸ upgradeè®°å½•ä¸‹sudo apt-get updateä¸sudo apt-get upgradeçš„åŒºåˆ«ã€‚åœ¨windowsç³»ç»Ÿä¸­å®‰è£…è½¯ä»¶ï¼Œåªéœ€è¦æœ‰exeæ–‡ä»¶ï¼ŒåŒå‡»å³å¯å®‰è£…äº†ã€‚Linuxç³»ç»Ÿä¸­åˆ™ä¸åŒï¼ŒLinuxä¼šç»´æŠ¤ä¸€ä¸ªè‡ªå·±çš„è½¯ä»¶ä»“åº“ï¼Œå‡ ä¹æ‰€æœ‰è½¯ä»¶éƒ½åœ¨è¿™ä¸ªä»“åº“é‡Œï¼Œè€Œä¸”é‡Œé¢çš„è½¯ä»¶å®Œå…¨å®‰å…¨ï¼Œç»å¯¹å¯ä»¥å®‰è£…ã€‚æˆ‘ä»¬è‡ªå·±çš„UbuntuæœåŠ¡å™¨ä¸Šï¼Œç»´æŠ¤ä¸€ä¸ªè½¯ä»¶æºåˆ—è¡¨æ–‡ä»¶/etc/apt/sources.list,é‡Œé¢éƒ½æ˜¯ä¸€äº›ç½‘å€ä¿¡æ¯ï¼Œæ¯ä¸ªç½‘å€å°±æ˜¯ä¸€ä¸ªè½¯ä»¶æºï¼Œè¿™ä¸ªåœ°å€æŒ‡å‘çš„æ•°æ®æ ‡è¯†ç€æœ‰å“ªäº›è½¯ä»¶å¯ä»¥å®‰è£…ä½¿ç”¨ã€‚ æŸ¥çœ‹æºåˆ—è¡¨ï¼š 1sudo vim /etc/apt/sources.list æ›´æ–°è½¯ä»¶åˆ—è¡¨ 1sudo apt-get update è¿™ä¸ªå‘½ä»¤å¯¹è®¿é—®æºåˆ—è¡¨é‡Œçš„æ¯ä¸ªç½‘å€ï¼Œè¯»å–è½¯ä»¶åˆ—è¡¨ï¼Œä¿å­˜åˆ°æœ¬åœ°ç”µè„‘ã€‚ æ›´æ–°è½¯ä»¶ 1sudo apt-get upgrade è¿™ä¸ªå‘½ä»¤ä¼šæŠŠæœ¬åœ°å·²å®‰è£…çš„è½¯ä»¶ï¼Œä¸è½¯ä»¶åˆ—è¡¨é‡Œå¯¹åº”è½¯ä»¶åšå¯¹æ¯”ï¼Œå¦‚æœæœ‰å¯æ›´æ–°ç‰ˆæœ¬å°±æ›´æ–°è½¯ä»¶ã€‚æ€»çš„æ¥è¯´ï¼Œsudo apt-get updateæ˜¯æ›´æ–°è½¯ä»¶åˆ—è¡¨ï¼Œsudo apt-get upgradeæ˜¯æ›´æ–°è½¯ä»¶ã€‚ å‚è€ƒé“¾æ¥ è§£å†³Driver/library version mismatch Ubuntué…ç½®GPU+CUDA+CAFFE ubuntuä¸‹å®‰è£…å®‰è£…CUDAã€cuDNNå’Œtensotflow-gpuç‰ˆæœ¬æµç¨‹å’Œé—®é¢˜æ€»ç»“ NVIDIAçš„wiki ï¼ˆåŸï¼‰Ubuntu16ä¸­å®‰è£…nvidiaçš„æ˜¾å¡é©±åŠ¨","categories":[{"name":"æŠ€æœ¯èµ„æ–™","slug":"æŠ€æœ¯èµ„æ–™","permalink":"http://yoursite.com/categories/æŠ€æœ¯èµ„æ–™/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://yoursite.com/tags/Linux/"},{"name":"ubuntu","slug":"ubuntu","permalink":"http://yoursite.com/tags/ubuntu/"},{"name":"nvidia-smi","slug":"nvidia-smi","permalink":"http://yoursite.com/tags/nvidia-smi/"}]},{"title":"æ¡ä»¶éšæœºåœºCRF","slug":"æ¡ä»¶éšæœºåœºCRF","date":"2019-03-23T05:50:20.000Z","updated":"2019-07-22T01:26:35.000Z","comments":true,"path":"2019/03/23/æ¡ä»¶éšæœºåœºCRF/","link":"","permalink":"http://yoursite.com/2019/03/23/æ¡ä»¶éšæœºåœºCRF/","excerpt":"æœ€è¿‘å­¦ä¹ äº†æ¡ä»¶éšæœºåœºCRFï¼Œåšä¸‹æ€»ç»“ã€‚ä¸»è¦å‚è€ƒBiLSTM+CRFæ¨¡å‹ä¸­çš„CRFå±‚ä¸ºä¸»çº¿ï¼Œç»“åˆæèˆªè€å¸ˆçš„ã€Šç»Ÿè®¡æœºå™¨å­¦ä¹ ã€‹ï¼Œè®°å½•è‡ªå·±å¯¹CRFçš„ç†è§£ã€‚","text":"æœ€è¿‘å­¦ä¹ äº†æ¡ä»¶éšæœºåœºCRFï¼Œåšä¸‹æ€»ç»“ã€‚ä¸»è¦å‚è€ƒBiLSTM+CRFæ¨¡å‹ä¸­çš„CRFå±‚ä¸ºä¸»çº¿ï¼Œç»“åˆæèˆªè€å¸ˆçš„ã€Šç»Ÿè®¡æœºå™¨å­¦ä¹ ã€‹ï¼Œè®°å½•è‡ªå·±å¯¹CRFçš„ç†è§£ã€‚ ä»é©¬å°”ç§‘å¤«éšæœºåœºåˆ°çº¿æ€§é“¾æ¡ä»¶éšæœºåœº æ¦‚ç‡å›¾æ¨¡å‹ æ¦‚ç‡å›¾æ¨¡å‹æ˜¯ç”¨å›¾G = (V,E)æ¥è¡¨ç¤ºæ¦‚ç‡åˆ†å¸ƒã€‚è®¾æœ‰è”åˆæ¦‚ç‡åˆ†å¸ƒP(Y)ï¼ŒYæ˜¯ä¸€ç»„éšæœºå˜é‡ã€‚æˆ‘ä»¬å¯ä»¥ç”¨æ— å‘å›¾G = (V,E)æ¥è¡¨ç¤ºè”åˆæ¦‚ç‡åˆ†å¸ƒP(Y),èŠ‚ç‚¹$v \\in V$è¡¨ç¤ºéšæœºå˜é‡$Y_v$ï¼Œè¾¹$e \\in E$è¡¨ç¤ºéšæœºå˜é‡ä¹‹é—´çš„æ¦‚ç‡ä¾èµ–å…³ç³»ã€‚ æ¦‚ç‡æ— å‘å›¾æ¨¡å‹ï¼Œå³é©¬å°”ç§‘å¤«éšæœºåœº è®¾æœ‰è”åˆæ¦‚ç‡åˆ†å¸ƒP(Y),ç”±æ— å‘å›¾G=(V,E)è¡¨ç¤ºã€‚å¦‚æœæ¦‚ç‡åˆ†å¸ƒP(Y)æ»¡è¶³æˆå¯¹ã€å±€éƒ¨ã€å…¨å±€é©¬å°”ç§‘å¤«æ€§ï¼Œé‚£ä¹ˆç§° è¿™ä¸ªè”åˆæ¦‚ç‡åˆ†å¸ƒp(Y)ä¸ºæ¦‚ç‡æ— å‘å›¾æ¨¡å‹ï¼Œæˆ–é©¬å°”ç§‘å¤«éšæœºåœº(Markov random field)ã€‚ æˆå¯¹é©¬å°”ç§‘å¤«æ€§ã€å±€éƒ¨é©¬å°”å¯å¤«æ€§ã€å…¨éƒ¨é©¬å°”ç§‘å¤«æ€§è¦è¡¨è¾¾çš„å°±æ˜¯ï¼šåœ¨æ— å‘å›¾ä¸­ï¼Œæ²¡æœ‰è¾¹è¿æ¥çš„èŠ‚ç‚¹ä¹‹é—´æ²¡æœ‰æ¦‚ç‡ä¾èµ–å…³ç³»ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰è¾¹è¿æ¥çš„èŠ‚ç‚¹ä»£è¡¨çš„éšæœºå˜é‡ä¹‹é—´æ˜¯æ¡ä»¶ç‹¬ç«‹çš„ã€‚ æ¡ä»¶éšæœºåœº è®¾Xå’ŒYæ˜¯éšæœºå˜é‡ï¼ŒP(Y|X)æ˜¯ç»™å®šXçš„æ¡ä»¶ä¸‹Yçš„æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒã€‚è‹¥ç»™å®šXçš„æ¡ä»¶ä¸‹ï¼ŒYæ„æˆä¸€ä¸ªé©¬å°”ç§‘å¤«éšæœºåœºã€‚åˆ™ç§°æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒP(Y|X)ä¸ºæ¡ä»¶éšæœºåœºã€‚ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé©¬å°”ç§‘å¤«éšæœºåœºæ˜¯è”åˆæ¦‚ç‡åˆ†å¸ƒP(Y),è€Œæ¡ä»¶éšæœºåœºæ˜¯æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒP(Y|X)ã€‚è¿™æ˜¯ä¸€ç‚¹ä¸åŒã€‚ çº¿æ€§é“¾æ¡ä»¶éšæœºåœº è®¾$X =(X_1,X_2,â€¦,X_n), Y =(Y_1,Y_2,â€¦,Y_n)$æ˜¯çº¿æ€§é“¾è¡¨ç¤ºçš„éšæœºå˜é‡åºåˆ—ã€‚è‹¥åœ¨ç»™å®šéšæœºå˜é‡åºåˆ—Xçš„æ¡ä»¶ä¸‹ï¼Œéšæœºå˜é‡åºåˆ—Yçš„æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒP(Y|X)æ„æˆæ¡ä»¶éšæœºåœºï¼Œå³æ»¡è¶³é©¬å°”å¯å¤«æ€§ï¼š$$P(Y_i|X,Y_1,Y_2,â€¦,Y_{i-1},Y_{i+1},â€¦,Y_n) = P(Y_i|X,Y_{i-1},Y_{i+1})$$ ã€‚åˆ™ç§°æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒp(Y|X)ä¸ºçº¿æ€§é“¾æ¡ä»¶éšæœºåœºã€‚ çº¿æ€§é“¾æ¡ä»¶éšæœºåœºå’Œéšé©¬å°”å¯å¤«æ¨¡å‹éƒ½æ˜¯åºåˆ—æ¨¡å‹ï¼Œå¯ä»¥ç”¨äºæ ‡æ³¨é—®é¢˜ã€‚è¿™æ—¶ï¼Œæ¡ä»¶æ¦‚ç‡æ¨¡å‹P(Y|X)ä¸­ï¼ŒXæ˜¯è¾“å…¥å˜é‡åºåˆ—ï¼Œè¡¨ç¤ºéœ€è¦æ ‡æ³¨çš„è§‚æµ‹åºåˆ—ï¼›Yæ˜¯è¾“å‡ºå˜é‡ï¼Œè¡¨ç¤ºæ ‡è®°åºåˆ—ï¼Œæˆ–ç§°çŠ¶æ€åºåˆ—ã€‚ BiLSTM+CRFæ¨¡å‹BiLSTM+CRFæ¨¡å‹æ˜¯å‘½åå®ä½“è¯†åˆ«ä»»åŠ¡çš„å¸¸ç”¨æ¨¡å‹ã€‚å‡è®¾æˆ‘ä»¬è®­ç»ƒé›†ä¸­æœ‰ä¸ªç”±äº”ä¸ªè¯ç»„æˆçš„å¥å­$X = (w_0,w_1,w_2,w_3,w_4)$,å¯¹åº”æ ‡ç­¾ä¸º$Y = [B-Personï¼ŒI-Person,O,B-Organization,O]$ã€‚æ•°æ®é›†ä¸­æœ‰äº”ç±»æ ‡ç­¾ï¼š ç±»åˆ« B-Person I-Person B-Organization I-Organization O å«ä¹‰ äººåçš„å¼€å§‹éƒ¨åˆ† äººåçš„ä¸­é—´éƒ¨åˆ† ç»„ç»‡æœºæ„çš„å¼€å§‹éƒ¨åˆ† ç»„ç»‡æœºæ„çš„ä¸­é—´éƒ¨åˆ† éå®ä½“ä¿¡æ¯ å…ˆç®€å•ä»‹ç»ä¸‹BiLSTM+CRFæ¨¡å‹çš„ç»“æ„ã€‚LSTMå±‚çš„è¾“å…¥ä¸€èˆ¬ä¸ºæ¯ä¸ªè¯çš„Word-embeddingï¼Œè¾“å‡ºä¸ºæ¯ä¸ªè¯wordåœ¨ç±»åˆ«ç©ºé—´tag_spaceä¸Šçš„éå½’ä¸€åŒ–æ¦‚ç‡ï¼Œä¹Ÿå°±æ˜¯åœ¨å•è¯å¯¹åº”æ¯ä¸ªç±»åˆ«çš„å¾—åˆ†scoreã€‚è¿™äº›scoreä½œä¸ºCRFå±‚çš„è¾“å…¥ã€‚ CRFçš„æŸå¤±å‡½æ•°æ¡ä»¶éšæœºåœºä¸­æœ‰ä¸¤ä¸ªé‡è¦çš„çŸ©é˜µï¼Œè½¬ç§»æ¦‚ç‡çŸ©é˜µå’ŒçŠ¶æ€æ¦‚ç‡çŸ©é˜µï¼Œåˆ†åˆ«å¯¹åº”è½¬ç§»ç‰¹å¾å’ŒçŠ¶æ€ç‰¹å¾ã€‚ çŠ¶æ€æ¦‚ç‡çŸ©é˜µã€‚å°±æ˜¯LSTMå±‚çš„è¾“å‡ºï¼Œä½œä¸ºCRFå±‚çš„è¾“å…¥ã€‚çŸ©é˜µçš„å½¢çŠ¶ä¸º[N,M],Nä¸ºå¥å­é•¿åº¦ï¼ŒMä¸ºå¯èƒ½çŠ¶æ€æ•°ã€‚ è½¬ç§»æ¦‚ç‡çŸ©é˜µã€‚çŸ©é˜µå½¢çŠ¶ä¸º[M,M]ï¼ŒMä¸ºå¯èƒ½çŠ¶æ€æ•°ã€‚è½¬ç§»çŸ©é˜µæ˜¯æ¨¡å‹å‚æ•°ï¼Œæ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¸æ–­æ›´æ–°ä¼˜åŒ–ã€‚ ç»™å®šè½¬ç§»çŸ©é˜µTï¼Œéšæœºå˜é‡åºåˆ—Xå–å€¼ä¸ºxçš„æ¡ä»¶ä¸‹ï¼Œéšæœºå˜é‡åºåˆ—å–å€¼ä¸ºyçš„ä¼¼ç„¶å‡½æ•°ä¸ºï¼š$$Likelihood(y|x,T) = \\frac{ \\sum_{i=0}^{n} P(x_i|y_i)T(y_i|y_{i-1})}{\\sum_{y^}\\biggl(\\sum_{i=0}^{n}P(x_i|y_i^)T(y_i^|y_{i-1}^)\\biggr)} \\cdots\\cdots\\cdots\\cdots\\cdots (1)$$ä¸Šå¼ä¸­, $P(x_i|y_i)$è¡¨ç¤ºå½“å‰çŠ¶æ€ä¸º$y_i$æ—¶ï¼Œäº§ç”Ÿè§‚æµ‹å€¼$x_i$çš„æ¦‚ç‡ã€‚å¯¹åº”çŠ¶æ€åˆ†æ•°ã€‚ $T(y_i|y_{i-1})$è¡¨ç¤ºä»ä¸Šä¸€ä¸ªçŠ¶æ€$y_{i-1}$è½¬æ¢åˆ°å½“å‰çŠ¶æ€$y_i$çš„æ¦‚ç‡ã€‚å¯¹åº”è½¬ç§»åˆ†æ•°ã€‚æˆ‘ä»¬å¯ä»¥ä»è½¬ç§»çŸ©é˜µä¸­è¯»å‡ºè¿™ä¸ªæ¦‚ç‡ã€‚ åˆ†å­è¡¨ç¤ºäº†å•æ¡è·¯å¾„y=[y_0,y_1,â€¦,y_n]çš„åˆ†æ•°scoreæˆ–æ¦‚ç‡ã€‚ åˆ†æ¯è¡¨ç¤ºäº†æ‰€æœ‰å¯èƒ½è·¯å¾„$y^*$çš„æ€»åˆ†ã€‚æ³¨æ„è®¡ç®—åˆ†æ¯æ—¶ï¼Œæˆ‘ä»¬è¦è®¡ç®—æ‰€æœ‰å¯èƒ½è·¯å¾„å¹¶æ±‚å’Œã€‚è‹¥åºåˆ—é•¿åº¦ä¸ºN,çŠ¶æ€å¯èƒ½æ•°ä¸ºM,åˆ™æ‰€æœ‰å¯èƒ½è·¯å¾„æ•°ä¸º$M^N$,è¿™ä¸ªæ•°é‡æ˜¯æŒ‡æ•°çº§çš„ï¼Œéå¸¸å¤§ã€‚æˆ‘ä»¬çš„ç§˜å¯†æ­¦å™¨æ˜¯å‰å‘åå‘ç®—æ³•æ¥é«˜æ•ˆåœ°è®¡ç®—åˆ†æ¯ã€‚ è¿›ä¸€æ­¥åœ°ï¼Œè´Ÿå¯¹æ•°ä¼¼ç„¶å‡½æ•°ä¸ºï¼š$$NegLogLikelihood(y|x,T) = \\sum_{y^}\\biggl( \\sum_{i=0}^{n} log(P(x_i|y_i^)T(y^_i|y^{i-1}))\\biggr) - \\sum{i=0}^{n}log(P(x_i|y_i)T(y_i|y_{i-1})) \\cdots\\cdots\\cdots\\cdots (2)$$ ä»å¼å­(1)åˆ°å¼å­(2)ï¼Œç›´æ¥å¯¹å¼å­(1)å–è´Ÿå¯¹æ•°æ˜¯å¾—åˆ°å¼å­(2)å¯èƒ½æ¯”è¾ƒä»¤äººè´¹è§£ã€‚éœ€è¦ç•™æ„çš„æ˜¯ï¼šè½¬ç§»æ¦‚ç‡çŸ©é˜µå’ŒçŠ¶æ€æ¦‚ç‡çŸ©é˜µä¸­çš„æ¦‚ç‡éƒ½æ˜¯å¯¹æ•°æ¦‚ç‡ï¼ˆè¿™å¾ˆé‡è¦ï¼‰ï¼Œè¿™æ ·è®¡ç®—è·¯å¾„æ¦‚ç‡æ—¶éƒ½æ˜¯åŠ æ³•ã€‚å¯¹å¯¹æ•°æ¦‚ç‡åŠ ä¸Šexp()è¿ç®—æˆ‘ä»¬èƒ½å¾—åˆ°æ­£å¸¸æ¦‚ç‡ã€‚ã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹ä¹¦ä¸­è¯´ï¼Œçº¿æ€§é“¾æ¡ä»¶éšæœºåœºæ˜¯å¯¹æ•°çº¿æ€§æ¨¡å‹ï¼Œåœ¨å¯¹æ•°ç©ºé—´ä¸­ï¼Œå¯¹æ•°æ¦‚ç‡å¯ä»¥ç›´æ¥ç›¸åŠ ï¼Œå¸¦æ¥å¾ˆå¤§çš„æ–¹ä¾¿ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ï¼šçœŸå®è·¯å¾„çš„åˆ†æ•°å’Œæ‰€æœ‰è·¯å¾„çš„æ€»åˆ†æ˜¯æ€ä¹ˆè®¡ç®—çš„ï¼Ÿ çœŸå®è·¯å¾„åˆ†æ•°æ•°æ®é›†ä¸­æœ‰äº”ç±»æ ‡ç­¾ï¼Œå†å¼•å…¥startå’Œendä½œä¸ºåºåˆ—å¼€å§‹å’Œç»“æŸæ ‡å¿—ã€‚ ç±»åˆ« B-Person I-Person B-Organization I-Organization O start end ç´¢å¼• 0 1 2 3 4 5 6 é•¿åº¦ä¸º5çš„åºåˆ—ï¼Œ$X = (w_0,w_1,w_2,w_3,w_4)$,å¯¹åº”ç±»åˆ«ä¸º$Y = [B-Personï¼ŒI-Person,O,B-Organization,O]$ï¼Œæ ‡æ³¨åºåˆ—ï¼Œä¹Ÿå°±æ˜¯çœŸå®è·¯å¾„ä¸ºä¸ºy = [0,1,4,3,4]ã€‚çœŸå®è·¯å¾„çš„åˆ†æ•°ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼ŒçŠ¶æ€åˆ†æ•°å’Œè½¬ç§»åˆ†æ•°ã€‚çŠ¶æ€çŸ©é˜µå°±æ˜¯LSTMå±‚çš„è¾“å‡ºã€‚è½¬ç§»çŸ©é˜µæ˜¯æ¨¡å‹å‚æ•°ï¼Œä¸º$$[t_{ij}],i,j\\in [0,6];i\\neq 6,j\\neq 5$$å…¶ä¸­$t_ij$è¡¨ç¤ºä»ä¸Šä¸€çŠ¶æ€è½¬æ¢åˆ°å½“å‰çŠ¶æ€çš„æ¦‚ç‡ã€‚è½¬ç§»æ—¶ï¼Œä¸èƒ½è½¬ç§»åˆ°startï¼Œä¸èƒ½ä»endè½¬ç§»ã€‚ åˆ™çœŸå®è·¯å¾„çš„åˆ†æ•° = è½¬ç§»åˆ†æ•° + çŠ¶æ€åˆ†æ•° = $1.5+0.4+0.1+0.2+0.5+t_{51}+t_{01}+t_{14}+t_{42}+t_{24}+t_{46}$ æ‰€æœ‰è·¯å¾„åˆ†æ•°-å‰å‘åå‘ç®—æ³•è®¡ç®—æ‰€æœ‰è·¯å¾„çš„æ€»åˆ†é¢å¯¹çš„éš¾é¢˜æ˜¯è¦ä¸è¦ç©·ä¸¾æ‰€æœ‰è·¯å¾„ã€‚å¯¹äºä¸€ä¸ªé•¿åº¦ä¸ºNçš„åºåˆ—ï¼Œå¯èƒ½çŠ¶æ€æ•°ä¸ºMï¼Œæ‰€æœ‰å¯èƒ½è·¯å¾„æ•°ä¸º$M^N$ï¼Œè¿™æ˜¯ä¸€ä¸ªæŒ‡æ•°çº§çš„è®¡ç®—é‡ã€‚è®¡ç®—æ¯æ¡è·¯å¾„åˆ†æ•°çš„è®¡ç®—é‡æ˜¯$O(N)$,ç›´æ¥ç”¨ç©·ä¸¾æ³•è®¡ç®—æ‰€æœ‰è·¯å¾„æ€»åˆ†çš„è®¡ç®—é‡æ˜¯$O(N\\cdot M^N)$ã€‚è¿™ä¸ªè®¡ç®—é‡æ˜¯æ— æ³•æ¥å—çš„ã€‚ã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹p176å†™ï¼Œå‰å‘ç®—æ³•æ˜¯åŸºäºâ€œè·¯å¾„ç»“æ„â€é€’æ¨è®¡ç®—æ‰€æœ‰è·¯å¾„åˆ†æ•°ã€‚å‰å‘ç®—æ³•é«˜æ•ˆçš„å…³é”®æ˜¯å±€éƒ¨è®¡ç®—å‰å‘æ¦‚ç‡ï¼Œå†é€’æ¨åˆ°å…¨å±€ã€‚å‰å‘ç®—æ³•çš„è®¡ç®—é‡æ˜¯$O(N\\cdot M^2)$ï¼Œå‰å‘ç®—æ³•å‡å°‘è®¡ç®—é‡çš„åŸå› æ˜¯ï¼šæ¯ä¸€æ¬¡é€’æ¨è®¡ç®—ç›´æ¥åˆ©ç”¨äº†å‰ä¸€ä¸ªæ—¶åˆ»çš„è®¡ç®—ç»“æœï¼Œé¿å…äº†é‡å¤è®¡ç®—ã€‚ å¯¹äº$w_0 \\to w_1$çš„å±€éƒ¨è·¯å¾„ã€‚å…ˆè®¡ç®—$w_0$æ‰€æœ‰çŠ¶æ€åˆ°$w_1$å•ä¸ªçŠ¶æ€0çš„åˆ†æ•°ä¹‹å’Œï¼Œå¹¶æ›´æ–°$w_1$çš„çŠ¶æ€0çš„çŠ¶æ€åˆ†æ•°ã€‚æœ‰Mæ¡å±€éƒ¨è·¯å¾„ï¼Œè®¡ç®—é‡æ˜¯$O(M)$ ç”¨åŒæ ·çš„æ–¹æ³•æ›´æ–°$w_1$æ‰€æœ‰çŠ¶æ€çš„çŠ¶æ€åˆ†æ•°ï¼Œè¿™å°±æ˜¯æ‰€æœ‰å±€éƒ¨è·¯å¾„çš„åˆ†æ•°ã€‚è¦è®¡ç®—Mä¸ªçŠ¶æ€ï¼Œè®¡ç®—é‡æ˜¯$O(M^2)$ ä¾æ¬¡é€’æ¨åˆ°å…¨å±€ã€‚åºåˆ—é•¿åº¦ä¸ºN,æ€»çš„è®¡ç®—é‡æ˜¯$O(N \\cdot M^2)$ ä»å›¾çš„è§’åº¦è§£é‡Šäº†å‰å‘ç®—æ³•ï¼Œæˆ‘ä»¬å†ä»æ•°å­¦è®¡ç®—çš„è§’åº¦æ¥çœ‹å‰å‘ç®—æ³•ã€‚ç®€åŒ–ä¸€ä¸‹é—®é¢˜ï¼Œå‡è®¾å¥å­é•¿åº¦ä¸º3ï¼Œ$X = [w_0,w_1,w_2]$,åªæœ‰2ä¸ªç±»åˆ«[1,2]æˆ‘ä»¬å¼•å…¥ä¸¤ä¸ªå˜é‡previouså’Œobsã€‚previouså­˜å‚¨å‰ä¸€æ—¶åˆ»çš„è®¡ç®—ç»“æœï¼Œobså­˜å‚¨å½“å‰çŠ¶æ€åˆ†æ•°ã€‚å¯¹äº$w_0$:$$obs = [x_{01},x_{02}];previous = none$$å¯¹äº$w_0 \\to w_1:$,$$previous = [x_{01},x_{02}],obs = [x_{11},x_{12}]$$å…ˆæ‰©å±•previouså’Œobsï¼š$$previous = \\begin{pmatrix} x_{01}&amp;x_{01}\\x_{02}&amp;x_{02} \\end{pmatrix} \\quad$$$$obs = \\begin{pmatrix} x_{11}&amp;x_{12}\\x_{11}&amp;x_{12} \\end{pmatrix} \\quad$$å°†previouså’Œobså’Œè½¬ç§»çŸ©é˜µç›¸åŠ ï¼š$$score =\\begin{pmatrix} x_{01}&amp;x_{01}\\x_{02}&amp;x_{02} \\end{pmatrix} +\\begin{pmatrix} x_{11}&amp;x_{12}\\x_{11}&amp;x_{12} \\end{pmatrix}+\\begin{pmatrix} t_{11}&amp;t_{12}\\t_{21}&amp;t_{22} \\end{pmatrix}$$$$ = \\begin{pmatrix} x_{01}+x_{11}+t_{11}&amp;x_{01}+x_{12}+t_{12}\\x_{02}+x_{11}+t_{21}&amp;x_{02}+x_{12}+t_{22} \\end{pmatrix}$$scoreåŒåˆ—ç›¸åŠ ï¼Œæ›´æ–°previous:$$previous = [x_{01}+x_{11}+t_{11}+x_{02}+x_{11}+t_{21},x_{01}+x_{12}+t_{12}+x_{02}+x_{12}+t_{22}]$$è¿™æ ·ç¬¬äºŒæ¬¡è¿­ä»£å°±å®Œæˆäº†ã€‚ç”¨å›¾æ¥è¡¨ç¤ºåˆ°ç›®å‰ä¸ºæ­¢çš„è®¡ç®—ï¼š ç”¨åŒæ ·çš„æ–¹æ³•è¿­ä»£é€’æ¨ï¼Œå°±å¯ä»¥å¾—åˆ°æ‰€æœ‰è·¯å¾„çš„åˆ†æ•°ã€‚ è¿™æ ·æˆ‘ä»¬å°±è®¡ç®—å‡ºäº†è´Ÿå¯¹æ•°ä¼¼ç„¶å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯CRFæ¨¡å‹çš„æŸå¤±å‡½æ•°ã€‚æ¡ä»¶éšæœºåœºçš„ç¬¬äºŒä¸ªåŸºæœ¬é—®é¢˜æ˜¯å­¦ä¹ é—®é¢˜ï¼Œç»™å®šè®­ç»ƒé›†ä¼°è®¡æ¡ä»¶éšæœºåœºçš„æ¨¡å‹å‚æ•°ï¼ˆè½¬ç§»çŸ©é˜µï¼‰ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æœ€å°åŒ–å¯¹æ•°ä¼¼ç„¶å‡½æ•°æ¥æ±‚å‚æ•°æ¨¡å‹ã€‚å¯ä»¥ç”¨æ¢¯åº¦ä¸‹é™æ³•æ¥å®ç°ã€‚ ç»´ç‰¹æ¯”ç®—æ³•è§£ç æ¡ä»¶éšæœºåœºçš„ç¬¬ä¸‰ä¸ªåŸºæœ¬é—®é¢˜æ˜¯é¢„æµ‹é—®é¢˜ï¼Œç»™å‡ºæ¡ä»¶éšæœºåœºçš„æ¨¡å‹ å’Œ è¾“å…¥åºåˆ—xï¼Œæ±‚æ¡ä»¶æ¦‚ç‡æœ€å¤§è¾“å‡ºåºåˆ—$y^*$ã€‚ ä¹Ÿå°±æ˜¯æ‰¾å‡ºæ‰€æœ‰è·¯å¾„ä¸­å¾—åˆ†æœ€é«˜çš„é‚£æ¡è·¯å¾„ä½œä¸ºæ ‡æ³¨è·¯å¾„ã€‚ä¸è®¡ç®—æ‰€æœ‰è·¯å¾„æ€»åˆ†ä¸€æ ·ï¼Œæˆ‘ä»¬é¢å¯¹çš„éš¾é¢˜æ˜¯è¦ä¸è¦æ±‚å‡ºæ‰€æœ‰è·¯å¾„çš„åˆ†æ•°ã€‚å½“ç„¶æ˜¯ä¸ç”¨çš„ï¼Œæˆ‘ä»¬ç”¨ç»´ç‰¹æ¯”ç®—æ³•æ¥è§£ç ã€‚é€šä¿¡ä¸“ä¸šçš„åŒå­¦ä¸€å®šçŸ¥é“å¤§åé¼é¼çš„ç»´ç‰¹æ¯”ç®—æ³•ï¼Œå·ç§¯ç çš„è¯‘ç å°±æ˜¯ç”¨çš„ç»´ç‰¹æ¯”ç®—æ³•ã€‚å¯¹äº $w_0 \\to w_1$:å…ˆè®¡ç®—$w_0$åˆ°$w_1$çš„çŠ¶æ€1äº”æ¡è·¯å¾„çš„åˆ†æ•°ï¼Œæ‰¾å‡ºåˆ†æ•°æœ€å¤§çš„ä¸€æ¡ä¿ç•™ä¸‹æ¥ï¼Œå…¶ä»–å…¨éƒ½ä¸¢å¼ƒæ‰ã€‚è®¡ç®—é‡ä¸º$O(M)$ åŒæ ·çš„æ‰¾å‡º$w_1$æ¯ä¸ªçŠ¶æ€åˆ†æ•°æœ€å¤§çš„ä¸€æ¡è·¯å¾„ï¼Œè¦è®¡ç®—$w_1$çš„5ä¸ªçŠ¶æ€ï¼Œè®¡ç®—é‡ä¸º$O(M^2)$ ä¾æ¬¡é€’æ¨åˆ°å…¨å±€ã€‚åºåˆ—é•¿åº¦ä¸ºN,è®¡ç®—é‡ä¸º$O(N \\cdot M^2)$ æ¯”è¾ƒä¸‹å‰å‘ç®—æ³•ä¸ç»´ç‰¹æ¯”ç®—æ³•çš„å¼‚åŒï¼šç›¸åŒçš„åœ°æ–¹åœ¨ä»–ä»¬éƒ½é¢ä¸´è¦ä¸è¦è®¡ç®—æ‰€æœ‰è·¯å¾„åˆ†æ•°çš„é—®é¢˜ï¼Œéƒ½æ˜¯åŸºäºè·¯å¾„ç»“æ„ï¼Œç”¨å±€éƒ¨é€’æ¨åˆ°å…¨å±€ã€‚ä¸åŒçš„åœ°æ–¹åœ¨äºå‰å‘ç®—æ³•åœ¨æ›´æ–°previousçš„å•ä¸ªçŠ¶æ€æ—¶æ˜¯åšæ±‚å’Œsumè¿ç®—ï¼Œè€Œç»´ç‰¹æ¯”ç®—æ³•æ˜¯åšmaxè¿ç®—ï¼Œåªä¿ç•™åˆ†æ•°æœ€å¤§çš„ï¼Œä¸¢å¼ƒæ‰å…¶ä»–è·¯å¾„ã€‚æ­¤å¤–ï¼Œç»´ç‰¹æ¯”ç®—æ³•æ‰¾åˆ°åˆ†æ•°æœ€å¤§çš„è·¯å¾„åï¼Œè¿˜è¦åå‘é€’æ¨ å‚è€ƒé“¾æ¥ CRF Layer on the Top of BiLSTM æœ€é€šä¿—æ˜“æ‡‚çš„BiLSTM-CRFæ¨¡å‹ä¸­çš„CRFå±‚ä»‹ç» å¦‚ä½•ç›´è§‚åœ°ç†è§£æ¡ä»¶éšæœºåœºï¼Œå¹¶é€šè¿‡PyTorchç®€å•åœ°å®ç° æ¡ä»¶éšæœºåœºCRFâ€”åˆ˜å»ºå¹³ ã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹â€”æèˆª","categories":[{"name":"æœºå™¨å­¦ä¹ ","slug":"æœºå™¨å­¦ä¹ ","permalink":"http://yoursite.com/categories/æœºå™¨å­¦ä¹ /"}],"tags":[{"name":"æ¡ä»¶éšæœºåœº","slug":"æ¡ä»¶éšæœºåœº","permalink":"http://yoursite.com/tags/æ¡ä»¶éšæœºåœº/"},{"name":"å‰å‘åå‘ç®—æ³•","slug":"å‰å‘åå‘ç®—æ³•","permalink":"http://yoursite.com/tags/å‰å‘åå‘ç®—æ³•/"},{"name":"ç»´ç‰¹æ¯”ç®—æ³•","slug":"ç»´ç‰¹æ¯”ç®—æ³•","permalink":"http://yoursite.com/tags/ç»´ç‰¹æ¯”ç®—æ³•/"}]},{"title":"pytorchå®ç°åŸºäºLSTMçš„å¾ªç¯ç¥ç»ç½‘ç»œ","slug":"pytorchå®ç°åŸºäºLSTMçš„å¾ªç¯ç¥ç»ç½‘ç»œ","date":"2019-03-20T14:41:10.000Z","updated":"2019-07-22T01:01:59.000Z","comments":true,"path":"2019/03/20/pytorchå®ç°åŸºäºLSTMçš„å¾ªç¯ç¥ç»ç½‘ç»œ/","link":"","permalink":"http://yoursite.com/2019/03/20/pytorchå®ç°åŸºäºLSTMçš„å¾ªç¯ç¥ç»ç½‘ç»œ/","excerpt":"ç”¨pytorchå®ç°åŸºäºLSTMçš„å¾ªç¯ç¥ç»ç½‘ç»œã€‚","text":"ç”¨pytorchå®ç°åŸºäºLSTMçš„å¾ªç¯ç¥ç»ç½‘ç»œã€‚ æ¶‰åŠå‡½æ•°è¯¦è§£class torch.nn.LSTM(args,*kwargs) å‚æ•°è¯´æ˜ï¼š input_size: è¾“å…¥çš„ç‰¹å¾ç»´åº¦ output_size: è¾“å‡ºçš„ç‰¹å¾ç»´åº¦ num_layers: å±‚æ•°ï¼ˆæ³¨æ„ä¸æ—¶åºå±•å¼€åŒºåˆ†ï¼‰ bidirectional: å¦‚æœä¸ºTrueï¼Œä¸ºåŒå‘LSTMã€‚é»˜è®¤ä¸ºFalse LSTMçš„è¾“å…¥ï¼šinput,$(h_0,c_0)$ input(seq_len,batch,input_size): åŒ…å«è¾“å…¥ç‰¹å¾çš„tensor,æ³¨æ„è¾“å…¥æ˜¯tensorã€‚ $h_0$(num_layers $\\cdot$ num_directions,batch,hidden_size): ä¿å­˜åˆå§‹åŒ–éšè—å±‚çŠ¶æ€çš„tensor $c_0$(num_layers $\\cdot$ num_directions,batch,hidden_size): ä¿å­˜åˆå§‹åŒ–ç»†èƒçŠ¶æ€çš„tensor LSTMçš„è¾“å‡ºï¼š output,$(h_n,c_n)$ output(seq_len, batch, hidden_size * num_directions): ä¿å­˜RNNæœ€åä¸€å±‚è¾“å‡ºçš„tensor $h_n$(num_layers * num_directions,batch,hidden_size): ä¿å­˜RNNæœ€åä¸€ä¸ªæ—¶é—´æ­¥éšè—çŠ¶æ€çš„tensor $c_n$(num_layers * num_directions,batch,hidden_size): ä¿å­˜RNNæœ€åä¸€ä¸ªæ—¶é—´æ­¥ç»†èƒçŠ¶æ€çš„tensor 1234567import torch.nn import torchlstm = nn.LSTM(embedding_dim,hidden_dim) #å®ä¾‹åŒ–ä¸€ä¸ªLSTMå•å…ƒï¼Œè¯¥å•å…ƒè¾“å…¥ç»´åº¦embedding_dim,è¾“å‡ºç»´åº¦ä¸ºhidden_diminput = Variable(torch.randn(seq_len,1,embedding_dim)) # è¾“å…¥inputåº”è¯¥æ˜¯ä¸‰ç»´çš„ï¼Œç¬¬ä¸€ç»´åº¦æ˜¯seq-length,ä¹Ÿå°±æ˜¯å¤šä¸ªè¯æ„æˆçš„ä¸€å¥è¯ï¼›ç¬¬äºŒç»´åº¦ä¸º1ï¼Œä¸ç”¨ç®¡ï¼›ç¬¬ä¸‰ä¸ªç»´åº¦æ˜¯ä¸€ä¸ªè¯çš„è¯åµŒå…¥ç»´åº¦ï¼Œå³embedding_dimh0 = Variable(torch.randn(1,1,hidden_dim)) c0 = Variable(torch.randn(1,1,hidden_dim))lstm_out,hidden = lstm(input,(h0,c0)) class torch.nn.Linear()1class torch.nn.Linear(in_features,out_features,bias = True) ä½œç”¨ï¼šå¯¹è¾“å…¥æ•°æ®åšçº¿æ€§å˜æ¢ã€‚$y = Ax+b$ å‚æ•°ï¼š in_featuresï¼šæ¯ä¸ªè¾“å…¥æ ·æœ¬çš„å¤§å° out_features: æ¯ä¸ªè¾“å‡ºæ ·æœ¬çš„å¤§å° bias: é»˜è®¤å€¼ä¸ºTrueã€‚æ˜¯å¦å­¦ä¹ åç½®ã€‚ å½¢çŠ¶ï¼š è¾“å…¥ï¼š (N,in_features) è¾“å‡ºï¼š (N,out_features) å˜é‡ï¼š weights: å¯å­¦ä¹ çš„æƒé‡ï¼Œå½¢çŠ¶ä¸º(in_features,out_features) bias: å¯å­¦ä¹ çš„åç½®ï¼Œå½¢çŠ¶ä¸º(out_features) 1234m = nn.Linear(20,30)input = torch.randn(128,20)output = m(input)print(output) å…ˆçœ‹ä¸ªå°ä¾‹å­ç”¨pytorchå®ç°LSTMï¼Œå…ˆå®ä¾‹åŒ–ä¸€ä¸ªLSTMå•å…ƒï¼Œå†ç»™å‡ºtensorç±»å‹çš„è¾“å…¥æ•°æ®inputsåŠåˆå§‹éšè—çŠ¶æ€hidden = $(h_0,c_0)$ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒLSTMå•å…ƒçš„è¾“å…¥inputså¿…é¡»æ˜¯ä¸‰ç»´çš„ï¼Œç¬¬ä¸€ç»´æ˜¯seq-lengthï¼Œå³ä¸€å¥è¯ï¼Œå…ƒç´ æ˜¯è¯ã€‚ç¬¬äºŒç»´æ˜¯mini-batch,ä»æ¥ä¸ç”¨ï¼Œè®¾ä¸º1å³å¯ã€‚ç¬¬ä¸‰ç»´æ˜¯embedding-size,å³ä¸€ä¸ªè¯å‘é‡ã€‚ 123456import torch import torch.nn as nn lstm = nn.LSTM(4,3) #å®ä¾‹åŒ–ä¸€ä¸ªLSTMå•å…ƒï¼Œå•å…ƒè¾“å…¥ç»´åº¦æ˜¯4ï¼Œè¾“å‡ºç»´åº¦æ˜¯3inputs = [torch.randn(1,5) for _ in range(5)] #äº§ç”Ÿè¾“å…¥inputsã€‚ä¸ºtensoråºåˆ—ã€‚hidden = (torch.randn(1,1,3),torch.randn(1,1,3)) #åˆå§‹åŒ–éšè—çŠ¶æ€ åšå¥½ä¸‰æ­¥å‡†å¤‡ï¼šå®ä¾‹åŒ–ä¸€ä¸ªLSTMå•å…ƒï¼Œå‡†å¤‡å¥½inputsï¼Œåˆå§‹åŒ–éšè—çŠ¶æ€hiddenã€‚æˆ‘ä»¬å°±å¯ä»¥è®¡ç®—LSTMå•å…ƒçš„è¾“å‡ºäº†ã€‚æˆ‘ä»¬æœ‰ä¸¤ç§é€‰æ‹©ï¼Œå°†åºåˆ—ä¸€ä¸ªå…ƒç´ ä¸€ä¸ªå…ƒç´ åœ°é€å…¥LSTMå•å…ƒï¼Œæˆ–æ˜¯å°†æ•´ä¸ªåºåˆ—ä¸€ä¸‹å­å…¨é€å…¥LSTMå•å…ƒã€‚å…ˆçœ‹çœ‹ç¬¬ä¸€ç§ï¼š 123for x in inputs: lstm_out,hidden = lstm(x.view(1,1,-1),hidden) #x.view(1,1,-1)å°†tensoræ•´å½¢ä¸ºä¸‰ç»´ã€‚å‰é¢è¯´è¿‡LSTMå•å…ƒçš„è¾“å…¥å¿…é¡»æ˜¯ä¸‰ç»´çš„ã€‚print(lstm_out,hidden) æ¥ä¸‹æ¥ï¼Œå°†æ•´ä¸ªåºåˆ—é€å…¥LSTMå•å…ƒï¼š 1234inputs = torch.cat(inputs).view(len(inputs),1,-1) #å°†æ•´ä¸ªåºåˆ—è¿æ¥ä¸ºtensorï¼Œå¹¶æ•´å½¢ä¸ºä¸‰ç»´ã€‚hidden = (torch.randn(1,1,3),torch.randn(1,1,3)) #æ¸…æ¥šéšè—çŠ¶æ€lstm_out,hidden = lstm(inputs,hidden)print(lstm_out,hidden) æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š lstm_out ä¸­åŒ…å«äº†åºåˆ—æ‰€æœ‰çš„éšè—çŠ¶æ€ã€‚ hidden ä¸­åŒ…å«äº†æœ€åä¸€ä¸ªæ—¶é—´æ­¥çš„éšè—çŠ¶æ€å’Œç»†èƒçŠ¶æ€ã€‚å¯ä»¥ä½œä¸ºä¸‹ä¸ªæ—¶é—´æ­¥LSTMå•å…ƒçš„è¾“å…¥å‚æ•°ï¼Œç»§ç»­è¾“å…¥åºåˆ—æˆ–åå‘ä¼ æ’­ã€‚ ç”¨lstmåšè¯æ€§æ ‡æ³¨å…ˆå‡†å¤‡è®­ç»ƒæ•°æ®ï¼š 123456789101112131415train_data = [ (&quot;The dog ate the apple&quot;.split(), [&quot;DET&quot;, &quot;NN&quot;, &quot;V&quot;, &quot;DET&quot;, &quot;NN&quot;]), (&quot;Everybody read that book&quot;.split(), [&quot;NN&quot;, &quot;V&quot;, &quot;DET&quot;, &quot;NN&quot;])]# è¯æ±‡è¡¨å­—å…¸word_to_ix = &#123;&#125;for sent,tags in train_data: for word in sent: if word not in word_to_ix: word_to_ix[word] = len(word_to_ix)# æ ‡ç­¾é›†å­—å…¸tag_to_ix = &#123;&quot;DET&quot;: 0, &quot;NN&quot;: 1, &quot;V&quot;: 2&#125;EMBEDDING_DIM = 6HIDDEN_DIM = 6 æ„å»ºLSTMæ¨¡å‹: 123456789101112class LSTMtagger(nn.Module): def __init__(self,embedding_dim,hidden_dim,vocab_size,tagset_size): super(LSTMtagger,self).__init__() self.hidden_dim = hidden_dim self.word_embeddings = nn.Embedding(vocab_size,embedding_dim) #éšæœºåˆå§‹åŒ–è¯å‘é‡è¡¨ï¼Œæ˜¯ç¥ç»ç½‘ç»œçš„å‚æ•° self.lstm = nn.LSTM(embedding_dim,hidden_dim) #å®ä¾‹åŒ–ä¸€ä¸ªLSTMå•å…ƒï¼Œå•å…ƒè¾“å…¥ç»´åº¦æ˜¯embedding_dimï¼Œè¾“å‡ºç»´åº¦æ˜¯hidden_dim self.hidden2tag = torch.Linear(hidden_dim,tagset_size) #çº¿æ€§å±‚ä»éšè—çŠ¶æ€ç©ºé—´æ˜ å°„åˆ°æ ‡ç­¾ç©ºé—´ def forward(self,sentence): embeds = self.word_embeddings(sentence) #æŸ¥è¯¢å¥å­çš„è¯å‘é‡è¡¨ç¤ºã€‚è¾“å…¥åº”è¯¥æ˜¯äºŒç»´tensorã€‚ lstm_out,hidden = self.lstm(embeds.view(len(sentence),1,-1)) tag_space = self.hidden2tag(lstm_out.view(len(sentence),-1)) tag_scores = F.log_softmax(tag_space) è®­ç»ƒæ¨¡å‹ 12345678910111213141516171819202122232425262728293031323334353637model = LSTMtagger(EMBEDDING_DIM,HIDDEN_DIM,len(word_to_ix),len(tag_to_ix))loss_function = nn.NLLLoss()optimizer = optim.SGD(model.parameters(),lr = 0.1)def prepare_sequence(seq,to_ix): idxs = [to_ix[w] for w in seq] return torch.tensor(idxs,dtype = torch.long)# åœ¨è®­ç»ƒæ¨¡å‹ä¹‹å‰ï¼Œçœ‹çœ‹æ¨¡å‹é¢„æµ‹ç»“æœwith torch.no_grad(): inputs = prepare_sequence(train_data[0][0],word_to_ix) tag_scores = model(inputs) print(tag_scores) predict = np.argmax(tag_scores,axis = 1) print(predict)for epoch in range(300): for sentence,tags in train_data: # step 1:pytorchä¼šç´¯ç§¯æ¢¯åº¦ï¼Œè¦æ¸…æ¥šæ‰€æœ‰variableçš„æ¢¯åº¦ã€‚ model.zero_grad() # step 2:å‡†å¤‡å¥½æ•°æ®ï¼Œå˜æˆtensor sentence_in = prepare_sequence(sentence,word_to_ix) targets = prepare_sequence(tags,tag_to_ix) # step 3:å¾—åˆ°è¾“å‡º tag_scores = model(sentence_in) # step4: è®¡ç®—loss loss = loss_function(tag_scores,targets) # step5: è®¡ç®—losså¯¹æ‰€æœ‰variableçš„æ¢¯åº¦ loss.backward() # step6ï¼š å•æ­¥ä¼˜åŒ–ï¼Œæ ¹æ®æ¢¯åº¦æ›´æ–°å‚æ•° optimizer.step()# æ¨¡å‹è®­ç»ƒåï¼Œçœ‹çœ‹é¢„æµ‹ç»“æœwith torch.no_grad(): inputs = prepare_sequence(train_data[0][0],word_to_ix) tag_scores = model(inputs) print(tag_scores) predict = np.argmax(tag_scores,axis = 1) print(predict) è¾“å‡ºç»“æœä¸ºï¼š æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè®­ç»ƒä¹‹åçš„é¢„æµ‹åºåˆ—ä¸º [0,1,2,0,1]ä¹Ÿå°±æ˜¯[â€œDETâ€, â€œNNâ€, â€œVâ€, â€œDETâ€, â€œNNâ€] å‚è€ƒé“¾æ¥ åºåˆ—æ¨¡å‹å’ŒåŸºäºLSTMçš„å¾ªç¯ç¥ç»ç½‘ç»œ Sequence Models and Long-Short Term Memory Networks-å®˜æ–¹ Understanding LSTM Networks The Unreasonable Effectiveness of Recurrent Neural Networks","categories":[{"name":"pytorch","slug":"pytorch","permalink":"http://yoursite.com/categories/pytorch/"}],"tags":[{"name":"pytorch","slug":"pytorch","permalink":"http://yoursite.com/tags/pytorch/"},{"name":"LSTM","slug":"LSTM","permalink":"http://yoursite.com/tags/LSTM/"},{"name":"å¾ªç¯ç¥ç»ç½‘ç»œ","slug":"å¾ªç¯ç¥ç»ç½‘ç»œ","permalink":"http://yoursite.com/tags/å¾ªç¯ç¥ç»ç½‘ç»œ/"}]},{"title":"pytorchå®ç°Word embedding","slug":"pytorchå®ç°Word-embedding","date":"2019-03-20T12:16:21.000Z","updated":"2019-07-07T07:11:01.000Z","comments":true,"path":"2019/03/20/pytorchå®ç°Word-embedding/","link":"","permalink":"http://yoursite.com/2019/03/20/pytorchå®ç°Word-embedding/","excerpt":"word embeddingæ˜¯ç¨ å¯†çš„å®æ•°å‘é‡ã€‚Word embeddingæ˜¯ä¸€ä¸ªè¯çš„è¯­ä¹‰è¡¨ç¤ºï¼Œæœ‰æ•ˆåœ°ç¼–ç äº†è¯çš„è¯­ä¹‰ä¿¡æ¯ã€‚","text":"word embeddingæ˜¯ç¨ å¯†çš„å®æ•°å‘é‡ã€‚Word embeddingæ˜¯ä¸€ä¸ªè¯çš„è¯­ä¹‰è¡¨ç¤ºï¼Œæœ‰æ•ˆåœ°ç¼–ç äº†è¯çš„è¯­ä¹‰ä¿¡æ¯ã€‚ one-hotç¼–ç åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸è¦ä¸è¯æ‰“äº¤é“ã€‚é‚£ä¹ˆåœ¨è®¡ç®—æœºä¸Šï¼Œæˆ‘ä»¬æ€ä¹ˆè¡¨ç¤ºä¸€ä¸ªå•è¯å‘¢ï¼Ÿä¸€ç§æ€è·¯æ˜¯one-hotç¼–ç ã€‚å‡è®¾è¯æ±‡è¡¨ä¸º$V$,è¯æ±‡è¡¨å¤§å°(vocab_size)ä¸º$N_V$ã€‚æˆ‘ä»¬å¯ä»¥ç”¨å‘é‡$N_V$ç»´å‘é‡$[1,0,0â€¦,0,0]$æ¥è¡¨ç¤ºç¬¬ä¸€ä¸ªè¯ã€‚ä»¥æ­¤ç±»æ¨ï¼Œæ¥è¡¨ç¤ºæ‰€æœ‰çš„è¯ã€‚è¿™ç§æ–¹æ³•æœ‰è‡´å‘½çš„å¼±ç‚¹ã€‚é¦–å…ˆæ˜¯å‘é‡ç»´åº¦å¤ªå¤§ï¼Œå¤ªç¨€ç–ï¼Œæ•ˆç‡å¤ªä½ã€‚æ›´è¦å‘½çš„æ˜¯ï¼Œone-hotç¼–ç æŠŠè¯ä¸è¯é—´çœ‹åšå®Œå…¨ç‹¬ç«‹çš„ï¼Œæ²¡æœ‰è¡¨è¾¾å‡ºè¯ä¸è¯ä¹‹é—´çš„è”ç³»å’Œç›¸ä¼¼æ€§ã€‚è€Œè¿™æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æƒ³è¦æ„å»ºä¸€ä¸ªè¯­è¨€æ¨¡å‹ã€‚æœ‰ä»¥ä¸‹ä¸‰ä¸ªå¥å­ æ•°å­¦å®¶å¾…åœ¨å®éªŒå®¤é‡Œã€‚ ç‰©ç†å­¦å®¶å¾…åœ¨å®éªŒå®¤é‡Œã€‚ æ•°å­¦å®¶è§£å†³äº†ä¸€ä¸ªéš¾é¢˜ã€‚ æˆ‘ä»¬åˆçœ‹åˆ°ä¸€ä¸ªæ–°çš„å¥å­ï¼š ç‰©ç†å­¦å®¶è§£å†³äº†ä¸€ä¸ªéš¾é¢˜ã€‚ æˆ‘ä»¬å¸Œæœ›è¯­è¨€æ¨¡å‹å¯ä»¥å­¦ä¹ åˆ°ä»¥ä¸‹ç‰¹ç‚¹ï¼š æ•°å­¦å®¶å’Œç‰©ç†å­¦å®¶åœ¨ä¸€ä¸ªå¥å­ä¸­åŒæ ·çš„ä½ç½®å‡ºç°ã€‚è¿™ä¸¤ä¸ªè¯ä¹‹é—´æœ‰æŸç§è¯­ä¹‰ä¸Šçš„è”ç³» æ•°å­¦å®¶æ›¾ç»å‡ºç°åœ¨æˆ‘ä»¬çœ‹åˆ°çš„è¿™ä¸ªæ–°å¥å­ä¸­ç‰©ç†å­¦å®¶å‡ºç°çš„ä½ç½®ã€‚ è¿™å°±æ˜¯è¯­ä¹‰ç›¸ä¼¼æ€§æƒ³è¡¨è¾¾çš„ã€‚è¯­ä¹‰ç›¸ä¼¼æ€§å¯ä»¥å°†æ²¡è§è¿‡çš„æ•°æ®ä¸å·²ç»è§è¿‡çš„æ•°æ®è”ç³»èµ·æ¥ï¼Œæ¥è§£å†³è¯­è¨€æ•°æ®çš„ç¨€ç–æ€§é—®é¢˜ã€‚è¿™ä¸ªä¾‹å­åŸºäºä¸€ä¸ªåŸºæœ¬çš„è¯­ä¹‰å­¦å‡è®¾ï¼šå‡ºç°åœ¨ç›¸ä¼¼æ–‡æœ¬ä¸­çš„è¯æ±‡åœ¨è¯­ä¹‰ä¸Šæ˜¯ç›¸äº’è”ç³»çš„ã€‚è¿™ç§°ä¸ºdistributional hypothesiså€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨åˆ†ç±»é—®é¢˜ä¸­ï¼Œone-hotç¼–ç å¾ˆé€‚åˆç”¨åœ¨ç±»åˆ«çš„ç¼–ç ä¸Šã€‚ word embeddingæˆ‘ä»¬æ€æ ·ç¼–ç æ¥è¡¨è¾¾è¯æ±‡çš„è¯­ä¹‰ç›¸ä¼¼æ€§å‘¢ï¼Ÿæˆ‘ä»¬è€ƒè™‘è¯æ±‡çš„semantic attributesã€‚ä¾‹å¦‚ï¼Œç‰©ç†å­¦å®¶å’Œæ•°å­¦å®¶å­¦å¯èƒ½[å¤´å‘ä¸å¤šï¼Œçˆ±å–å’–å•¡ï¼Œä¼šçœ‹è®ºæ–‡ï¼Œä¼šè¯´è‹±è¯­]ã€‚æˆ‘ä»¬å¯ä»¥ç”¨è¿™å››ä¸ªå±æ€§æ¥ç¼–ç ç‰©ç†å­¦å®¶å’Œæ•°å­¦å®¶ã€‚$$q_ç‰© = [0.9,0.8,0.98,0.8]$$$$q_æ•° = [0.91,0.89,0.9,0.85]$$æˆ‘ä»¬å¯ä»¥è¡¡é‡è¿™ä¸¤ä¸ªè¯ä¹‹é—´çš„è¯­ä¹‰ç›¸ä¼¼åº¦ï¼š$$similarity(q_ç‰©,q_æ•°) = \\frac{q_ç‰©\\cdot q_æ•°}{|q_ç‰©| \\cdot |q_æ•°|}=cos(\\phi) å…¶ä¸­\\phiæ˜¯ä¸¤ä¸ªå‘é‡ä¹‹é—´çš„å¤¹è§’ã€‚$$ä½†æˆ‘ä»¬å¦‚ä½•é€‰æ‹©å±æ€§ç‰¹å¾ï¼Œå¹¶å†³å®šæ¯ä¸ªå±æ€§çš„å€¼å‘¢ï¼Ÿæ·±åº¦å­¦ä¹ çš„æ ¸å¿ƒæ€æƒ³æ˜¯ç¥ç»ç½‘ç»œå­¦ä¹ ç‰¹å¾è¡¨ç¤ºï¼Œè€Œä¸ç”¨äººä¸ºæŒ‡å®šç‰¹å¾ã€‚æˆ‘ä»¬å¹²è„†å°†Word embeddingä½œä¸ºç¥ç»ç½‘ç»œçš„å‚æ•°ï¼Œè®©ç¥ç»ç½‘ç»œåœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­å­¦ä¹ Word embeddingã€‚ç¥ç»ç½‘ç»œå­¦åˆ°çš„Word embeddingæ˜¯æ½œåœ¨è¯­ä¹‰å±æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¸¤ä¸ªè¯åœ¨æŸä¸ªç»´åº¦ä¸Šéƒ½æœ‰å¤§çš„å€¼ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“è¿™ä¸ªç»´åº¦ä»£è¡¨äº†ä»€ä¹ˆå±æ€§ï¼Œè¿™ä¸èƒ½äººä¸ºè§£é‡Šã€‚è¿™å°±æ˜¯æ½œåœ¨è¯­ä¹‰å±æ€§çš„å«ä¹‰ã€‚æ€»çš„æ¥è¯´ï¼ŒWord embeddingæ˜¯ä¸€ä¸ªè¯çš„è¯­ä¹‰è¡¨ç¤ºï¼Œæœ‰æ•ˆåœ°ç¼–ç äº†è¯çš„è¯­ä¹‰ä¿¡æ¯ã€‚ PyTorchå®ç°word embeddingä»£ç å¦‚ä¸‹ï¼š 12345678import torch import torch.nn as nnfrom torch.autograd import Variable# è¯æ±‡è¡¨å­—å…¸word_to_ix = &#123;&apos;The&apos;: 0, &apos;dog&apos;: 1, &apos;ate&apos;: 2, &apos;the&apos;: 3, &apos;apple&apos;: 4, &apos;Everybody&apos;: 5, &apos;read&apos;: 6, &apos;that&apos;: 7, &apos;book&apos;: 8&#125;vocab_size = len(word_to_ix) embedding_dim = 15word_embeddings = nn.Embedding(vocab_size,embedding_dim) nn.Embedding()éšæœºåˆå§‹åŒ–äº†ä¸€ä¸ªå½¢çŠ¶ä¸º[vocab_size,embedding_dim]çš„è¯å‘é‡çŸ©é˜µï¼Œæ˜¯ç¥ç»ç½‘ç»œçš„å‚æ•°ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æŸ¥è¯¢â€dogâ€è¿™ä¸ªè¯çš„å‘é‡è¡¨ç¤ºã€‚ 1234dog_idx = torch.LongTensor([word_to_ix[&apos;dog&apos;]]) #æ³¨æ„è¾“å…¥åº”è¯¥æ˜¯ä¸€ç»´æ•°ç»„ã€‚dog_idx = Variable(dog_idx)dog_embed = word_embeddings(dog_idx) #æ³¨æ„ä¸æ˜¯ç´¢å¼•print(dog_embed) ä¸Šè¿°ä»£ç ä¸­ï¼Œè¦è®¿é—®dogçš„è¯å‘é‡ï¼Œè¦å¾—åˆ°ä¸€ä¸ªVariableã€‚word_embeddingsçš„è¾“å…¥åº”è¯¥æ˜¯ä¸€ä¸ªä¸€ç»´tensorã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æŸ¥è¯¢ä¸€å¥è¯çš„å‘é‡è¡¨ç¤ºã€‚ 123456sent = &apos;The dog ate the apple&apos;.split()sent_idxs = [word_to_ix[w] for w in sent]sent_idxs = torch.LongTensor(sent_idxs)sent_idxs = Variable(sent_idxs)sent_embeds = embeds(sent_idxs) print(sent_embeds) pytorchåŠ è½½é¢„è®­ç»ƒè¯å‘é‡ä¹‹å‰çš„æ–¹æ³•ä¸­ï¼Œè¯å‘é‡æ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œä½œä¸ºæ¨¡å‹å‚æ•°åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¸æ–­ä¼˜åŒ–ã€‚é€šå¸¸æˆ‘ä»¬è¦ç”¨åˆ°é¢„è®­ç»ƒçš„è¯å‘é‡ï¼Œè¿™æ ·å¯ä»¥èŠ‚çœè®­ç»ƒæ—¶é—´ï¼Œå¹¶å¯èƒ½å–å¾—æ›´å¥½çš„è®­ç»ƒç»“æœã€‚ä¸‹é¢ä»‹ç»ä¸¤ç§åŠ è½½é¢„è®­ç»ƒè¯å‘é‡çš„æ–¹å¼ã€‚æ–¹å¼ä¸€ï¼š 1234import torch word_embeddings = torch.nn.Embedding(vocab_size,embedding_dim) #åˆ›å»ºä¸€ä¸ªè¯å‘é‡çŸ©é˜µpretrain_embedding = np.array(np.load(np_path),dtype = &apos;float32&apos;) #np_pathæ˜¯ä¸€ä¸ªå­˜å‚¨é¢„è®­ç»ƒè¯å‘é‡çš„æ–‡ä»¶è·¯å¾„word_embeddings.weight.data.copy_(troch.from_numpy(pretrain_embedding)) #æ€è·¯æ˜¯å°†np.ndarrayå½¢å¼çš„è¯å‘é‡è½¬æ¢ä¸ºpytorchçš„tensorï¼Œå†å¤åˆ¶åˆ°åŸæ¥åˆ›å»ºçš„è¯å‘é‡çŸ©é˜µä¸­ æ–¹å¼äºŒï¼š 12word_embeddings = torch.nn.Embedding(vocab_size,embedding_dim) #åˆ›å»ºä¸€ä¸ªè¯å‘é‡çŸ©é˜µword_embeddings.weight = nn.Parameter(torch.FloatTensor(pretrain_embedding)) æ¶‰åŠå‡½æ•°è¯¦è§£numpy()ä¸from_numpy()1torch.from_numpy(ndarray) $\\to$ tensor ä½œç”¨ï¼šnumpyæ¡¥ï¼Œå°†numpy.ndarrayè½¬æ¢ä¸ºpytorchçš„tensor.è¿”å›çš„å¼ é‡ä¸numpy.ndarrayå…±äº«åŒä¸€å†…å­˜ç©ºé—´ï¼Œä¿®æ”¹ä¸€ä¸ªå¦ä¸€ä¸ªä¹Ÿä¼šè¢«ä¿®æ”¹ã€‚ 1tensor.numpy() ä½œç”¨ï¼šnumpyæ¡¥ï¼Œå°†pytorchçš„tensorè½¬æ¢ä¸ºnumpy.ndarray.äºŒè€…å…±äº«åŒä¸€å†…å­˜ç©ºé—´ï¼Œä¿®æ”¹ä¸€ä¸ªå¦ä¸€ä¸ªä¹Ÿä¼šè¢«ä¿®æ”¹ã€‚ ä¸¾ä¸ªä¾‹å­ï¼š 123a = np.arange(5)b = torch.from_numpy(a)c = b.numpy() tensor.copy_(src) ä½œç”¨ï¼šå°†srcä¸­çš„å…ƒç´ å¤åˆ¶åˆ°tensorå¹¶è¿”å›ã€‚ä¸¤ä¸ªtensoråº”è¯¥æœ‰ç›¸åŒæ•°ç›®çš„å…ƒç´ å’Œå½¢çŠ¶ï¼Œå¯ä»¥æ˜¯ä¸åŒæ•°æ®ç±»å‹æˆ–å­˜å‚¨åœ¨ä¸åŒè®¾å¤‡ä¸Šã€‚ ä¸¾ä¸ªä¾‹å­ï¼š 123a = torch.randn(1,5)b = torch.randn(1,5)b.copy_(a) å‚è€ƒé“¾æ¥ Word Embeddings: Encoding Lexical Semantics PyTorchå¿«é€Ÿå…¥é—¨æ•™ç¨‹ä¸ƒï¼ˆRNNåšè‡ªç„¶è¯­è¨€å¤„ç†ï¼‰","categories":[{"name":"pytorch","slug":"pytorch","permalink":"http://yoursite.com/categories/pytorch/"}],"tags":[{"name":"pytorch","slug":"pytorch","permalink":"http://yoursite.com/tags/pytorch/"},{"name":"word embedding","slug":"word-embedding","permalink":"http://yoursite.com/tags/word-embedding/"}]},{"title":"sublimeæ’ä»¶","slug":"sublimeæ’ä»¶","date":"2019-03-11T11:41:12.000Z","updated":"2019-03-11T13:04:43.000Z","comments":true,"path":"2019/03/11/sublimeæ’ä»¶/","link":"","permalink":"http://yoursite.com/2019/03/11/sublimeæ’ä»¶/","excerpt":"è®°å½•sublimeçš„ä¸€äº›æ’ä»¶ã€‚","text":"è®°å½•sublimeçš„ä¸€äº›æ’ä»¶ã€‚ OmniMarkupPreviewerä½œç”¨ï¼šæ’ä»¶OmniMarkupPrevieweræ”¯æŒå°†markdownè¯­è¨€æ¸²æŸ“ä¸ºhtmlå¹¶ä¸”åœ¨æµè§ˆå™¨ä¸Šå®æ—¶é¢„è§ˆï¼Œä¹Ÿå°±æ˜¯å°†markdownå†…å®¹å®æ—¶æ˜¾ç¤ºä¸ºç½‘é¡µï¼Œæ•ˆæœä¹‹å¥½ä»¤äººæƒŠå¹ã€‚ å®‰è£…å¯ä»¥ä½¿ç”¨Package Controlçš„Insatll Packageæ¥å®‰è£…ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä»OmniMarkupPreviewerçš„githubä¸»é¡µä¸‹è½½å‹ç¼©åŒ…ï¼Œè§£å‹åˆ°ç›®å½•\\Sublime Text 3\\Packages\\ä¸‹ã€‚ å¿«æ·é”®Ctrl + shift + pæ‰“å¼€Package Control è¾“å…¥installé€‰æ‹©Package Control: Install Package ä»åˆ—è¡¨ä¸­é€‰æ‹©OmniMarkupPreviewerå®‰è£…ã€‚ ä½¿ç”¨æ–¹æ³•ï¼šå¯¹äºwindowå’ŒLinuxï¼š Ctrl+Alt+O åœ¨æµè§ˆå™¨ä¸­é¢„è§ˆ Ctrl+Alt+X è¾“å‡ºä¸ºhtmlæ–‡ä»¶ Ctrl+Alt+C å¤åˆ¶ä¸ºHTMLæ–‡ä»¶ æ’ä»¶é…ç½®ä¿®æ”¹æ’ä»¶çš„é…ç½®ï¼Œç‚¹å‡»èœå•æ çš„Preferences - Packages Settings - OmniMarkdownPreviwer - Setting-Userã€‚ 12345678910111213141516171819202122&#123; &quot;server_host&quot;: &quot;127.0.0.1&quot;, //é»˜è®¤ä¸ºlocalhost,ä¿®æ”¹ä¸ºä½ ç”µè„‘çš„ipï¼Œå¯ä»¥å®ç°è¿œç¨‹è®¿é—®ã€‚ä¹Ÿå°±æ˜¯ä»å…¶ä»–ç”µè„‘é¢„è§ˆç½‘é¡µæ•ˆæœ &quot;server_port&quot;: 51004, &quot;refresh_on_modified&quot;: true, &quot;refresh_on_modified_delay&quot;: 500, &quot;refresh_on_saved&quot;: true, &quot;browser_command&quot;: [], &quot;html_template_name&quot;: &quot;github&quot;, &quot;ajax_polling_interval&quot;: 500, &quot;ignored_renderers&quot;: [&quot;LiterateHaskellRenderer&quot;], &quot;mathjax_enabled&quot;: true, //æ¸²æŸ“æ•°å­¦å…¬å¼è¦ç”¨åˆ°MathJaxåº“ï¼Œå°†å€¼è®¾ä¸ºtrue,mathjaxä¼šåœ¨åç«¯è‡ªåŠ¨ä¸‹è½½ã€‚ &quot;export_options&quot; : &#123; &quot;template_name&quot;: &quot;github-export&quot;, &quot;target_folder&quot;: &quot;.&quot;, &quot;timestamp_format&quot; : &quot;_%y%m%d%H%M%S&quot;, &quot;copy_to_clipboard&quot;: false, &quot;open_after_exporting&quot;: false &#125;, &quot;renderer_options-MarkdownRenderer&quot;: &#123; &quot;extensions&quot;: [&quot;tables&quot;, &quot;fenced_code&quot;, &quot;codehilite&quot;] &#125;&#125; é‡åˆ°çš„é”™è¯¯é¢„è§ˆæ–‡æœ¬æ—¶æŠ¥é”™ï¼š 1234567Error: 404 Not FoundSorry, the requested URL &apos;http://127.0.0.1:51004/view/593&apos; caused an error:&apos;buffer_id(593) is not valid (closed or unsupported file format)&apos;**NOTE:** If you run multiple instances of Sublime Text, you may want to adjustthe `server_port` option in order to get this plugin work again. è§£å†³åŠæ³•æ˜¯ä¿®æ”¹é…ç½®æ–‡ä»¶Sublime Text &gt; Preferences &gt; Package Settings &gt; OmniMarkupPreviewer &gt; Settings - Userç²˜è´´ä¸‹é¢çš„ä»£ç ï¼š 12345&#123; &quot;renderer_options-MarkdownRenderer&quot;: &#123; &quot;extensions&quot;: [&quot;tables&quot;, &quot;fenced_code&quot;, &quot;codehilite&quot;] &#125;&#125; å‚è€ƒé“¾æ¥ OmniMarkupPreviewerçš„githubä¸»é¡µ è¿‘ä¹å®Œç¾çš„Markdownå†™ä½œä½“éªŒ - SublimeText3 + OmniMarkupPreviewer OmniMarkupPreviewer + MathJaxOmniMarkupPreviewerxæ¸²æŸ“markdownå†…å®¹ä¸ºç½‘é¡µï¼ŒMathJaxå¯¹LATEXç¼–è¾‘çš„æ•°å­¦å…¬å¼è¿›è¡Œæ¸²æŸ“ã€‚ ä¸‹è½½mathjax ä¸‹è½½mathjaxï¼Œè§£å‹åˆ°ç›®å½•Sublime Text 3\\Packages\\OmniMarkupPreviewer\\publicä¸‹ã€‚ åœ¨ç›®å½•Sublime Text3\\Packages\\OmniMarkupPreviewer\\åˆ›å»ºç©ºæ–‡ä»¶MATHJAX.DOWNLOADEDã€‚è¿™æ ·å°±å®‰è£…å¥½äº†ã€‚ éªŒè¯æ–°å»ºmarkdownæ–‡ä»¶è¾“å…¥å†…å®¹ï¼š 123This expression $\\sqrt&#123;3x-1&#125;+(1+x)^2$ is an example of a $\\LaTeX$ inline equation.he Lorenz Equations:$$\\begin&#123;aligned&#125;\\dot&#123;x&#125; &amp; = \\sigma(y-x) \\\\\\dot&#123;y&#125; &amp; = \\rho x - y - xz \\\\\\dot&#123;z&#125; &amp; = -\\beta z + xy\\end&#123;aligned&#125;$$ åœ¨sublimeä¸­ç”¨Ctrl+Alt+Oé¢„è§ˆï¼Œæ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š å‚è€ƒé“¾æ¥ ä½¿ç”¨Markdownçš„æ—¶å€™éœ€è¦æ’å…¥LaTeXå…¬å¼æ–¹æ³• å…³äºLATEX: ä¸€ä»½å…¶å®å¾ˆçŸ­çš„ LaTeX å…¥é—¨æ–‡æ¡£ ä¸€ä»½å…¶å®å¾ˆçŸ­çš„ LaTeX å…¥é—¨æ–‡æ¡£ å¸¸ç”¨æ•°å­¦ç¬¦å·çš„ LaTeX è¡¨ç¤ºæ–¹æ³•","categories":[{"name":"æŠ€æœ¯èµ„æ–™","slug":"æŠ€æœ¯èµ„æ–™","permalink":"http://yoursite.com/categories/æŠ€æœ¯èµ„æ–™/"}],"tags":[{"name":"sublime","slug":"sublime","permalink":"http://yoursite.com/tags/sublime/"}]},{"title":"ç†µã€äº¤å‰ç†µä¸KLæ•£åº¦","slug":"ç†µã€äº¤å‰ç†µä¸KLæ•£åº¦","date":"2019-03-11T06:31:33.000Z","updated":"2019-07-22T00:57:32.000Z","comments":true,"path":"2019/03/11/ç†µã€äº¤å‰ç†µä¸KLæ•£åº¦/","link":"","permalink":"http://yoursite.com/2019/03/11/ç†µã€äº¤å‰ç†µä¸KLæ•£åº¦/","excerpt":"ä»‹ç»äº¤å‰ç†µå’ŒKLæ•£åº¦ã€‚","text":"ä»‹ç»äº¤å‰ç†µå’ŒKLæ•£åº¦ã€‚ ä»ä¿¡æ¯é‡åˆ°ä¿¡æºç†µ ä¿¡æ¯é‡æ˜¯é€šä¿¡ä¸“ä¸šçš„åè¯ã€‚ä¸€ä¸ªå˜é‡çš„ä¸»è¦ç‰¹å¾å°±æ˜¯ä¸ç¡®å®šæ€§ï¼Œä¹Ÿå°±æ˜¯å‘ç”Ÿçš„æ¦‚ç‡ã€‚ä¿¡æ¯é‡ç”¨æ¥è¡¡é‡ä¸ç¡®å®šæ€§çš„å¤§å°ã€‚ä¸€ä¸ªäº‹æƒ…å‘ç”Ÿçš„æ¦‚ç‡è¶Šå°ï¼Œä½¿äººè¶Šæ„Ÿåˆ°æ„å¤–ï¼Œåˆ™è¿™ä»¶äº‹çš„ä¿¡æ¯é‡è¶Šå¤§ï¼›åä¹‹ï¼Œæ¦‚ç‡è¶Šå¤§ï¼Œè¶Šä¸æ„å¤–ï¼Œä¿¡æ¯é‡è¶Šå°ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæœ‰ä¸€æ¶æ³¢éŸ³747é£æœºå¤±äº‹ï¼Œå‘ç”Ÿçš„æ¦‚ç‡å¾ˆå°ï¼Œè®©äººå¾ˆæ„å¤–ï¼Œå¸¦ç»™äººçš„ä¿¡æ¯é‡å¾ˆå¤§ã€‚ ä¿¡æ¯é‡å‡½æ•°åº”æ»¡è¶³ä¸¤ä¸ªç‰¹æ€§ï¼š1ï¼‰éšç€æ¦‚ç‡çš„å¢å¤§è€Œå‡å°ï¼Œå³æ˜¯æ¦‚ç‡çš„å‡å‡½æ•°ï¼›2ï¼‰ä¿¡æ¯é‡å‡½æ•°æ»¡è¶³å¯åŠ æ€§ï¼Œå³ä¸¤ä¸ªç»Ÿè®¡ç‹¬ç«‹çš„æ¶ˆæ¯æä¾›çš„ä¿¡æ¯é‡ç­‰äºä»–ä»¬åˆ†åˆ«æä¾›çš„ä¿¡æ¯é‡ä¹‹å’Œã€‚åŒæ—¶æ»¡è¶³é€’å‡æ€§å’Œå¯åŠ æ€§çš„å‡½æ•°æ˜¯å¯¹æ•°å‡½æ•°ï¼Œå³ $$ I[p(x_i)] = log \\frac{1}{p(x_i)} = -log p(x_i)$$ ä¿¡æºç†µå®šä¹‰ä¸ºä¿¡æºè¾“å‡ºçš„å¹³å‡ä¿¡æ¯é‡ï¼Œå³ä¿¡æ¯é‡çš„æ•°å­¦æœŸæœ›ã€‚$$ H(X) = E(I[p(x_i)]) = E(-log p(x_i)) = - \\sum_{i=1}^{n}p(x_i)log p(x_i)$$ä¿¡æºå®é™…ä¸Šæ˜¯ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒï¼Œä¿¡æºç†µå¯ä»¥è§£é‡Šä¸ºè¡¨ç¤ºè¿™ä¸ªæ¦‚ç‡åˆ†å¸ƒè‡³å°‘éœ€è¦çš„ä¿¡æ¯é‡ã€‚ äº¤å‰ç†µå¯¹äºä¸€ä¸ªéšæœºäº‹ä»¶ï¼ŒçœŸå®æ¦‚ç‡åˆ†å¸ƒæ˜¯$p(x_i)$ æ˜¯æœªçŸ¥çš„ï¼Œä»æ•°æ®ä¸­å¾—åˆ°æ¦‚ç‡åˆ†å¸ƒä¸º$q(x_i)$ã€‚æˆ‘ä»¬ç”¨æ¦‚ç‡åˆ†å¸ƒ$q(x_i)$æ¥è¿‘ä¼¼å’Œé€¼è¿‘çœŸå®çš„æ¦‚ç‡åˆ†å¸ƒ$p(x_i)$ ã€‚äº¤å‰ç†µå®šä¹‰ä¸ºï¼š$$H(p,q) = \\sum_{i=1}^{n}p(x_i) I[q(x_i)] =- \\sum_{i=1}^{n}p(x_i)log(x_i) $$äº¤å‰ç†µ$H(p,q)$æ˜¯ç”¨æ¦‚ç‡åˆ†å¸ƒ$q(x_i)$æ¥è¿‘ä¼¼çœŸå®æ¦‚ç‡åˆ†å¸ƒ$p(x_i)$éœ€è¦çš„ä¿¡æ¯é‡ã€‚ä¸Šé¢æˆ‘ä»¬è¯´è¿‡ï¼Œä¿¡æºç†µ$H(X)$æ˜¯è¡¨ç¤ºçœŸå®æ¦‚ç‡åˆ†å¸ƒ$p(x_i)$éœ€è¦çš„æœ€å°ä¿¡æ¯é‡ã€‚å¯ä»¥å¾—åˆ°ç»“è®ºï¼š$$H(p,q) \\ge H(p)$$ç”±å‰å¸ƒæ–¯ä¸ç­‰å¼å¯ä»¥è¯æ˜ï¼Œå½“ä¸”ä»…å½“åˆ†å¸ƒ$p(x_i)$ä¸$q(x_i)$å®Œå…¨ä¸€è‡´æ—¶ï¼Œç­‰å·æ‰æˆç«‹ã€‚è¿™ä¸ªä¸ç­‰å¼çš„æ„ä¹‰æ˜¯ï¼šç”¨æ¦‚ç‡åˆ†å¸ƒ$q(x_i)$æ¥è¿‘ä¼¼çœŸå®æ¦‚ç‡åˆ†å¸ƒ$p(x_i)$éœ€è¦çš„ä¿¡æ¯é‡ä¸€å®šå¤§äºç­‰äºæ¦‚ç‡åˆ†å¸ƒ$p(x_i)$æœ¬èº«çš„ä¿¡æºç†µã€‚äº¤å‰ç†µæ¯”ä¿¡æºç†µå¤šå‡ºæ¥çš„è¿™éƒ¨åˆ†ï¼Œå°±æ˜¯å†—ä½™ä¿¡æ¯é‡ï¼Œæˆ‘ä»¬ç§°ä¸ºKLæ•£åº¦ï¼ˆç›¸å¯¹ç†µï¼‰ã€‚$$KL(p||q)= H(p,q) - H(p) \\ge 0$$å®¹æ˜“çœ‹å‡ºäº¤å‰ç†µå¹¶ä¸æ˜¯ä¸€ä¸ªå¯¹ç§°é‡ï¼Œå³$ H(p,q) \\not=H(q,p)$ã€‚åŒæ ·çš„,KLæ•£åº¦ä¹Ÿä¸æ˜¯ä¸€ä¸ªå¯¹ç§°é‡ï¼Œå³$KL(p||q) \\not =KL(q||p) $ç»™å®šæ¦‚ç‡åˆ†å¸ƒ$p(x_i)$,ä¿¡æºç†µ$H(p)$å°±æ˜¯å›ºå®šä¸å˜çš„ã€‚åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œäº¤å‰ç†µå¸¸ç”¨ä½œåˆ†ç±»é—®é¢˜çš„æŸå¤±å‡½æ•°ã€‚äº¤å‰ç†µåˆ»ç”»äº†é¢„æµ‹æ¦‚ç‡åˆ†å¸ƒ$q(x_i)$ä¸çœŸå®æ¦‚ç‡åˆ†å¸ƒ$p(x_i)$ä¹‹é—´çš„è·ç¦»ã€‚é€šè¿‡å‡å°äº¤å‰ç†µ$H(p,q)$,æˆ‘ä»¬å¯ä»¥ä½¿å¾—é¢„æµ‹æ¦‚ç‡åˆ†å¸ƒ$q(x_i)$ä¸æ–­é€¼è¿‘çœŸå®æ¦‚ç‡åˆ†å¸ƒ$p(x_i)$ ç›¸å¯¹ç†µçœŸå®çš„æ¦‚ç‡åˆ†å¸ƒä¸º$p(x_i)$ï¼Œæˆ‘ä»¬ç”¨é¢„æµ‹æ¦‚ç‡åˆ†å¸ƒ$q(x_i)$å¯¹å®ƒè¿›è¡Œå»ºæ¨¡å’Œè¿‘ä¼¼ã€‚æˆ‘ä»¬éœ€è¦çš„å¹³å‡é™„åŠ é‡ï¼Œä¹Ÿå°±æ˜¯å†—ä½™é‡æ˜¯ï¼š$$KL(p,q) = H(p,q) - H(q) = -\\sum_{i=1}^{n}p(x_i)logq(x_i) - \\biggl(-\\sum_{i=1}^{n}p(x_i)logp(x_i)\\biggr) = -\\sum_{i=1}^{n}p(x_i)log{\\frac{q(x_i)}{p(x_i)}}$$KLæ•£åº¦æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹æ€§ï¼š KLæ•£åº¦ä¸æ˜¯ä¸€ä¸ªå¯¹ç§°é‡ï¼Œå³$KL(p||q) \\not =KL(q||p) $ $KL(p||q)\\ge 0$ï¼Œå½“ä¸”ä»…å½“åˆ†å¸ƒ$p(x_i)$ä¸$q(x_i)$å®Œå…¨ä¸€è‡´æ—¶ï¼Œç­‰å·æ‰æˆç«‹ã€‚ KLæ•£åº¦å¯ä»¥çœ‹åšä¸¤ä¸ªåˆ†å¸ƒä¹‹é—´ä¸ç›¸ä¼¼ç¨‹åº¦çš„åº¦é‡ã€‚KLæ•£åº¦è¶Šå°ï¼Œä¸¤ä¸ªåˆ†å¸ƒçš„ä¸ç›¸ä¼¼ç¨‹åº¦è¶Šå°ï¼Œåˆ†å¸ƒ$q(x_i)$è¶Šé€‚åˆæ¥è¿‘ä¼¼$p(x_i)$ã€‚ tensorflowç”¨äº¤å‰ç†µåšæŸå¤±å‡½æ•°åœ¨æœºå™¨å­¦ä¹ ä¸­äº¤å‰ç†µå¸¸å¸¸ç”¨ä½œåˆ†ç±»é—®é¢˜çš„æŸå¤±å‡½æ•°ã€‚è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œäº¤å‰ç†µç”¨äºæ¦‚ç‡åˆ†å¸ƒï¼Œä½†ç¥ç»ç½‘ç»œçš„è¾“å‡ºå¹¶ä¸ä¸€å®šæ˜¯ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒã€‚æ¦‚ç‡åˆ†å¸ƒåº”æ»¡è¶³2ä¸ªæ¡ä»¶:1) $0 \\le p(X =x) \\le 1$2) $\\sum_{x}{} p(X=x) = 1$å¦‚ä½•æŠŠç¥ç»ç½‘ç»œçš„è¾“å‡ºå˜æˆæ¦‚ç‡åˆ†å¸ƒå‘¢ï¼Ÿè¿™é‡Œå°±è¦ç”¨åˆ°softmaxå›å½’ã€‚å‡è®¾è¾“å‡ºå±‚çš„è¾“å‡ºä¸º$y_0,y_1,y_2 \\dots y_n$,åˆ™softmaxå‡½æ•°çš„å½¢å¼ä¸ºï¼š$$softmax(y_i) = \\frac{exp(y_i)}{\\sum_{j}exp(y_j)}$$ç”±äºäº¤å‰ç†µä¸€èˆ¬ä¼šä¸softmaxå›å½’ä¸€èµ·ä½¿ç”¨ï¼ŒTensorFlowå¯¹è¿™ä¸¤ä¸ªåŠŸèƒ½è¿›è¡Œäº†ç»Ÿä¸€ï¼Œå¯ä»¥ç›´æ¥ç”¨å‡½æ•°tf.nn.softmax_cross_entropy_with_logitsæ¥è®¡ç®—softmaxåçš„äº¤å‰ç†µå‡½æ•°ã€‚å¯¹äºåªæœ‰ä¸€ä¸ªæ­£ç¡®ç­”æ¡ˆçš„åˆ†ç±»é—®é¢˜ï¼Œå¯ä»¥ç”¨å‡½æ•°tf.nn.sparse_nn.softmax_cross_entropy_with_logitsæ¥åŠ é€Ÿè®¡ç®—è¿‡ç¨‹ã€‚ pytorchä¸­äº¤å‰ç†µæŸå¤±å‡½æ•°çš„å®ç°åœ¨å¤šåˆ†ç±»é—®é¢˜ä¸­ï¼Œå®é™…æ¦‚ç‡åˆ†å¸ƒæ˜¯ $y = [y_0,y_1,â€¦,y_{C-1}]$,å…¶ä¸­Cä¸ºç±»åˆ«æ•°;yæ˜¯æ ·æœ¬æ ‡ç­¾çš„one-hotè¡¨ç¤ºï¼Œå½“æ ·æœ¬å±äºç¬¬$i$ç±»æ—¶$y_i=1$,å¦åˆ™$y_i=0$ã€‚é¢„æµ‹æ¦‚ç‡åˆ†å¸ƒä¸º$p = [p_0,p_1,p_2,â€¦,p_{C-1}]$ã€‚$c$æ˜¯æ ·æœ¬æ ‡ç­¾ã€‚æ­¤æ—¶ï¼Œäº¤å‰ç†µæŸå¤±å‡½æ•°ä¸º$$loss = -\\sum_{i=0}^{C-1}y_i log(p_i) = - y_c \\cdot log(p_c) = - log(p_c)$$æ¥ä¸‹æ¥ä»‹ç»pytorchä¸­å…·ä½“å®ç°è¿™ä¸ªæ•°å­¦å¼å­çš„å‡½æ•°ã€‚ torch.nn.functional.log_softmax()ä¸class torch.nn.NLLLoss()1torch.nn.functional.log_softmax() ä½œç”¨ï¼šå…ˆåšsoftmaxè¿ç®—ï¼Œå†åšlogè¿ç®—ã€‚åœ¨æ•°å­¦ä¸Šç­‰ä»·äº$log(softmax(x))$ 1class torch.nn.NLLLoss(weight = None) ä½œç”¨ï¼šè¿™æ˜¯neg log likelihood lossï¼ˆNLLLossï¼‰ï¼Œå³è´Ÿå¯¹æ•°ä¼¼ç„¶å‡½æ•°ã€‚ å‚æ•°ï¼š weight(tensor,optional): ä¸€ç»´tensorï¼Œé‡Œé¢çš„å€¼å¯¹åº”ç±»åˆ«çš„æƒé‡ã€‚å½“è®­ç»ƒé›†æ ·æœ¬åˆ†å¸ƒä¸å‡åŒ€æ—¶ï¼Œä½¿ç”¨è¿™ä¸ªå‚æ•°éå¸¸é‡è¦ã€‚æ‰‹åŠ¨æŒ‡å®šç±»åˆ«çš„æƒé‡ï¼Œé•¿åº¦åº”ä¸ºç±»åˆ«ä¸ªæ•°Cã€‚ è¾“å…¥ï¼š input(N,C): Cæ˜¯ç±»åˆ«ä¸ªæ•°ã€‚ä¸ºlog_probabilitieså½¢å¼ï¼Œå³æ¦‚ç‡åˆ†å¸ƒå†å–logã€‚å¯ä»¥åœ¨æœ€åä¸€å±‚åŠ log_softmax,è¿™å°±è¦ç”¨åˆ°å‡½æ•°torch.nn.functional.log_softmax() targets(N): æ˜¯ç±»åˆ«çš„ç´¢å¼•ï¼Œè€Œä¸æ˜¯ç±»åˆ«çš„one-hotè¡¨ç¤ºã€‚æ¯”å¦‚ï¼Œ5ä¸ªç±»åˆ«ä¸­çš„ç¬¬3ç±»ï¼Œtargetåº”ä¸º2,è€Œä¸æ˜¯[0,0,1,0,0] losså¯ä»¥è¡¨ç¤ºä¸ºï¼š$$loss(x,class) = -x[class]$$å¦‚æœæŒ‡å®šäº†weightï¼Œå¯ä»¥è¡¨ç¤ºä¸ºï¼š$$loss(x,class) = - weight[class]*x[class]$$ä¸¾ä¸ªä¾‹å­: 1234567import torch log_m = torch.nn.functional.log_softmax()loss_function = torch.nn.NLLLoss()inputs = torch.randn(3,5) #batch_size * num_classes = 3 * 5target = torch.LongTensor([1,0,4])loss = loss_function(log_m(inputs),target) # inputsè¦å…ˆåšlog_softmaxï¼Œå†é€å…¥loss_functionloss.backward() class torch.nn.CrossEntropyLoss(weight = None) ä½œç”¨ï¼šå°†å‡½æ•°log_softmaxå’ŒNLLLossé›†æˆåˆ°ä¸€èµ·ã€‚åœ¨å¤šåˆ†ç±»é—®é¢˜ä¸­éå¸¸æœ‰ç”¨ã€‚ å‚æ•°ï¼š weight(tensor,optional): ä¸€ç»´tensorï¼Œé‡Œé¢çš„å€¼å¯¹åº”ç±»åˆ«çš„æƒé‡ã€‚å½“è®­ç»ƒé›†æ ·æœ¬åˆ†å¸ƒä¸å‡åŒ€æ—¶ï¼Œä½¿ç”¨è¿™ä¸ªå‚æ•°éå¸¸é‡è¦ã€‚æ‰‹åŠ¨æŒ‡å®šç±»åˆ«çš„æƒé‡ï¼Œé•¿åº¦åº”ä¸ºç±»åˆ«ä¸ªæ•°Cã€‚ è¾“å…¥ï¼š input(N,C): Cæ˜¯ç±»åˆ«ä¸ªæ•°ã€‚æ¯ä¸ªç±»åˆ«çš„åˆ†æ•°ï¼Œä¸ç”¨è¿‡softmaxå±‚ã€‚ targets(N): æ˜¯ç±»åˆ«çš„ç´¢å¼•ï¼Œè€Œä¸æ˜¯ç±»åˆ«çš„one-hotè¡¨ç¤ºã€‚æ¯”å¦‚ï¼Œ5ä¸ªç±»åˆ«ä¸­çš„ç¬¬3ç±»ï¼Œtargetåº”ä¸º2,è€Œä¸æ˜¯[0,0,1,0,0]ã€‚ losså¯ä»¥è¡¨ç¤ºä¸ºï¼š$$loss(x,class) = - \\text{log}\\frac{e^{x[class]}}{ \\sum_{j=0}^{C-1}e^{x[j]}} = -x[class] + \\text{log}(\\sum_{j=0}^{C-1}e^{x[j]}) $$å½“æŒ‡å®šäº†weightæ—¶ï¼Œlossè®¡ç®—å…¬å¼ä¸ºï¼š $$ loss(x, class) = weights[class] \\cdot (-x[class] + \\text{log}(\\sum_{j=0}^{C-1}e^{x[j]})) $$å‚è§ï¼š PyTorchå­¦ä¹ ç¬”è®°â€”â€”å¤šåˆ†ç±»äº¤å‰ç†µæŸå¤±å‡½æ•° pytorchå®˜æ–¹æ‰‹å†Œå‚è€ƒé“¾æ¥ ä¿¡æ¯ç†µï¼Œç›¸å¯¹ç†µï¼Œäº¤å‰ç†µçš„ç†è§£ TensorflowåŸºç¡€çŸ¥è¯†â€”æŸå¤±å‡½æ•°è¯¦è§£","categories":[{"name":"æœºå™¨å­¦ä¹ ","slug":"æœºå™¨å­¦ä¹ ","permalink":"http://yoursite.com/categories/æœºå™¨å­¦ä¹ /"}],"tags":[{"name":"äº¤å‰ç†µ","slug":"äº¤å‰ç†µ","permalink":"http://yoursite.com/tags/äº¤å‰ç†µ/"},{"name":"ç›¸å¯¹ç†µ","slug":"ç›¸å¯¹ç†µ","permalink":"http://yoursite.com/tags/ç›¸å¯¹ç†µ/"}]},{"title":"pythonçš„ä¸€äº›å‡½æ•°","slug":"pythonçš„ä¸€äº›å‡½æ•°","date":"2019-03-10T08:12:51.000Z","updated":"2019-07-07T07:07:46.000Z","comments":true,"path":"2019/03/10/pythonçš„ä¸€äº›å‡½æ•°/","link":"","permalink":"http://yoursite.com/2019/03/10/pythonçš„ä¸€äº›å‡½æ•°/","excerpt":"è®°å½•pythonçš„ä¸€äº›å‡½æ•°ï¼Œå®ç°æŸäº›åŠŸèƒ½ã€‚","text":"è®°å½•pythonçš„ä¸€äº›å‡½æ•°ï¼Œå®ç°æŸäº›åŠŸèƒ½ã€‚ æ±‚æœ€å¤§/å°å€¼çš„ç´¢å¼•å¯¹äºlist12345import numpy as npa = range(100)np.random.shuffle(a)index_max = a.index(max(a)) #æ±‚æœ€å¤§å€¼çš„ç´¢å¼•index_min = a.index(min(a)) #æ±‚æœ€å°å€¼çš„ç´¢å¼• å¯¹äºnumpyçš„æ•°ç»„ndarray1234567a = np.array(a)index_max = np.argmax(a) #æ±‚æœ€å¤§å€¼çš„ç´¢å¼•index_min = np.argmin(a) #æ±‚æœ€å°å€¼çš„ç´¢å¼•# å¯¹äºäºŒç»´çš„æ•°ç»„b = np.arange(100).reshape(10,-1)row_max_list = np.argmax(b,axis = 1) #æŒ‰è¡Œè®¡ç®—æœ€å¤§å€¼åœ¨è¡Œä¸­çš„ç´¢å¼•line_max_list = np.argmin(b,axis = 0) #æŒ‰åˆ—è®¡ç®—æœ€å°å€¼åœ¨åˆ—ä¸­çš„ç´¢å¼• sortä¸sorted1sorted(iterable,key,reverse) iterable: å¯è¿­ä»£å¯¹è±¡ keyï¼šç”¨æ¥è¿›è¡Œæ¯”è¾ƒçš„å…ƒç´ ã€‚å¸¸ç”¨å‡½æ•°ï¼š lambda x:x[i] reverseï¼šæ’åºè§„åˆ™ã€‚reverse=TrueæŒ‰é™åºæ’åˆ—ï¼Œreverse=FalseæŒ‰å‡åºæ’åˆ—ï¼ˆé»˜è®¤ï¼‰ æ¯”è¾ƒsortä¸sorted: ä½œç”¨å¯¹è±¡:sort()åªèƒ½ä½œç”¨äºlist,sorted()å¯ä»¥ä½œç”¨äºæ‰€æœ‰å¯è¿­ä»£å¯¹è±¡ã€‚ è¿”å›å€¼ï¼šsort()æ²¡æœ‰è¿”å›å€¼ï¼›sorted()è¿”å›ä¸€ä¸ªæ–°çš„list å­—å…¸çš„items()æ–¹æ³•1dict.items() è¿”å›å¯éå†çš„å…ƒç´ ä¸ºï¼ˆé”®ï¼Œå€¼ï¼‰å…ƒç»„çš„æ•°ç»„ã€‚ æ¨¡å—collectionsâ€“å®¹å™¨æ•°æ®ç±»å‹collectionsæ¨¡å—æ˜¯pythonå†…å»ºçš„ä¸€ä¸ªé›†åˆæ¨¡å—ï¼Œæä¾›äº†è®¸å¤šæœ‰ç”¨çš„é›†æˆç±»ã€‚æä¾›äº†list,dict,set,tupleçš„æ›¿ä»£é€‰æ‹©ï¼Œç›¸å½“äºè¿™å‡ ä¸ªæ•°æ®ç±»å‹çš„åŠ å¼ºç‰ˆã€‚ collections.Counter(iterable)Counteræ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç”¨äºè®¡æ•°å¯å“ˆå¸Œå¯¹è±¡ï¼Œç»Ÿè®¡å…ƒç´ å‡ºç°çš„ä¸ªæ•°ã€‚å®ƒæ˜¯ä¸€ä¸ªé›†åˆï¼Œå…ƒç´ -è®¡æ•°åƒé”®-å€¼å¯¹ä¸€æ ·å­˜å‚¨ã€‚ 123456&gt;&gt; import collections&gt;&gt; a = [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;a&quot;,&quot;b&quot;,&quot;a&quot;]&gt;&gt; counter = collections.Counter(a)&gt;&gt; print(counter)Counter(&#123;&apos;a&apos;: 3, &apos;b&apos;: 2, &apos;c&apos;: 1&#125;)","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://yoursite.com/categories/å­¦ä¹ ç¬”è®°/"}],"tags":[{"name":"python","slug":"python","permalink":"http://yoursite.com/tags/python/"}]},{"title":"å…¨æ–‡æœç´¢å¼•æ“-Elasticsearchå…¥é—¨","slug":"å…¨æ–‡æœç´¢å¼•æ“-Elasticsearchå…¥é—¨","date":"2019-03-10T07:11:17.000Z","updated":"2019-07-22T00:38:38.000Z","comments":true,"path":"2019/03/10/å…¨æ–‡æœç´¢å¼•æ“-Elasticsearchå…¥é—¨/","link":"","permalink":"http://yoursite.com/2019/03/10/å…¨æ–‡æœç´¢å¼•æ“-Elasticsearchå…¥é—¨/","excerpt":"Elasticsearchæ˜¯ä¸€ä¸ªå¼€æºçš„æœç´¢å¼•æ“æ¡†æ¶ã€‚","text":"Elasticsearchæ˜¯ä¸€ä¸ªå¼€æºçš„æœç´¢å¼•æ“æ¡†æ¶ã€‚ Elasticsearchå®‰è£…å’Œå¯åŠ¨å®‰è£…å‰æï¼šElasticsearchéœ€è¦Java7æˆ–ä»¥ä¸Šçš„ç‰ˆæœ¬ã€‚ ä¸‹è½½å‹ç¼©åŒ…å¹¶è§£å‹ï¼š 123wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.6.1.zipunzip elasticsearch-6.6.1.zipcd elasticsearch-6.6.1 è¿›å…¥è§£å‹åçš„æ–‡ä»¶ç›®å½•ï¼Œå¯åŠ¨elasticsearchï¼š 1./bin/elasticsearch å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œelasticsearché»˜è®¤åœ¨æœ¬æœº9200ç«¯å£è¿è¡Œã€‚æ‰“å¼€å¦ä¸€ä¸ªå‘½ä»¤è¡Œçª—å£ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæ£€æŸ¥elasticsearchæ˜¯å¦è¿è¡ŒæˆåŠŸï¼š 1curl localhost:9200 å¦‚æœè¾“å‡ºä»¥ä¸‹ä¿¡æ¯ï¼Œåˆ™è¿è¡Œæ­£å¸¸ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œelasticsearchåªå…è®¸æœ¬æœºè®¿é—®ã€‚è¦æƒ³å…¶ä»–ç”µè„‘å¯ä»¥è®¿é—®ï¼Œä¹Ÿå°±æ˜¯å®ç°è¿œç¨‹è®¿é—®ï¼Œéœ€è¦ä¿®æ”¹æ–‡ä»¶/config/elasticsearch.yml,å–æ¶ˆå­—æ®µnetwork.hostçš„æ³¨é‡Šï¼ŒæŠŠè¯¥å­—æ®µçš„å€¼æ”¹ä¸º0.0.0.0ã€‚è¿™æ ·çš„è¯æ‰€æœ‰çš„ç”µè„‘éƒ½èƒ½è®¿é—®ï¼Œå®é™…æƒ…å†µä¸­ï¼Œæœ€å¥½ä¸è¦è¿™æ ·ã€‚ å¦‚æœå¯åŠ¨é‡åˆ°é”™è¯¯â€œNative controller process has stopped - no new native processes can be startedâ€æˆ–â€œmax virtual memory areas vm.maxmapcount [65530] is too lowâ€ã€‚è§£å†³æ–¹æ³•æ˜¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 1sudo sysctl -w vm.max_map_count=262144 åœ¨pythonä¸­ä½¿ç”¨elasticsearchè¦å…ˆå®‰è£…elasticsearchåŒ…ã€‚åœ¨pythonä¸­ä½¿ç”¨elasticsearchè¦å…ˆå¯åŠ¨elasticsearchã€‚ 1pip install elasticsearch åˆ›å»ºindex12345from elasticsearch import Elasticsearch es = Elasticsearch() #åˆ›å»ºå®ä¾‹ï¼Œé»˜è®¤localhost:9200# es = Elasticsearch([&#123;&apos;host&apos;:&apos;10.112.1.109&apos;,&apos;port&apos;:&apos;9200&apos;&#125;]) #è¿œç¨‹è®¿é—®result = es.indices.create(index = &apos;news&apos;,ignore = 400)print(result) å¦‚æœåˆ›å»ºæˆåŠŸï¼Œä¼šè¿”å›ä»¥ä¸‹ä¿¡æ¯ 1&#123;&apos;acknowledged&apos;: True, &apos;shards_acknowledged&apos;: True, &apos;index&apos;: &apos;test_es&apos;&#125; å¦‚æœå†æ¬¡åˆ›å»ºï¼Œå°±ä¼šè¿”å›ä»¥ä¸‹ä¿¡æ¯ï¼š 1&#123;&apos;error&apos;: &#123;&apos;root_cause&apos;: [&#123;&apos;type&apos;: &apos;resource_already_exists_exception&apos;, &apos;reason&apos;: &apos;index [news/TrkzNdXZRi6ReiZqOM2Dvg] already exists&apos;, &apos;index_uuid&apos;: &apos;TrkzNdXZRi6ReiZqOM2Dvg&apos;, &apos;index&apos;: &apos;news&apos;&#125;], &apos;type&apos;: &apos;resource_already_exists_exception&apos;, &apos;reason&apos;: &apos;index [news/TrkzNdXZRi6ReiZqOM2Dvg] already exists&apos;, &apos;index_uuid&apos;: &apos;TrkzNdXZRi6ReiZqOM2Dvg&apos;, &apos;index&apos;: &apos;news&apos;&#125;, &apos;status&apos;: 400&#125; è¡¨ç¤ºåˆ›å»ºå¤±è´¥ï¼Œå¤±è´¥çš„åŸå› æ˜¯è¦åˆ›å»ºçš„indexå·²ç»å­˜åœ¨äº†ã€‚statusçŠ¶æ€ç æ˜¯400ã€‚ æ’å…¥æ•°æ®1234567891011datas = [ &#123;&apos;title&apos;:&quot;ç®—æ³•å¯¼è®ºï¼ˆåŸä¹¦ç¬¬2ç‰ˆï¼‰&quot;, &apos;url&apos;:&quot;https://book.douban.com/subject/1885170/&quot;, &apos;introduction&apos;:&quot;è¿™æœ¬ä¹¦æ·±å…¥æµ…å‡ºï¼Œå…¨é¢åœ°ä»‹ç»äº†è®¡ç®—æœºç®—æ³•ã€‚å¯¹æ¯ä¸€ä¸ªç®—æ³•çš„åˆ†ææ—¢æ˜“äºç†è§£åˆååˆ†æœ‰è¶£ï¼Œå¹¶ä¿æŒäº†æ•°å­¦ä¸¥è°¨æ€§ã€‚æœ¬ä¹¦çš„è®¾è®¡ç›®æ ‡å…¨é¢ï¼Œé€‚ç”¨äºå¤šç§ç”¨é€”ã€‚æ¶µç›–çš„å†…å®¹æœ‰ï¼šç®—æ³•åœ¨è®¡ç®—ä¸­çš„ä½œç”¨ï¼Œæ¦‚ç‡åˆ†æå’Œéšæœºç®—æ³•çš„ä»‹ç»ã€‚ä¹¦ä¸­ä¸“é—¨è®¨è®ºäº†çº¿æ€§è§„åˆ’ï¼Œä»‹ç»äº†åŠ¨æ€è§„åˆ’çš„ä¸¤ä¸ªåº”ç”¨ï¼ŒéšæœºåŒ–å’Œçº¿æ€§è§„åˆ’æŠ€æœ¯çš„è¿‘ä¼¼ç®—æ³•ç­‰ï¼Œè¿˜æœ‰æœ‰å…³é€’å½’æ±‚è§£ã€å¿«é€Ÿæ’åºä¸­ç”¨åˆ°çš„åˆ’åˆ†æ–¹æ³•ä¸æœŸæœ›çº¿æ€§æ—¶é—´é¡ºåºç»Ÿè®¡ç®—æ³•ï¼Œä»¥åŠå¯¹è´ªå¿ƒç®—æ³•å…ƒç´ çš„è®¨è®ºã€‚æ­¤ä¹¦è¿˜ä»‹ç»äº†å¯¹å¼ºè¿é€šå­å›¾ç®—æ³•æ­£ç¡®æ€§çš„è¯æ˜ï¼Œå¯¹å“ˆå¯†é¡¿å›è·¯å’Œå­é›†æ±‚å’Œé—®é¢˜çš„NPå®Œå…¨æ€§çš„è¯æ˜ç­‰å†…å®¹ã€‚å…¨ä¹¦æä¾›äº†900å¤šä¸ªç»ƒä¹ é¢˜å’Œæ€è€ƒé¢˜ä»¥åŠå™è¿°è¾ƒä¸ºè¯¦ç»†çš„å®ä¾‹ç ”ç©¶ã€‚è¿™æœ¬ä¹¦æ·±å…¥æµ…å‡ºï¼Œå…¨é¢åœ°ä»‹ç»äº†è®¡ç®—æœºç®—æ³•ã€‚å¯¹æ¯ä¸€ä¸ªç®—æ³•çš„åˆ†ææ—¢æ˜“äºç†è§£åˆååˆ†æœ‰è¶£ï¼Œå¹¶ä¿æŒäº†æ•°å­¦ä¸¥è°¨æ€§ã€‚æœ¬ä¹¦çš„è®¾è®¡ç›®æ ‡å…¨é¢ï¼Œé€‚ç”¨äºå¤šç§ç”¨é€”ã€‚æ¶µç›–çš„å†…å®¹æœ‰ï¼šç®—æ³•åœ¨è®¡ç®—ä¸­çš„ä½œç”¨ï¼Œæ¦‚ç‡åˆ†æå’Œéšæœºç®—æ³•çš„ä»‹ç»ã€‚ä¹¦ä¸­ä¸“é—¨è®¨è®ºäº†çº¿æ€§è§„åˆ’ï¼Œä»‹ç»äº†åŠ¨æ€è§„åˆ’çš„ä¸¤ä¸ªåº”ç”¨ï¼ŒéšæœºåŒ–å’Œçº¿æ€§è§„åˆ’æŠ€æœ¯çš„è¿‘ä¼¼ç®—æ³•ç­‰ï¼Œè¿˜æœ‰æœ‰å…³é€’å½’æ±‚è§£ã€å¿«é€Ÿæ’åºä¸­ç”¨åˆ°çš„åˆ’åˆ†æ–¹æ³•ä¸æœŸæœ›çº¿æ€§æ—¶é—´é¡ºåºç»Ÿè®¡ç®—æ³•ï¼Œä»¥åŠå¯¹è´ªå¿ƒç®—æ³•å…ƒç´ çš„è®¨è®ºã€‚æ­¤ä¹¦è¿˜ä»‹ç»äº†å¯¹å¼ºè¿é€šå­å›¾ç®—æ³•æ­£ç¡®æ€§çš„è¯æ˜ï¼Œå¯¹å“ˆå¯†é¡¿å›è·¯å’Œå­é›†æ±‚å’Œé—®é¢˜çš„NPå®Œå…¨æ€§çš„è¯æ˜ç­‰å†…å®¹ã€‚å…¨ä¹¦æä¾›äº†900å¤šä¸ªç»ƒä¹ é¢˜å’Œæ€è€ƒé¢˜ä»¥åŠå™è¿°è¾ƒä¸ºè¯¦ç»†çš„å®ä¾‹ç ”ç©¶ã€‚&quot;&#125;, &#123;&apos;title&apos;:&quot;è®¡ç®—æœºç¨‹åºçš„æ„é€ å’Œè§£é‡Š&quot;, &apos;url&apos;:&quot;https://book.douban.com/subject/1148282/&quot;, &apos;introduction&apos;:&quot;ã€Šè®¡ç®—æœºç¨‹åºçš„æ„é€ å’Œè§£é‡Š(åŸä¹¦ç¬¬2ç‰ˆ)ã€‹1984å¹´å‡ºç‰ˆï¼Œæˆå‹äºç¾å›½éº»çœç†å·¥å­¦é™¢(MIT)å¤šå¹´ä½¿ç”¨çš„ä¸€æœ¬æ•™æï¼Œ1996å¹´ä¿®è®¢ä¸ºç¬¬2ç‰ˆã€‚åœ¨è¿‡å»çš„äºŒåå¤šå¹´é‡Œï¼Œã€Šè®¡ç®—æœºç¨‹åºçš„æ„é€ å’Œè§£é‡Š(åŸä¹¦ç¬¬2ç‰ˆ)ã€‹å¯¹äºè®¡ç®—æœºç§‘å­¦çš„æ•™è‚²è®¡åˆ’äº§ç”Ÿäº†æ·±åˆ»çš„å½±å“ã€‚ç¬¬2ç‰ˆä¸­å¤§éƒ¨åˆ†é‡è¦ç¨‹åºè®¾è®¡ç³»ç»Ÿéƒ½é‡æ–°ä¿®æ”¹å¹¶åšè¿‡æµ‹è¯•ï¼ŒåŒ…æ‹¬å„ç§è§£é‡Šå™¨å’Œç¼–è¯‘å™¨ã€‚ä½œè€…æ ¹æ®å…¶ååä½™å¹´çš„æ•™å­¦å®è·µï¼Œè¿˜å¯¹å…¶ä»–è®¸å¤šç»†èŠ‚åšäº†ç›¸åº”çš„ä¿®æ”¹ã€‚&quot;&#125;, ]for i in range(len(datas)): es.index(index = &apos;book&apos;,doc_type = &apos;computer&apos;,id = i+1,body = datas[i]) index()æ–¹æ³•å¯ä»¥å®Œæˆä¸¤ä¸ªæ“ä½œï¼Œå¦‚æœæ•°æ®ä¸å­˜åœ¨ï¼Œé‚£å°±æ’å…¥æ•°æ®ï¼›å¦‚æœæ•°æ®å·²ç»å­˜åœ¨ï¼Œé‚£å°±æ›´æ–°æ•°æ®ã€‚ get()æŒ‰IDæŸ¥è¯¢12result= es.get(index=&apos;book&apos;,doc_type=&apos;computer&apos;,id =1)print(result[&apos;_source&apos;]) search()å®ç°å…¨æ–‡æ£€ç´¢å¯¹äºä¸­æ–‡ï¼Œæˆ‘ä»¬è¦å®‰è£…ä¸€ä¸ªä¸­æ–‡åˆ†è¯æ’ä»¶elasticsearch-analysis-ikã€‚å¯ä»¥ä½¿ç”¨elasticçš„å¦ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·elastisearch-pluginæ¥å®‰è£…ï¼Œè¦ç¡®ä¿ç‰ˆæœ¬å·ä¸€è‡´ã€‚è¿›å…¥elasticçš„ç›®å½•ä¸‹ï¼Œæ‰§è¡Œï¼š 1./bin/elasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.3.0/elasticsearch-analysis-ik-6.3.0.zip æ³¨æ„å°†6.3.0æ›¿æ¢ä¸ºè‡ªå·±çš„ç‰ˆæœ¬å·ã€‚å®‰è£…æˆåŠŸåï¼Œé‡å¯elasticsearchï¼Œå°±ä¼šè‡ªåŠ¨åŠ è½½è¿™ä¸ªä¸­æ–‡åˆ†è¯æ’ä»¶ã€‚ 1234567891011es = Elasticsearch()mapping = &#123; &apos;properties&apos;: &#123; &apos;title&apos;: &#123; &apos;type&apos;: &apos;text&apos;, &apos;analyzer&apos;: &apos;ik_max_word&apos;, &apos;search_analyzer&apos;: &apos;ik_max_word&apos; &#125; &#125;&#125;result = es.indices.put_mapping(index=&apos;news&apos;, doc_type=&apos;politics&apos;, body=mapping) æŒ‡å®šä½¿ç”¨ä¸­æ–‡åˆ†è¯å™¨ï¼Œå¦‚æœä¸æŒ‡å®šé»˜è®¤ä½¿ç”¨è‹±æ–‡åˆ†è¯å™¨ã€‚ 12345678dsl = &#123; &apos;query&apos;: &#123; &apos;match&apos;: &#123; &apos;introduction&apos;: &apos;è®¡ç®—æœº&apos; &#125; &#125;&#125;result = es.search(index=&apos;news&apos;, doc_type=&apos;politics&apos;, body=dsl) å‚è€ƒé“¾æ¥ å…¨æ–‡æœç´¢å¼•æ“ Elasticsearch å…¥é—¨æ•™ç¨‹â€”â€“é˜®ä¸€å³° Python Elasticsearchæ–‡æ¡£ Elasticsearchå®˜æ–¹æ–‡æ¡£ ElasticsearchåŸºæœ¬ä»‹ç»åŠå…¶ä¸Pythonçš„å¯¹æ¥å®ç°â€“å´”åº†æ‰ Elasticsearchæœç´¢ä¸­æ–‡åˆ†è¯ä¼˜åŒ–","categories":[{"name":"webæœç´¢","slug":"webæœç´¢","permalink":"http://yoursite.com/categories/webæœç´¢/"}],"tags":[{"name":"Elasticsearch","slug":"Elasticsearch","permalink":"http://yoursite.com/tags/Elasticsearch/"}]},{"title":"UbuntuæœåŠ¡å™¨é‡åˆ°çš„ä¸€äº›é—®é¢˜","slug":"UbuntuæœåŠ¡å™¨é‡åˆ°çš„ä¸€äº›é—®é¢˜","date":"2019-03-07T11:53:00.000Z","updated":"2019-03-12T06:13:31.000Z","comments":true,"path":"2019/03/07/UbuntuæœåŠ¡å™¨é‡åˆ°çš„ä¸€äº›é—®é¢˜/","link":"","permalink":"http://yoursite.com/2019/03/07/UbuntuæœåŠ¡å™¨é‡åˆ°çš„ä¸€äº›é—®é¢˜/","excerpt":"è®°å½•UbuntuæœåŠ¡å™¨é‡åˆ°çš„ä¸€äº›é—®é¢˜ã€‚","text":"è®°å½•UbuntuæœåŠ¡å™¨é‡åˆ°çš„ä¸€äº›é—®é¢˜ã€‚ linuxæœåŠ¡å™¨è¿ä¸ä¸Šç½‘ å…ˆæ£€æŸ¥ç½‘çº¿æ˜¯å¦æ’å¥½äº†ï¼Œè‹¥ç½‘çº¿å£å‘äº®æ‰æ˜¯æ’å¥½ã€‚æ£€æŸ¥ç”µè„‘æ˜¯å¦èƒ½pingé€šå±€åŸŸç½‘çš„å…¶ä»–ç”µè„‘ã€‚ æŸ¥çœ‹å…¶ä»–ç”µè„‘çš„ipåœ°å€ifconfig | grep inet pingå…¶ä»–ç”µè„‘çš„IPåœ°å€ping 10.112.0.1å¦‚æœå¯ä»¥pingé€šå…¶ä»–ç”µè„‘ï¼Œå†æ£€æŸ¥ä¸‹ä¸€æ­¥ã€‚ å¯ä»¥pingé€šå…¶ä»–ç”µè„‘ï¼Œä½†ping 10.3.8.211æ ¡å›­ç½‘ç½‘å…³å¤±è´¥ã€‚è¿™æ—¶å¯èƒ½æ˜¯è·¯ç”±å‡ºé”™ï¼ŒæŸ¥çœ‹æœåŠ¡å™¨çš„è·¯ç”±æ˜¯å¦æ­£ç¡®ã€‚ æŸ¥çœ‹æ¯”è¾ƒæœåŠ¡å™¨ä¸å¯ä»¥æ­£å¸¸è”ç½‘çš„ç”µè„‘çš„è·¯ç”±ã€‚route -n æ·»åŠ æ­£ç¡®çš„é»˜è®¤è·¯ç”±ã€‚route add default gw 10.112.0.1 æ£€æŸ¥èƒ½å¦è¿æ¥åˆ°æ ¡å›­ç½‘ã€‚ping 10.3.8.211Ubuntué…ç½®è·¯ç”±å‚è§: ubuntué…ç½®é™æ€è·¯ç”±åŠé‡å¯ç”Ÿæ•ˆ è¿æ¥åˆ°æ ¡å›­ç½‘ï¼Œä½†æ˜¯ping www.baidu.comå¤±è´¥ã€‚æœåŠ¡å™¨pingä¸é€šåŸŸåï¼Œä½†å¯ä»¥pingé€šç™¾åº¦çš„ipåœ°å€112.34.112.40ã€‚è¿™æ˜¯æœåŠ¡å™¨çš„DNSé…ç½®å‡ºé”™äº†ï¼Œæ— æ³•è§£æåŸŸåã€‚ ä¿®æ”¹æ–‡ä»¶/etc/resolv.confï¼Œå¿…é¡»æœ‰sudoæƒé™ã€‚sudo vim /etc/resolv.conf æ·»åŠ ä»¥ä¸‹å†…å®¹nameserver 8.8.8.8 é‡å¯ç½‘ç»œä½¿ä¿®æ”¹ç«‹å³ç”Ÿæ•ˆã€‚sudo /etc/init.d/networking restart è¿™æ—¶åº”è¯¥èƒ½pingé€šç™¾åº¦äº†ã€‚ é‡å¯ç”µæºåï¼Œä»¥ä¸Šæ–¹æ³•ä¼šè¢«æ¸…é™¤è€Œå¤±æ•ˆï¼Œå¯¼è‡´å¼€æœºåéœ€è¦é‡æ–°é…ç½®ã€‚æœ‰æ•ˆçš„æ–¹æ³•æ˜¯å¸è½½å¼€æœºé‡å†™/etc/resolv.confçš„resolvconfï¼Œæ‰§è¡Œå‘½ä»¤sudo apt-get autoremove resolvconfé…ç½®åŸŸåè§£æå‚è§ï¼šUbuntu æ— æ³•è§£æåŸŸå ä¸èƒ½é€šè¿‡Xshellæˆ–sshå‘½ä»¤è¿æ¥åˆ°æœåŠ¡å™¨ æ£€æŸ¥æ˜¯å¦å®‰è£…äº†ssh-serveræœåŠ¡ã€‚ps -e | grep ssh è‹¥æ²¡æœ‰å®‰è£…ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼šsudo apt-get install openssh-server è‹¥å®‰è£…äº†ssh-serveræœåŠ¡ï¼Œæ£€æŸ¥sshæœåŠ¡æ˜¯å¦æ‰“å¼€ã€‚éœ€è¦sudoæƒé™ æ£€æŸ¥sshæœåŠ¡çŠ¶æ€service sshd statusæˆ–/etc/init.d/ssh status å¼€å¯sshæœåŠ¡service sshd startæˆ–/etc/init.d/ssh start","categories":[{"name":"æŠ€æœ¯èµ„æ–™","slug":"æŠ€æœ¯èµ„æ–™","permalink":"http://yoursite.com/categories/æŠ€æœ¯èµ„æ–™/"}],"tags":[{"name":"linux","slug":"linux","permalink":"http://yoursite.com/tags/linux/"},{"name":"æœåŠ¡å™¨","slug":"æœåŠ¡å™¨","permalink":"http://yoursite.com/tags/æœåŠ¡å™¨/"}]},{"title":"pytorchå­¦ä¹ ç¬”è®°","slug":"pytorchå­¦ä¹ ç¬”è®°","date":"2019-03-05T01:27:14.000Z","updated":"2019-07-07T07:09:35.000Z","comments":true,"path":"2019/03/05/pytorchå­¦ä¹ ç¬”è®°/","link":"","permalink":"http://yoursite.com/2019/03/05/pytorchå­¦ä¹ ç¬”è®°/","excerpt":"è¿™é‡Œæ˜¯pytorchå­¦ä¹ ç¬”è®°ã€‚","text":"è¿™é‡Œæ˜¯pytorchå­¦ä¹ ç¬”è®°ã€‚ åˆ›å»ºæ“ä½œtorch.randn()1torch.randn(*size,out = None) è¾“å…¥ï¼š size(int)ï¼šæŒ‡å®šäº†è¾“å‡ºå¼ é‡çš„å½¢çŠ¶ è¾“å‡ºï¼šè¾“å‡ºç»“æœä¸ºå¼ é‡ ä½œç”¨ï¼šè¿”å›ä¸€ä¸ªå¼ é‡ï¼Œä»æ ‡å‡†æ­£æ€åˆ†å¸ƒä¸­æŠ½å–ä¸€ç»„éšæœºæ•°ã€‚å½¢çŠ¶ç”±*sizeå†³å®š å¼ é‡ç»´åº¦æ“ä½œè½¬ç½®ï¼štranspose1torch.transpose(input,dim0,dim1) å‚æ•°ï¼š input: è¾“å…¥å¼ é‡ï¼Œå¯ä»¥æ˜¯äºŒç»´åŠäºŒç»´ä»¥ä¸Šçš„å¼ é‡ dim0,dim1: è¦è½¬ç½®çš„ä¸¤ä¸ªç»´åº¦ã€‚ ä½œç”¨ï¼š è¿”å›è¾“å…¥çŸ©é˜µçš„è½¬ç½®ã€‚ä¸€æ¬¡åªèƒ½è½¬ç½®å¼ é‡çš„ä¸¤ä¸ªç»´åº¦ã€‚è¾“å‡ºå¼ é‡ä¸è¾“å…¥å¼ é‡å…±äº«å†…å­˜ï¼ŒåŒæ­¥æ”¹å˜ã€‚ 1torch.t(tensor) è¾“å…¥ä¸€ä¸ªäºŒç»´å¼ é‡ï¼ˆçŸ©é˜µï¼‰ï¼Œå¹¶è½¬ç½®0,1ç»´ã€‚å¯ä»¥çœ‹åšå‡½æ•°torch.transpose(input,0,1)çš„ç®€å†™å‡½æ•°ã€‚æ¯”è¾ƒä¸‹transposeä¸viewè¿™ä¸¤ä¸ªå‡½æ•°ï¼š 1234567891011121314151617181920212223242526272829303132333435&gt;&gt; a = torch.randn(2,3,5)&gt;&gt; b = torch.transpose(a,1,2)&gt;&gt; c = a.view(2,5,3)&gt;&gt; print(a)tensor([[[ 0.9926, -0.1669, -1.6571, -0.2730, -0.1313], [ 0.9811, -1.9854, 1.5519, 0.1383, 1.4571], [ 0.8221, -1.1283, -0.7675, -2.0497, 0.4748]], [[ 0.1594, 0.7166, -0.2603, 1.1027, 1.5283], [-0.7652, -1.4711, 0.5077, 0.6639, 0.0374], [ 1.8121, -1.4864, -2.9863, -0.5769, -0.2915]]]) &gt;&gt; print(b)tensor([[[ 0.9926, 0.9811, 0.8221], [-0.1669, -1.9854, -1.1283], [-1.6571, 1.5519, -0.7675], [-0.2730, 0.1383, -2.0497], [-0.1313, 1.4571, 0.4748]], [[ 0.1594, -0.7652, 1.8121], [ 0.7166, -1.4711, -1.4864], [-0.2603, 0.5077, -2.9863], [ 1.1027, 0.6639, -0.5769], [ 1.5283, 0.0374, -0.2915]]]) &gt;&gt; print(c)tensor([[[ 0.9926, -0.1669, -1.6571], [-0.2730, -0.1313, 0.9811], [-1.9854, 1.5519, 0.1383], [ 1.4571, 0.8221, -1.1283], [-0.7675, -2.0497, 0.4748]], [[ 0.1594, 0.7166, -0.2603], [ 1.1027, 1.5283, -0.7652], [-1.4711, 0.5077, 0.6639], [ 0.0374, 1.8121, -1.4864], [-2.9863, -0.5769, -0.2915]]]) å¯ä»¥çœ‹åˆ°:äºŒè€…å¾—åˆ°çš„ç»“æœå¹¶ä¸ç›¸åŒã€‚transposeæ˜¯è¿›è¡Œè½¬ç½®æ“ä½œã€‚viewå¯¹å¼ é‡æ•´å½¢æ—¶ï¼Œå¼ é‡ä¸­å…ƒç´ çš„é¡ºåºä¿æŒä¸å˜ã€‚ç›¸å½“äºå°†è¿™ä¸ªä¸‰ç»´å¼ é‡æŒ‰é¡ºåº torch.Tensortorch.manual_seed()1torch.manual_seed(seed) è¾“å…¥ï¼š seed(int or long)ï¼šè®¾å®šç§å­ï¼Œä¸ºintç±»å‹æˆ–longç±»å‹ ä½œç”¨ï¼šè®¾å®šç”Ÿæˆéšæœºæ•°çš„ç§å­ã€‚ç§å­ç›¸åŒï¼Œç”Ÿæˆçš„éšæœºæ•°å°±æ˜¯ç›¸åŒçš„ï¼Œå®éªŒç»“æœå°±å¯ä»¥å¤ç°ã€‚ å‚è§ï¼šåˆ©ç”¨éšæœºæ•°ç§å­æ¥ä½¿pytorchä¸­çš„ç»“æœå¯ä»¥å¤ç° .view() æ•´å½¢1tensor.view(*size) è¾“å…¥ï¼š *size(int)ï¼šæŒ‡å®šäº†è¾“å‡ºå¼ é‡çš„å½¢çŠ¶ è¾“å‡ºï¼šè¾“å‡ºç»“æœä¸ºå¼ é‡ ä½œç”¨ï¼šæ•´å½¢ï¼Œåªæ”¹å˜åŸå¼ é‡çš„å½¢çŠ¶ï¼Œå½¢çŠ¶ç”±*sizeæŒ‡å®šã€‚ ä¾‹å­ï¼š 123456789&gt;&gt; x = torch.randn(5,4)&gt;&gt; x.size()torch.Size([5,4]&gt;&gt; x.view(30)&gt;&gt; x.size()torch.Size([20])&gt;&gt; x.view(1,1,-1) # -1è¡¨ç¤ºè¯¥ç»´åº¦ç”±å…¶ä»–çš„ç»´åº¦æ¨æ–­ã€‚&gt;&gt; x.size()torch.Size([1, 1, 20]) torch.cat() è¿æ¥1torch.cat(inputs,dimension = 0) è¾“å…¥ï¼š inputs(sequence of Tensors)ï¼š å¤šä¸ªTensorçš„pythonåºåˆ—ã€‚ å¦‚[tensor1,tensor2â€¦]æˆ–(Tensor1ï¼Œtensor2) dimension(int,optional): æ²¿ç€è¯¥ç»´è¿æ¥å¼ é‡åºåˆ—ã€‚é»˜è®¤ä¸º0ã€‚ ä½œç”¨ï¼šåœ¨æŒ‡å®šç»´åº¦ä¸Šï¼Œå¯¹è¾“å…¥å¼ é‡åºåˆ—è¿›è¡Œè¿æ¥æ“ä½œã€‚ ä¸¾ä¸ªä¾‹å­ï¼š 12345678910&gt;&gt; impotr torch &gt;&gt; x = torch.randn(4,3)&gt;&gt; x.size()torch.Size([4, 3])&gt;&gt; y = torch.cat((x,x,x),0)&gt;&gt; y.size()torch.Size([12, 3])&gt;&gt; z = torch.cat((x,x,x),1)&gt;&gt; z.size() torch.Size([4, 9]) torch.optimclass torch.optim.SGD(params,lr=,momentum=0,weight_decay=0) å‚æ•°ï¼š paramsï¼š å¾…ä¼˜åŒ–å‚æ•°çš„iterable lr(float): å­¦ä¹ ç‡ momentum(float,å¯é€‰)ï¼š åŠ¨é‡å› å­ï¼Œé»˜è®¤ä¸º0 weight_decay(float,å¯é€‰): æƒé‡è¡°å‡ï¼Œé»˜è®¤ä¸º0 ä½œç”¨ï¼šå®ç°éšæœºæ¢¯åº¦ä¸‹é™ç®—æ³•ã€‚ å¦‚ä½•ä½¿ç”¨optimizer? 123456789import torch.optim as optim optimizer = optim.SGD(model.parameters(),lr = 0.01) #æ„å»ºä¸€ä¸ªoptimizer,model.parameters()ç»™å‡ºäº†æ‰€æœ‰è¦ä¼˜åŒ–çš„å‚æ•°for input,target in dataset: optimizer.zero_grad() #æ¸…ç©ºæ‰€æœ‰è¢«ä¼˜åŒ–è¿‡çš„Variableçš„æ¢¯åº¦ output = model(input) loss = loss_fn(output,target) loss.backward() #åå‘ä¼ æ’­ç®—æ³•ï¼Œè®¡ç®—å¥½æ‰€æœ‰è¦ä¼˜åŒ–Variableçš„æ¢¯åº¦ã€‚ optimizer.step() #å•æ­¥ä¼˜åŒ–ï¼ŒåŸºäºè®¡ç®—å¾—åˆ°çš„æ¢¯åº¦è¿›è¡Œå‚æ•°æ›´æ–°ã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://yoursite.com/categories/å­¦ä¹ ç¬”è®°/"}],"tags":[{"name":"pytorch","slug":"pytorch","permalink":"http://yoursite.com/tags/pytorch/"}]},{"title":"Numpyå­¦ä¹ ç¬”è®°","slug":"Numpyå­¦ä¹ ç¬”è®°","date":"2019-02-27T12:33:15.000Z","updated":"2019-07-22T00:37:14.000Z","comments":true,"path":"2019/02/27/Numpyå­¦ä¹ ç¬”è®°/","link":"","permalink":"http://yoursite.com/2019/02/27/Numpyå­¦ä¹ ç¬”è®°/","excerpt":"è¿™é‡Œæ˜¯numpyå­¦ä¹ ç¬”è®°ã€‚","text":"è¿™é‡Œæ˜¯numpyå­¦ä¹ ç¬”è®°ã€‚ np.copy1np.copy(a) aä¸ºndarrayæ•°ç»„ã€‚np.copyå¤åˆ¶ä¸€ä¸ªä¸aå®Œå…¨ç›¸åŒçš„dnarrayæ•°ç»„ã€‚æ¥çœ‹çœ‹=ä¸np.copyçš„åŒºåˆ«ã€‚ 12345678&gt;&gt; x = np.array([1,2,3])&gt;&gt; y = x&gt;&gt; z = x.copy(x)&gt;&gt; x[0] = 10&gt;&gt; x[0] == y[0]True&gt;&gt; x[0] == z[0]False å¯¹äº=ï¼Œxä¸yå…±äº«åŒä¸€å†…å­˜ï¼Œæ•°æ®åŒæ­¥æ”¹å˜ã€‚ä¸€ä¸ªæ”¹å˜å¦ä¸€ä¸ªè·Ÿç€æ”¹å˜ã€‚å¯¹äºnp.copy,xä¸zåœ¨ä¸åŒçš„å†…å­˜ï¼Œæ•°æ®æ”¹å˜äº’ä¸å½±å“ã€‚ np.loadä¸np.savenumpyå¯ä»¥è¯»å†™ç£ç›˜ä¸Šçš„äºŒè¿›åˆ¶æ•°æ®ã€‚ä¸ºå°†ndarrayæ•°ç»„å¯¹è±¡ä¿å­˜åˆ°æ–‡ä»¶ï¼Œå¼•å…¥äº†æ–‡ä»¶æ ¼å¼npyã€‚æ•°ç»„å¯¹è±¡ndarrayä»¥æœªå‹ç¼©çš„åŸå§‹äºŒè¿›åˆ¶æ ¼å¼ä¿å­˜åœ¨æ‰©å±•åä¸º.npyçš„æ–‡ä»¶ä¸­ã€‚ np.save(file,array) ä½œç”¨ï¼š å°†æ•°ç»„ä»¥äºŒè¿›åˆ¶æ ¼å¼ä¿å­˜åˆ°æ‰©å±•åä¸ºnpyçš„æ–‡ä»¶ä¸­ã€‚ np.load(file) ä½œç”¨ï¼š ä».npyæ–‡ä»¶ä¸­è¯»å–äºŒè¿›åˆ¶æ•°æ®è¿˜åŸä¸ºæ•°ç»„ã€‚ä¸¾ä¸ªä¾‹å­ï¼š1234import numpy as np a = arange(5)np.save(&apos;a.npy&apos;,a)b = np.load(&apos;a.npy&apos;) np.full1np.full(shape,fill_value,dtype) ä½œç”¨ï¼š è¿”å›ä¸€ä¸ª ç»™å®šå½¢çŠ¶ä¸ºshapeï¼Œæ•°æ®ç±»å‹ä¸ºdtypeï¼Œå…¨éƒ½ç”±fill_valueå¡«å……åçš„ndarrayã€‚ np.foat32np.float32(x)ä½œç”¨ï¼šå˜æ¢æ•°æ®ç±»å‹ä¸ºfloat32 np.padå‚æ•°è§£é‡Š 1numpy.pad(array, pad_width, mode, **kwargs) è¾“å…¥ array ä¸ºå¾…å¡«å……çš„æ•°ç»„ pad_width ä¸º((before_1,after_1),(before_2,after_2),â€¦.,(before_N,after_N))åœ¨æ¯ä¸ªç»´åº¦å‰åå¡«å……çš„ä¸ªæ•° mode å¸¸ç”¨constant,ç”¨å¸¸æ•°å¡«å……ã€‚ è¿”å›å€¼ï¼š å¡«å……åçš„ndarray ä¸¾ä¸ªä¾‹å­ 123456import numpy as np a = range(5)# åœ¨ä¸€ç»´æ•°ç»„å‰ååˆ†åˆ«å¡«å……2,3ä½æ•°å­—ï¼›å¡«å……çš„æ•°å­—åˆ†åˆ«ä¸º0,2ndarray = np.pad(a,(2,3),&apos;constant&apos;,constant_values=(0,2))print(a)print(ndarray) æ‰§è¡Œç»“æœä¸º 12[0, 1, 2, 3, 4][0 0 0 1 2 3 4 2 2 2] np.randomnp.random.uniformnp.random.uniform(low = 0,high = 1,size = None)ä½œç”¨ï¼š ç”Ÿæˆä¸€ä¸ªå½¢çŠ¶ä¸ºsizeçš„éšæœºæ•°çŸ©é˜µï¼Œæ¯ä¸ªæ•°ä»å‡åŒ€åˆ†å¸ƒçš„åŠå¼€åŠé—­åŒºé—´[low,high)ä¸­æŠ½æ ·å¾—åˆ°ã€‚ å‚è€ƒé“¾æ¥ Numpyå®˜æ–¹æ‰‹å†Œ","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://yoursite.com/categories/å­¦ä¹ ç¬”è®°/"}],"tags":[{"name":"Numpy","slug":"Numpy","permalink":"http://yoursite.com/tags/Numpy/"}]},{"title":"2018-ç¾¤æ˜Ÿé™¨è½","slug":"2018-ç¾¤æ˜Ÿé™¨è½","date":"2019-01-16T12:56:00.000Z","updated":"2019-07-22T00:35:37.000Z","comments":true,"path":"2019/01/16/2018-ç¾¤æ˜Ÿé™¨è½/","link":"","permalink":"http://yoursite.com/2019/01/16/2018-ç¾¤æ˜Ÿé™¨è½/","excerpt":"æ¸¸é¾™å½“å½’æµ·ï¼Œæµ·ä¸è¿æˆ‘è‡ªæ¥ä¹Ÿï¼","text":"æ¸¸é¾™å½“å½’æµ·ï¼Œæµ·ä¸è¿æˆ‘è‡ªæ¥ä¹Ÿï¼ ä»Šå¤©æ˜¯å†œå†12æœˆåä¸€ï¼Œæ˜å¤©å°±æ˜¯çˆ¸çˆ¸çš„ç”Ÿæ—¥ã€‚é˜³å†çš„2018å¹´å·²ç»è¿‡å»äº†ï¼Œä½†æ˜¥èŠ‚è¿˜æ²¡æ¥å‘¢ï¼ç ”ç©¶ç”Ÿä¸€å¹´çº§çš„å­¦æœŸæœŸæœ«ï¼Œæˆ‘æƒ³ç€å›é¡¾ä¸€ä¸‹è¿™ä¸€å¹´ï¼Œçœ‹çœ‹è‡ªå·±è¿™ä¸€å¹´æ˜¯æ€ä¹ˆåº¦è¿‡çš„ã€‚2018å¹´ï¼Œè®¸å¤šäº†ä¸èµ·çš„äººå»ä¸–äº†ï¼Œå› æ­¤é€‰äº†è¿™ä¸ªå°æ ‡é¢˜ã€‚2018å¹´ï¼Œæˆ‘å¤§å­¦æ¯•ä¸šï¼Œé¡ºåˆ©é€šè¿‡äº†ç ”ç©¶ç”Ÿå¤è¯•ã€‚è€ƒç ”ï¼Œæ˜¯ä¸é«˜è€ƒåŒç­‰çº§åˆ«çš„è€ƒè¯•ï¼Œä¸åŒçš„æ˜¯è€ƒç ”æ²¡æœ‰è€å¸ˆå’Œå®¶é•¿çš„ç£ä¿ƒï¼Œåªå¾—ä¸€ä¸ªäººå¥‹æˆ˜ã€‚å¤‡æˆ˜è€ƒç ”åˆè¯•å·²ç»æ˜¯2017å¹´çš„å¾€äº‹äº†ï¼Œä½†è¿˜æ˜¯å€¼å¾—ä¸€æçš„ã€‚å‡†å¤‡åˆè¯•çš„å°åŠå¹´é‡ŒåŸºæœ¬ä¸Šæ¯å¤©æ³¡åœ¨å›¾ä¹¦é¦†é‡Œï¼Œååœ¨æŸä¸ªå›ºå®šçš„åº§ä½ã€‚è™½ç„¶æœ‰æ—¶å€™ä¹Ÿä¼šæ‡ˆæ€ æ‡’æƒ°ï¼Œä½†å¤§éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯åœ¨è®¤çœŸåœ°å­¦ä¹ ã€‚æ™šä¸Šä¹ç‚¹åŠä»å›¾ä¹¦é¦†å‡ºæ¥ï¼Œæˆ‘å¸¸è¦ç»•ç€å­¦æ ¡è·‘ä¸Šäº”å…¬é‡Œï¼›å›å®¿èˆç»è¿‡ä¸€æ¥¼çš„é•œå­ï¼Œæˆ‘çœ‹ç€è‡ªå·±å˜´é‡Œå¿µå¨ç€å­¦æ ¡çš„åå­—ã€‚å¦‚æ„¿ä»¥å¿ï¼Œ2018å¹´å¹´åˆï¼Œæˆ‘æŸ¥è‡ªå·±çš„è€ƒç ”åˆè¯•æˆç»©409ï¼Œæ˜¯æ¯”é«˜è€ƒè¿˜ä»¤äººæ»¡æ„çš„äº†ã€‚æŸ¥åˆ°æˆç»©åï¼Œæˆ‘æ¬¢æ¬£é¼“èˆäº†ä¸€é˜µå­ã€‚ ä¸ŠåŠå¹´ - æœ¬ç§‘æœ€åçš„æ—¥å­å¹´åˆï¼Œæˆ‘å› ä¸ºè€ƒé©¾ç…§çš„ç¼˜æ•…ä½åœ¨æˆ‘å§¨å®¶é‡Œï¼Œæœ‰äº†è·Ÿäº²æˆšä¸€èµ·ç”Ÿæ´»åŠä¸ªæœˆçš„æœºä¼šã€‚äº²æˆšèµ°åŠ¨çš„æœºä¼šä¸å¤šï¼Œå¹³æ—¶æ²¡æœ‰æœºä¼šå»äº†è§£ä»–ä»¬ä¿ƒè¿›æ„Ÿæƒ…ï¼Œå…¨å‡­ç€è¡€ç¼˜çš„çº½å¸¦è”ç³»ç€ã€‚ä½†è¿™æ¬¡éš¾å¾—åœ°ååœ¨äº²æˆšå®¶é‡Œæœ‰äº†ä¸ä¸€æ ·çš„æ„Ÿå—ï¼Œæ„Ÿå—åˆ°æ—¥ä¹…ç”Ÿæƒ…ï¼ˆå¯èƒ½ç”¨è¯ä¸å½“ï¼Œä½†æ„æ€åˆ°äº†å‘¢ï¼‰ã€‚æœ‰å¤©ä¸­åˆï¼Œæˆ‘å§¨æœ‰äº‹å¤–å‡ºï¼Œæˆ‘è·Ÿè¡¨å¦¹ä¸€å—åšäº†åˆé¥­ï¼Œæ‰‹å¿™è„šä¹±ï¼Œåšå‡ºæ¥çš„é¥­å‘³é“ç«Ÿè¿˜ä¸é”™ï¼è€ƒè¿‡äº†ç§‘äºŒï¼Œæˆ‘ä¾¿å›äº†å®¶ã€‚æ¯å¹´è¿‡å¹´éƒ½å¾—ä¸‹ä¸€åœºé›ªï¼Œæœ‰åˆ°è„šè¸é‚£ä¹ˆåšï¼Œåˆ°å¤„éƒ½ç™½èŒ«èŒ«çš„ä¸€ç‰‡ã€‚æˆ‘æ‹¿ç€é“²å­å»å±‹é¡¶é“²é›ªï¼ŒèŠ±äº†ä¸¤ä¸ªåŠå¤©ï¼ŒæŠŠå±‹é¡¶ä¸Šçš„é›ªæ”¶æ‹¾åˆ°äº†é™¢å­é‡Œã€‚åªæ˜¯é‚£æ—¶å€™ç«Ÿæ²¡æœ‰å…´è‡´å †ä¸ªé›ªäººï¼Œä»Šå¤©å†¬å¤©åŒ—äº¬ä¸€ä¸é›ªéƒ½æ²¡æœ‰è½ï¼ŒçœŸæƒ³å›åˆ°å®¶èƒ½çœ‹ä¸€åœºé›ªå•Šã€‚é«˜ä¸­çš„ç­ä¸»ä»»è¿˜åœ¨å¸¦ç€é«˜ä¸‰çš„å­¦ç”Ÿï¼Œè¿‡äº†å¹´æ²¡å‡ å¤©é«˜ä¸‰çš„å­¦ç”Ÿä¾¿å¼€å­¦äº†ã€‚ç­ä¸»ä»»æƒ³ç€æˆ‘ç»™é«˜ä¸‰çš„åŒå­¦ä»¬èŠèŠå¤©ï¼Œè¯´â€œç°åœ¨çš„å­¦ç”Ÿéƒ½æ²¡æœ‰ä½ é«˜ä¸‰ä¸‹è‹¦â€ï¼Œæˆ‘å‹‰å¼ºç®—æ˜¯ä¸ªåˆ»è‹¦çš„ç¬¨å­©å­å§ã€‚åœ¨è€ç­å®¶é‡Œåƒäº†åˆé¥­ï¼Œä¸‹åˆä¾¿å›åˆ°æ›¾ç»çš„æ•™å®¤é‡Œï¼Œè·Ÿé«˜ä¸‰çš„åŒå­¦ä»¬èŠå¤©ã€‚æ—¶é—´åœ¨ä¸€å¤©ä¸€å¤©åœ°åº¦è¿‡ï¼Œæˆ‘ä»¬åœ¨ä¸€æ­¥ä¸€æ­¥åœ°å‘å‰èµ°å‘¢ï¼ å¤§å››ä¸‹ï¼Œå·²ç»æ²¡è¯¾äº†ï¼Œåªå‰©ä¸‹åšæ¯•ä¸šè®¾è®¡ã€‚æˆ‘åœ¨æ˜å¾·æ¥¼Båº§çš„äººæ‰åŠæ‰¾äº†ä¸€ä»½å‹¤å·¥ä¿­å­¦çš„å·®äº‹ï¼Œå¹³å¸¸çš„å·¥ä½œæ˜¯ç»™è€å¸ˆæ•´ç†æ–‡ä»¶ï¼Œæ‰“å°ï¼Œæ‹¿å¿«é€’å’Œæ‰“æ‰«å«ç”Ÿã€‚è¿™æ˜¯æ®µé—²é€‚åˆæƒ³ç€å……å®çš„æ—¥å­ï¼Œæƒ³ç€å¥½å¥½å®Œæˆæ¯•ä¸šè®¾è®¡ï¼Œæƒ³ç€å»åšå¤§å­¦é‡Œæƒ³åšè¿˜æ²¡åšçš„äº‹ï¼Œæƒ³ç€å»çœ‹å‡ æœ¬ä¹¦ï¼Œæƒ³ç€è·Ÿæœ‹å‹ä»¬å‘Šåˆ«ã€‚æˆ‘æ¯å¤©åœ¨è€å¸ˆçš„åŠå…¬å®¤é‡Œåšæ¯•è®¾ï¼Œä¸­åˆä¾¿åœ¨æ²™å‘ä¸Šç¡ä¸€ä¼šï¼Œç®—ä¸ä¸Šç‰¹åˆ«åŠªåŠ›ï¼Œåªæ˜¯æƒ³åœ¨å¤§å­¦æœ€åçš„å‡ ä¸ªæœˆé‡ŒæŠŠäº‹æƒ…åšå¥½ä¸€äº›ã€‚åŠå…¬å®¤çš„çª—å£æœ‰ä¸€äº›ç°å°˜ï¼Œçª—å°ä¸Šæœ‰çˆ¬å±±è™çš„è„šï¼Œçª—å¤–æœ‰è®¸å¤šæ ‘ã€‚é˜³å…‰ç…§è¿›æ¥ï¼Œæ ‘å½±å©†å¨‘çš„ï¼Œåƒæäº†å¤§å­¦æœ€åçš„è¿™æ®µæ—¥å­ã€‚å¤§å››ä¸‹ï¼Œæˆ‘å»åœ£æ˜†ä»‘éŸ³ä¹å…å¬äº†éŸ³ä¹ä¼šï¼Œåªå¬å¾—ä¸€åŠä¾¿æºœäº†å‡ºæ¥ï¼›ä¹Ÿåœ¨åœ£æ˜†ä»‘éŸ³ä¹å…çœ‹äº†è¯å‰§ã€Šèœ€é“éš¾ã€‹ï¼Œè™½ç„¶æœ‰ä¸€äº›ç‘•ç–µï¼Œä½†ä¾ç„¶ååˆ†ç²¾å½©ï¼Œéœ‡æ’¼äººå¿ƒï¼Œè®©æˆ‘é¢†ç•¥åˆ°äº†ç°åœºè¯å‰§çš„é­…åŠ›ï¼›æˆ‘å¸¸å»æ–‡ç†é¦†ä¸‰æ¥¼æ‰¾æ–‡å­¦ç±»çš„ä¹¦ï¼Œåœ¨åšæ¯•è®¾çš„é—²æš‡ç¿»çœ‹ã€‚è¯»äº†ç‹å°æ³¢å†™ç»™æé“¶æ²³çš„ä¿¡ï¼ŒçŸ¥é“çˆ±æƒ…ä¼šè®©äººç‰µè‚ æŒ‚è‚šï¼›è¯»äº†æ¨ç»›å…ˆç”Ÿçš„æ•£æ–‡é›†ï¼Œæˆ‘åŸå…ˆä»¥ä¸ºæ•£æ–‡é›†æ˜¯æ— è¶£çš„ï¼Œä½†è¯»äº†æ¨ç»›å…ˆç”Ÿçš„æ•£æ–‡é›†ï¼Œæ‰ä½“ä¼šåˆ°æœ´å®æ–‡å­—çš„åŠ¨äººä¹‹å¤„ã€‚å°¤å…¶å½“è¯»åˆ°æ¨ç»›å…ˆç”Ÿå†™æ–‡é©æœŸé—´å¥³å©¿è¢«çº¢å«å…µæ‰“æ­»ï¼Œçˆ¶äº²å»ä¸–å´å¥”ä¸§ä¸æˆï¼Œè‡ªå·±è¢«åˆ†é…åˆ°å•æ‰€åˆ·é©¬æ¡¶è¿™äº›æƒ…èŠ‚ï¼Œå°±å¥½åƒåœ¨è®²è¿°ä¸€äº›ç”Ÿæ´»ä¸­çš„å°äº‹ã€‚ä¹Ÿçœ‹åˆ°æ¨ç»›å…ˆç”Ÿå»èœå›­æ‰¾é’±é’Ÿä¹¦æ—¶æµéœ²å‡ºçš„ä¸éš¾å¯Ÿè§‰çš„çˆ±æ„å’Œåœ¨è‹¦éš¾ä¸­çš„å¹½é»˜æ„Ÿã€‚ æ¨ç»›å…ˆç”Ÿå’Œå¥¹çš„å¥³å„¿é’±ç‘—ã€ä¸ˆå¤«é’±é’Ÿä¹¦ è½¦åæ˜¯æˆ‘å¤§å­¦å››å¹´æœ€é‡è¦çš„åœ°æ–¹å§ï¼Œä¹Ÿæ˜¯æˆ‘å¤§å­¦å½’å±æ„Ÿçš„æ¥æºã€‚åœ¨æœ€åè¿™åŠå¹´é‡Œï¼Œåœ¨å‘¨äºŒå‘¨å››çš„æ™šä¸Šå‚åŠ äº†è®¸å¤šæ¬¡çš„ä½“è®­ï¼Œå‘¨ä¸€å‘¨ä¸‰å‘¨äº”ä¹Ÿå¶å°”è·Ÿç€å¤§å®¶éª‘è½¦å»æ€ªå¡ã€‚æœ€åè¿˜å‚åŠ äº†å‡ æ¬¡å°å‡æœŸçš„æ‹‰ç»ƒï¼šâ€œæ”¾ç«çƒ§å±±ï¼Œç‰¢åº•åç©¿â€ï¼Œé»„å·¢çš„ç¯ç«æ²¡æœ‰çƒ§èµ·æ¥ï¼Œä½†å¿ƒé‡Œçš„ç¯ç«ä¸æ›¾ç†„ç­ï¼Œ\"èšæ˜¯ä¸€å›¢ç«ï¼Œæ•£ä½œæ»¡å¤©æ˜Ÿ\"ï¼›â€œæ¸…æ˜æ‹‰ç»ƒâ€å»çœ‹äº†éé‡çš„æ²¹èœèŠ±ï¼Œå¤§ä¸€ç¬¬ä¸€æ¬¡å‚åŠ æ‹‰ç»ƒä¹Ÿæ˜¯æ¸…æ˜æ‹‰ç»ƒå‘¢ï¼›äº”ä¸€æ˜¯è¯ä¹¡é€‰æ‹”ï¼Œæ–°çš„è¿œå¾é˜Ÿåˆå°†è¸©ç€å•è½¦ç”¨è½¦è½®ä¸ˆé‡ç¥–å›½çš„å¤§å¥½æ²³å±±ï¼å¿«è¦ç¦»å¼€çš„æ—¶å€™ï¼Œæƒ³ç€è¦åšä¸€äº›äº‹ï¼Œæ¯”å¹³æ—¶æ›´ç”¨å¿ƒäº›ã€‚å©·å©·æå‡ºè¦åŠä¸€ä¸ªè½¦åçš„\"è€ƒç ”ã€ä¿ç ”ã€å·¥ä½œäº¤æµä¼š\"ï¼Œä½†å¥¹å› ä¸ºè¦å·¥ä½œæå‰ç¦»æ ¡äº†ï¼Œæˆ‘æ¥è¿‡è¿™ä¸ªæ´»ï¼Œè·Ÿè½¦åçš„ä¼™ä¼´ä¸€èµ·åŠäº†è¿™ä¸ªäº¤æµä¼šã€‚åœ¨åŒ—äº¬æ¯”èµ›ä¹‹å‰ï¼Œæˆ‘æƒ³èµ·äº†å‰ä¸¤å¹´ç»™äº¬èµ›é˜Ÿå‘˜åŠ æ²¹çš„ç«è…¿è‚ ï¼Œä»Šå¹´è¯¥æ˜¯æˆ‘äº†å§ï¼å¤§å­¦çš„è®¸å¤šç”Ÿæ´»éƒ½ä¸è½¦åç›¸å…³ï¼Œå¤§å­¦è®¸å¤šæœ‹å‹éƒ½æ˜¯è½¦åçš„ä¼™ä¼´ã€‚æˆ‘ä¼¼ä¹æ²¡ç»™ç•™ä¸‹äº›ä»€ä¹ˆï¼Œä½†ä¸€åŒç»å†å°±æ˜¯æ„ä¹‰å•Šï¼ 16å¹´é»„å·¢æ‹‰ç»ƒçš„ç¯ç« å¤§å­¦æœ€åçš„å°¾å£°æ˜¯åœ¨æ‹æ¯•ä¸šç…§å’Œé€è€ä¼šä¸­è¿›è¡Œçš„ã€‚ç»ˆäºç©¿ä¸Šé‚£ä¸€èº«å¹¼æ—¶æ†§æ†¬çš„æ¯•ä¸šæœï¼Œæ‹å­¦é™¢é‡Œçš„æ¯•ä¸šç…§ï¼Œæ‹ç­çº§é‡Œçš„æ¯•ä¸šç…§ã€‚ä¹Ÿæ‹åä¼šé‚£ä¸€ç¾¤äººçš„æ¯•ä¸šç…§ï¼Œå°æ ‘æ—ï¼Œå—é—¨å¤–ï¼Œè‡§å…‹å®¶å’Œé—»ä¸€å¤šçš„é›•åƒæ—ï¼Œæ›¾ç»æœå¤•ç›¸å¤„ï¼Œä»Šæ—¥ä¾¿è¦ç¦»ä¹‹è€Œå»ã€‚åœ¨è½¦åçš„é€è€ä¼šä¸Šï¼Œæˆ‘ä»¥ä¸ºæˆ‘ä¸ä¼šå“­çš„ï¼Œä¸¤å¹´è¿œå¾éƒ½æ²¡æœ‰å“­ï¼Œåªæ˜¯æœªæ›¾å¦å¼€å¿ƒæ‰‰ï¼Œåœ¨é€è€ä¼šä¸Šï¼Œå¹³æ—¶è¯ä¸å¤šçš„æˆ‘ä¹Ÿä¸çŸ¥å“ªæ¥é‚£ä¹ˆå¤šçš„è¯å’Œçœ¼æ³ªã€‚å˜¿ï¼Œæ¯•ä¸šå¿«ä¹ï¼ï¼ï¼ æš‘æœŸ - ç›®çš„åœ°åœ¨å°¼æ³Šå°”çš„æ–°è—çº¿å¤§å­¦æ¯•ä¸šåï¼Œè¶ç€å¹´è½»åŠ›å£®å»éª‘äº†æ–°è—çº¿ã€‚æ—¶é—´è·¨åº¦æ˜¯7æœˆ21æ—¥åˆ°8æœˆ28æ—¥è¿‘å››åå¤©çš„æ—¶é—´ã€‚å…ˆåç«è½¦ä»åŒ—äº¬åˆ°å¶åŸï¼Œä¸­é€”åœ¨åé²ç•ªè½¬è½¦ï¼Œä»ç¥–å›½çš„ä¸œè¾¹åˆ°æœ€è¥¿è¾¹ã€‚éª‘è½¦çš„è·¯æ®µæ˜¯â€œå–€ä»€-è¨å˜å¿-å‰éš†å£å²¸-åŠ å¾·æ»¡éƒ½â€ã€‚è¿”ç¨‹æ˜¯è´¹å°½å‘¨æŠ˜çš„ï¼Œå…ˆåå‰æ™®è½¦ä»åŠ å¾·æ»¡éƒ½å›å›½åˆ°åŸºéš†å£å²¸ï¼Œå†åšå¤§å·´è½¦åˆ°æ—¥å–€åˆ™ï¼Œå†åç«è½¦â€œæ—¥å–€åˆ™-é’æµ·è¥¿å®-é™•è¥¿è¥¿å®‰-å±±è¥¿ä¸´æ±¾â€ï¼Œä»é™†åœ°å›å®¶çš„æˆæœ¬è™½ç„¶åªæœ‰æœºç¥¨é’±çš„ä¸€åŠï¼Œä½†èŠ±äº†æ•´æ•´äº”å¤©ã€‚ä¹‹å‰æœ‰è¿‡éª‘è½¦å‡ºå›½é—¨çš„æƒ³æ³•ï¼Œä½†ä¸æ˜¯ååˆ†ç¬ƒå®šçš„ã€‚æ—ºå“¥åœ¨è®ºå›ä¸Šå‘å¸–å¾æ–°è—çº¿çš„é˜Ÿå‹ï¼Œæˆ‘æ¯…ç„¶åœ°å›äº†è´´ã€‚åŸå…ˆè®¡åˆ’çš„æ–°è—çº¿å°é˜Ÿæœ‰æˆ‘ã€æ—ºå“¥å’Œå®‡å“¥ä¸‰ä¸ªäººï¼Œåæ¥å®‡å“¥å› ä¸ºå…¥èŒæ²¡èƒ½æˆè¡Œã€‚æ–°è—çº¿æ˜¯ä¸€æ¡æ¯”å·è—çº¿è¦éš¾çš„è·¯çº¿ï¼Œæˆ‘æ¯å¤©æ™šä¸Šè·‘æ­¥äº”å…¬é‡Œæ¥åšä½“åŠ›å‚¨å¤‡ï¼Œæœ‰æ—¶å€™ä¹Ÿå·æ‡’ï¼›åœ¨ç¾éª‘ç½‘ä¸Šçœ‹åˆ«äººçš„è·¯ä¹¦å’Œéª‘è¡Œæ¸¸è®°ï¼Œåšäº†è‡ªå·±çš„è·¯ä¹¦å’Œæ”»ç•¥ã€‚ç‰¹åœ°å›è€å®¶åŠäº†æŠ¤ç…§å’Œè¾¹é˜²è¯ï¼ŒåŠè¾¹é˜²è¯çš„è¿‡ç¨‹è´¹äº†ä¸€äº›å‘¨æŠ˜ï¼ŒåŠè¾¹é˜²è¯éœ€è¦ä¸€ä»½å°é¢†å¯¼å†™ä¸ªåå­—ï¼Œä½†ä»–åˆä¸æ¥ä¸Šç­ï¼ŒèŠ±äº†å‡ å¤©æ‰ç»ˆäºåŠå¥½äº†ã€‚åˆåœ¨åŒ—äº¬çš„å°¼æ³Šå°”å¤§ä½¿é¦†åŠäº†ç­¾è¯ï¼Œå‡†å¤‡åœ°å·®ä¸å¤šåªç­‰å‡ºå‘äº†ã€‚ 7æœˆ21æ—¥ï¼Œåç«è½¦ä»åŒ—äº¬å‡ºå‘ï¼Œåäº†38ä¸ªå°æ—¶çš„ç¡¬åº§åˆ°äº†åé²ç•ªï¼Œå†å19ä¸ªå°æ—¶çš„ç¡¬åº§åˆ°æ–°ç–†å–€ä»€åœ°åŒºå–€ä»€å¸‚è·Ÿæ—ºå“¥ä¼šåˆã€‚å…¨å›½ç”¨çš„éƒ½æ˜¯åŒ—äº¬æ—¶é—´ï¼Œå› æ­¤åˆ°æ™šä¸Šä¹ç‚¹ï¼Œå–€ä»€çš„å¤©è¿˜æ˜¯äº®çš„ã€‚ç•¥ä½œä¿®æ•´ï¼Œä¾¿åˆ°äº†å¼€å§‹æ¯å¤©çš„éª‘è¡Œã€‚ç¬¬ä¸€å¤©çš„éª‘è¡Œå°±å·®ç‚¹è¦äº†è€å‘½ï¼Œä¸€æ˜¯ç¬¬ä¸€å¤©çš„è·¯ç¨‹è¿œï¼Œåˆæœ‰å¾ˆå¤§çš„é€†é£ï¼Œæ™šä¸Šåˆ°å®¾é¦†å·²ç»ç´¯åœ°å¿«è™šè„±äº†ã€‚æ–°è—çº¿å‰å‡ å¤©çš„è·¯æ˜¯æ¯”è¾ƒå¹³å¦çš„ï¼Œæµ·æ‹”ä¸Šå‡ä¸å¤ªå¤§ã€‚éª‘è½¦çš„ç¬¬å››å¤©æˆ‘é‡åˆ°ä¸€ä¸ªè‡´å‘½çš„é—®é¢˜ï¼Œå·®ç‚¹å¯¼è‡´æˆ‘çš„æ–°è—çº¿éª‘è¡ŒåŠè·¯å¤­æŠ˜ã€‚æˆ‘è‡ªè¡Œè½¦åè½®çš„èŠ±é¼“åœ¨ä¸€ä¸ªå°æ‘å­é˜¿å…‹ç¾å…¶ç‰¹æ‘é‡Œæ–­äº†ï¼Œå°æ‘å­é‡Œè¿å»åŸé‡Œçš„å…¬äº¤è½¦éƒ½æ²¡æœ‰ï¼Œå®Œå…¨ä¸å¯èƒ½ä¿®ç†ã€‚æˆ‘è·Ÿæ—ºå“¥å•†è®®ï¼Œæ—ºå“¥ç»§ç»­éª‘è½¦åˆ°ä¸‹ä¸ªåœ°ç‚¹è¡¥ç»™æ›´æ–¹ä¾¿çš„åº“åœ°è¾¾å‚ç­‰æˆ‘ï¼Œæˆ‘è¿”å›å¶åŸå»ä¿®è½¦ã€‚æˆ‘æ‹†äº†è‡ªè¡Œè½¦çš„åè½®ï¼Œæ‘é‡Œçš„æ‘å¹²éƒ¨å¼€è½¦é€æˆ‘åˆ°äº†é•‡ä¸Šï¼Œæˆ‘åœ¨é•‡ä¸Šåäº†ä¸ªå‡ºç§Ÿè½¦è¿”å›äº†å¶åŸã€‚ä¸ºäº†èŠ‚çœæ—¶é—´ï¼Œæˆ‘æ²¡å»æ›´è¿œæ›´å¤§çš„å–€ä»€å¸‚å»ä¿®ç†ï¼Œåªåœ¨å¶åŸæ‰¾äººä¿®ç†ï¼Œè¿™ç»™æˆ‘åæ¥çš„ä¸å¹¸åŸ‹ä¸‹äº†éšæ‚£ã€‚åœ¨å¶åŸæ‰¾äº†ä¸€ä¸ªä¸é è°±çš„å•è½¦ä¿®ç†åº—ç»™æˆ‘ä¿®ç†åè½®ï¼Œä¿¡èª“æ—¦æ—¦åœ°åè½¦å›åˆ°é˜¿å…‹ç¾å…¶ç‰¹æ‘ï¼Œç»“æœéª‘äº†ä¸åˆ°äºŒå…¬é‡Œï¼Œè‡ªè¡Œè½¦çš„åè½®åˆåäº†ï¼Œæ˜¯æ ¹æœ¬æ²¡æœ‰ä¿®ç†å¥½ã€‚æ‚”ä¸è¯¥æ€é‚£åä½—ï¼æˆ‘ç»ˆäºä¸‹å®šå†³å¿ƒè€è€å®å®åœ°å»å–€ä»€æ‰¾æ·å®‰ç‰¹ä¸“å–åº—ä¹°äº†è½®å­ï¼Œåˆæ˜¯è‰°éš¾çš„äº¤é€šï¼Œå…ˆåœ¨è·¯è¾¹æ­å›åŸé‡Œçš„é¡ºé£è½¦ï¼Œå†åç«è½¦åˆ°å–€ä»€ï¼Œä¹°å¥½è½®å­ï¼Œå†åç«è½¦è¿”å›å¶åŸï¼Œæœ€åæ­äº†è®¸å¤šè½¦ï¼ˆç§å®¶è½¦ï¼Œå¤§å¡è½¦ï¼‰ç»ˆäºå›åˆ°é˜¿å…‹ç¾å…¶ç‰¹æ‘ã€‚æˆ‘ä¿®ç†å¥½è½¦ï¼Œæˆ˜æˆ˜å…¢å…¢çš„å‡ºå‘äº†ï¼Œå°å¿ƒç¿¼ç¿¼åœ°ï¼Œç”Ÿæ€•è½®å­å†å‡ºå¹ºè›¾å­ã€‚æ‰€å¹¸åé¢ä¸€è·¯ä¸Šéƒ½æ²¡å†å‡ºä»€ä¹ˆå¤§é—®é¢˜ï¼Œè¿™ä¸€æ¬¡å°±å¤Ÿæˆ‘æŠ˜è…¾çš„äº†ï¼Œååå¤å¤å¼„å¼„ä¸‰å¤©ã€‚ä»¥è‡´äºæˆ‘æƒ³è¦ä¸è½¦å­ä¹Ÿä¸è¦äº†ï¼Œä¹°å¼ ç¥¨å›å®¶å§ï¼ç°åœ¨å›è¿‡å¤´æ¥çœ‹ï¼Œæ‰€å¹¸åšæŒäº†ä¸‹æ¥ã€‚ éª‘è¡Œåœ¨æ–°è—çº¿ä¸Š æ–°è—çº¿å¹¿è¢¤è’èŠœï¼Œå¾ˆå°‘æœ‰é«˜çš„æ ‘ï¼Œå½“ä½ çœ‹åˆ°é«˜å¤§çš„æ¨æ ‘å’Œç»¿è‰²çš„æ¤ç‰©ï¼Œå°±è¯´æ˜é™„è¿‘æœ‰æ°´æºï¼Œæ­¤å¤„æœ‰äººçƒŸã€‚æ–°è—çº¿ä¸Šæ˜¯ä¸€æ¡è¿æ¥æ–°ç–†ä¸è¥¿è—çš„çº½å¸¦ï¼Œæœ‰è®¸å¤šè·‘æ–°è—çº¿çš„å¤§å¡è½¦å¸æœºã€‚æ­è½¦çš„æ—¶å€™è·Ÿå‡ ä½å¸æœºèŠå¤©ï¼Œå¸æœºå¸ˆå‚…å¤§å¤šæ˜¯å±±è¥¿æ²³å—çš„ï¼Œæ±‰æ—äººå¤šï¼Œè—æ—å°‘ã€‚åœ¨æ–°è—çº¿ä¸Šè·‘å¤§å¡è½¦ï¼Œå°±æ˜¯åœ¨æ‹¿å‘½æŒ£é’±ï¼Œé«˜åŸååº”å’Œç–²åŠ³é©¾é©¶ï¼Œä¸€ä¸ªä¸å°å¿ƒå°±æ˜¯è½¦æ¯äººäº¡ã€‚æ–°è—çº¿è·¯è¾¹ä¼šå¸¸çœ‹å¾—åˆ°ç¿»å€’åœ¨è·¯è¾¹çš„å¤§å¡è½¦ï¼Œæœ‰çš„ç”·äººå¸¦ç€å¦»å­æ¥è·‘è½¦ï¼Œå‡ºäº†äº‹ä¸€å®¶å­å°±æ²¡äº†ï¼Œå‰©ä¸ªå­©å­è·Ÿç€çˆ·çˆ·å¥¶å¥¶ã€‚æ–°è—çº¿æœ‰é™¤äº†è¸©å•è½¦çš„ï¼Œè¿˜æœ‰éª‘æ‘©æ‰˜è½¦çš„ï¼Œè‡ªé©¾æ¸¸çš„ã€‚å¸¸çœ‹å¾—åˆ°è‡ªé©¾æ¸¸çš„å¤§å¦ˆæŠ«ç€ä¸å·¾æ‹ç…§ã€‚å°è·¯çš„æ—¶å€™ï¼Œè‡ªé©¾æ¸¸çš„è½¦å¤¹æ‚ç€æ‹‰æ°´æ³¥æ‹‰è´§çš„å¤§å¡è½¦é•¿é•¿åœ°æ’ç€é˜Ÿã€‚ä¸€è·¯ä¸Šçš„æ¯”è¾ƒå¤§çš„å®¢æ ˆæ—…åº—ï¼Œå¤§éƒ½æ˜¯æ±‰æ—äººå¼€çš„ï¼Œå››å·äººå¾ˆå¤šï¼Œå››å·äººå‹¤åŠ³æ•¢æ‹¼ï¼Œæ–°ç–†è¥¿è—åˆ°å¤„å¯è§åˆ°ä»–ä»¬çš„èº«å½±ã€‚æ–°è—çº¿è¿™æ¡é•¿é•¿çš„è·¯ä¸Šï¼Œæ•´æ•´é½é½è®­ç»ƒæœ‰ç´ çš„å†›è½¦æ˜¯ä¸€é“é“ä¸½çš„é£æ™¯ï¼Œè®©äººæ„Ÿå¹â€œå¥½ç”·å„¿å°±è¦å½“å…µï¼Œä¿å®¶å«å›½â€ã€‚æ–°è—çº¿ä¸Šï¼Œæœ‰äººçš„åœ°æ–¹å°±æœ‰ä¼—ç”Ÿç›¸ã€‚åˆ°äº†è¨å˜å¿ä¹‹åï¼Œæˆ‘ä»¬å››äººè¦åˆ†é“æ‰¬é•³äº†ï¼Œæˆ‘ä¸€è·¯å‡ºå‰éš†å£å²¸åˆ°åŠ å¾·æ»¡éƒ½ï¼Œä»–ä»¬ä¸‰äººä¸€è·¯ã€‚æ—ºå“¥å…ˆå»ç å³°å¤§æœ¬è¥å†å»æ‹‰è¨ï¼Œé‚“ç¿±å’Œè´¤å¼Ÿå…ˆå»ç å³°å¤§æœ¬è¥å†å»åŠ å¾·æ»¡éƒ½ã€‚è¨å˜å¿åˆ°å‰éš†å¿çš„è·¯æ˜¯éå¸¸éš¾èµ°çš„ï¼Œæ²¡æœ‰ç¡¬å®çš„æŸæ²¹è·¯ï¼Œåªæœ‰ä¸‹é›¨åæ³¥æ³çš„æ³¥è·¯ã€‚åç±³å®½çš„æ°´å‘ï¼Œæˆ‘è„±äº†é‹å­æŒ‚åœ¨è½¦æŠŠä¸Šï¼Œæ¨ç€è½¦è¶Ÿè¿‡å»ã€‚æ³¥æ³çš„è·¯ï¼Œä¸€è„šä¸€è„šçš„è¸©è¸ç€ï¼Œè½¦è½®ä¸Šæ»šæ»¡äº†æ³¥å·´ï¼Œåƒæ˜¯ç‚¸é…¥è‚‰å‰ç»™è‚‰è£¹ä¸Šåšåšçš„é¢ã€‚é¡¶ç€ä¸‹åˆåˆ®ä¸ªä¸åœçš„å·¨å¤§çš„é€†é£ï¼Œé•¿é•¿çš„ä¸Šå¡ï¼Œæˆ‘å†ä¹Ÿæ²¡æœ‰äº†ç»ä¸æ¨è½¦çš„åšæŒã€‚é‡åˆ°éš¾çˆ¬çš„ä¸Šå¡ï¼Œå°±ä¸‹æ¥æ¨ç€è½¦èµ°ä¸€æ®µå†éª‘è½¦ã€‚å¤§é£å’Œæ³¥å·´è·¯ï¼Œéª‘äº†ä¸€æ•´å¤©åªèµ°äº†äº”åå…¬é‡Œï¼Œçœ¼çœ‹å°±è¦éœ²å®¿é‡å¤–è€Œå¸ç¯·æ—©å¯„èµ°äº†ï¼Œç»ˆäºçœ‹åˆ°ä¸€ä¸ªå¤§å¤§çš„æ–½å·¥è¥åœ°ï¼Œåƒæ˜¯æººæ°´çš„äººæŠ“ä½ä¸€æ ¹æ•‘å‘½ç¨»è‰ã€‚è¥åœ°é‡Œä¸ƒå…«ä¸ªè¥¿å®‰çš„çˆ·ä»¬æ”¶ç•™äº†æˆ‘ä¸€å®¿ï¼Œåº¦è¿‡äº†å±æœºã€‚åˆ°äº†åŸºéš†å£å²¸ï¼Œæˆ‘æ¢å¥½å°¼å¸ï¼Œç»è¿‡ä¸­å›½æµ·å…³ï¼Œå‡ºäº†å›½é—¨ã€‚å°¼æ³Šå°”çš„è·¯æ‰æ˜¯çœŸçš„çƒ‚è·¯ï¼ŒçŸ³å¤´è·¯ï¼Œæ³¥è·¯ï¼Œå±±ä½“æ»‘å¡å°è·¯éƒ½æ˜¯å®¶å¸¸ä¾¿é¥­ï¼Œå¶å°”èƒ½çœ‹åˆ°ä¸€æ®µæŸæ²¹è·¯ä¾¿å¼€å¿ƒåœ°ä¸è¡Œã€‚å°¼æ³Šå°”çš„è·¯æ˜¯ä¸æ¨èéª‘è‡ªè¡Œè½¦çš„ã€‚å°¼æ³Šå°”æ˜¯å±±åœ°é‡Œçš„å›½å®¶ï¼Œè¾ƒå¤§çš„åŸé•‡éƒ½åˆ†å¸ƒåœ¨å¹³å¦çš„æ²³è°·åœ°ã€‚æˆ‘ä¹°äº†å°¼æ³Šå°”çš„ç”µè¯å¡ï¼Œä½†æ˜¯ç”¨ä¸äº†ç½‘ç»œï¼Œä¸èƒ½çœ‹è°·æ­Œåœ°å›¾ã€‚æˆ‘åªèƒ½ä¸€è¾¹èµ°ï¼Œä¸€è¾¹ç”¨è¹©è„šçš„è‹±è¯­é—®è·¯â€œè¿™æ¡è·¯æ˜¯åˆ°åŠ å¾·æ»¡éƒ½å—ï¼Ÿâ€ï¼›å°¼æ³Šå°”å¹´è½»äººå¤§å¤šä¼šè¯´è‹±è¯­ï¼Œå¶å°”å‡ ä¸ªä¼šè¯´æ±‰è¯­ã€‚åœ¨çƒ‚è·¯é‡Œèµ°äº†ä¸¤å¤©ï¼Œæˆ‘ä»–å¨˜çš„ç»ˆäºåˆ°äº†åŠ å¾·æ»¡éƒ½ï¼Œåœ¨æ³°ç±³å°”åŒºè§åˆ°äº†ä¸­å›½äººå’Œä¸­å›½åº—é“ºï¼Œæ¿€åŠ¨åœ°ä¸è¡Œã€‚åªè¦æœ‰å‡ºå‘çš„å‹‡æ°”ï¼Œå°±ä¸€å®šä¼šåˆ°è¾¾ï¼æˆ‘ç»ˆäºåˆ°äº†åŠ å¾·æ»¡éƒ½ï¼ åœ¨å±±å¡ä¸Šä¿¯ç°åŠ å¾·æ»¡éƒ½ æ–°è—çº¿ä¸€è·¯ä¸Šç›–äº†ä¸€äº›é‚®æˆ³ï¼Œä½†å¹¶ä¸å¤šã€‚éª‘è½¦çš„é—´éš™ï¼ŒæŠ½ç©ºç»™15å’Œ16è¿œå¾é˜Ÿçš„é˜Ÿå‹å’Œä¸€äº›è€å‹å¯„å»äº†æ˜ä¿¡ç‰‡ï¼Œç°åœ¨æœ‰äº›æ˜ä¿¡ç‰‡å¯„åˆ°äº†ï¼Œæœ‰äº›å¯„ä¸¢äº†ã€‚æˆ‘å¯„ç»™è‡ªå·±çš„ä¸¢åœ¨è·¯ä¸Šäº†ï¼Œå°±è®©ä»–ä»£æ›¿æˆ‘åœ¨è·¯ä¸Šé£˜è¡å§ï¼éª‘å®Œæ–°è—çº¿æ˜¯ä¸€ä»¶äº†ä¸èµ·çš„äº‹ï¼Œæ˜¯ä¸€ä»¶æœ‰æ„ä¹‰çš„äº‹ã€‚ ä¸‹åŠå¹´ - ç ”ç©¶ç”Ÿçš„æ—¥å­æš‘å‡ï¼Œåœ¨å»æ–°è—çº¿ä¹‹å‰æ¥äº†è¯»ç ”çš„å­¦æ ¡ä¸Šäº†ä¸‰å‘¨çš„æš‘æœŸè¯¾ç¨‹ï¼Œã€Šæœºå™¨å­¦ä¹ ã€‹å’Œã€Šå‡¸ä¼˜åŒ–ã€‹ã€‚9æœˆåˆå¼€å­¦æ­£å¼å¼€å§‹äº†ç ”ç©¶ç”Ÿç”Ÿæ´»ã€‚ä¹‹å‰æˆ‘æœ‰ä¸€ä¸ªé”™è¯¯çš„è®¤è¯†ï¼Œè®¤ä¸ºç ”ç©¶ç”Ÿç”Ÿæ´»åº”è¯¥å®Œå…¨èˆå¼ƒæ‰è‡ªè¡Œè½¦ï¼Œå› ä¸ºä¹‹å‰éª‘è½¦å¤ªå¤šäº†å§ã€‚åæ¥ï¼Œæˆ‘è®¤è¯†åˆ°ç”Ÿæ´»éœ€è¦balanceï¼Œä¸èƒ½åªæ˜¯å­¦ä¹ ï¼Œè¦è®©éª‘è½¦å’Œå¨±ä¹æˆä¸ºç”Ÿæ´»é‡Œç§¯æçš„ä¸€éƒ¨åˆ†ã€‚æ¥äº†åŒ—äº¬ä¹‹åï¼Œå‡ºå»ç©çš„æ¬¡æ•°å¹¶ä¸å¤šã€‚è®­è¶…éª‘è½¦ä»æµå—åˆ°åŒ—äº¬ï¼Œæ¥æˆ‘å®¿èˆä½äº†ä¸€æ™šï¼Œæˆ‘è·Ÿä»–ä¸€å—å»äº†æ•…å®«ã€‚å›½åº†èŠ‚é‚£å¤©ï¼Œæ—ºå“¥æ¥åŒ—äº¬è½¬è½¦ï¼Œæˆ‘å’Œè®­è¶…æ—©æ—©åœ°å»çœ‹å‡æ——ï¼Œç»™æ—ºå“¥æ¥é£æ´—å°˜ã€‚åæ¥çº¦ç€åœ¨åŒ—äº¬è¯»ä¹¦å·¥ä½œçš„é«˜ä¸­åŒå­¦èšäº†ä¸€æ¬¡ã€‚å‘¨æœ«éª‘äº†ä¸¤æ¬¡è½¦ï¼Œå»äº†å¢æ²Ÿæ¡¥å’Œé¦™å±±å…¬å›­æ—çš„è¥¿å±±å›½å®¶æ£®æ—å…¬å›­ã€‚ç ”ä¸€ä¸Šï¼Œè¿˜æœ‰ä¸€äº›è¯¾è¦ä¿®ã€‚é™¤äº†ä¸Šè¯¾ï¼Œå…¶ä»–æ—¶é—´æ˜¯å¾…åœ¨å®éªŒå®¤é‡Œï¼Œçœ‹è®ºæ–‡ï¼Œå†™ä»£ç ã€‚å‰æœŸï¼Œæ„Ÿè§‰æœ‰è®¸å¤šéœ€è¦å­¦ä¹ çš„ä¸œè¥¿ï¼Œæ€»èƒ½æ—©æ—©åœ°èµ·åºŠã€‚åæ¥æ„Ÿè§‰ä¸åˆ°è‡ªå·±çš„è¿›æ­¥ï¼Œæœ‰äº›é™·å…¥è¿·èŒ«ï¼Œä¸çŸ¥é“è¯¥åšäº›ä»€ä¹ˆï¼Œå°±å¤±å»äº†åŠ²å¤´ï¼Œèµ·åºŠæ—¶é—´æ™šäº†è®¸å¤šã€‚æˆ‘æ‰¾äº†ä¸€ä¸ªè¾…å¯¼è€ƒç ”ä¸“ä¸šè¯¾çš„å·®äº‹ï¼Œæ¯å‘¨æœ«è¾…å¯¼ä¸€ä¸ªåŠå°æ—¶ï¼Œã€Šé€šä¿¡åŸç†ã€‹å·²ç»å¤§åŠå¹´æ²¡çœ‹è¿‡äº†ï¼Œä½†ä¸Šæ‰‹ç®€å•çœ‹ä¸€éå°±èƒ½æƒ³èµ·æ¥é‚£äº›çŸ¥è¯†ç‚¹ã€‚å¦ˆå¦ˆç”Ÿæ—¥é‚£å¤©ï¼Œæˆ‘ä¹°äº†ä¸€åªå¤©é¹…é¡¹é“¾åšç”Ÿæ—¥ç¤¼ç‰©ã€‚å¼Ÿå¼Ÿç”Ÿæ—¥é‚£å¤©ï¼Œæˆ‘ç»™ä»–å‘äº†çº¢åŒ…ï¼Œä»–æ²¡é¢†è¯´è‡ªå·±æœ‰é’±ã€‚çˆ¸çˆ¸ä»Šå¤©ç”Ÿæ—¥ï¼Œæˆ‘é¼“åŠ¨èº«è¾¹çš„æœ‹å‹ç»™è€çˆ¸å‘äº†ç¥ç¦çš„çŸ­ä¿¡ã€‚2019å¹´ï¼Œå¸Œæœ›å¯ä»¥æ›´åŠ å‹‡æ•¢å’Œæ›´åŠ ç§¯æåœ°é¢å¯¹ç”Ÿæ´»é‡Œçš„å˜åŒ–ã€‚ä½ å¥½ï¼Œ2019ï¼","categories":[{"name":"å¹´åº¦æ€»ç»“","slug":"å¹´åº¦æ€»ç»“","permalink":"http://yoursite.com/categories/å¹´åº¦æ€»ç»“/"}],"tags":[{"name":"å¹´åº¦æ€»ç»“","slug":"å¹´åº¦æ€»ç»“","permalink":"http://yoursite.com/tags/å¹´åº¦æ€»ç»“/"},{"name":"ç”Ÿæ´»è®°å½•","slug":"ç”Ÿæ´»è®°å½•","permalink":"http://yoursite.com/tags/ç”Ÿæ´»è®°å½•/"}]},{"title":"ç”¨Hexo+Next+github pageæ­å»ºä¸ªäººåšå®¢","slug":"ç”¨hexoæ­å»ºä¸ªäººåšå®¢","date":"2019-01-13T02:08:31.000Z","updated":"2019-07-22T00:33:50.000Z","comments":true,"path":"2019/01/13/ç”¨hexoæ­å»ºä¸ªäººåšå®¢/","link":"","permalink":"http://yoursite.com/2019/01/13/ç”¨hexoæ­å»ºä¸ªäººåšå®¢/","excerpt":"Hexoæ˜¯ä¸€ä¸ªç®€æ´æ¼‚äº®çš„åšå®¢æ¡†æ¶ï¼Œç”¨æ¥ç”Ÿæˆé™æ€ç½‘é¡µã€‚æœ¬æ–‡ä»‹ç»ä½¿ç”¨hexoæ­å»ºåšå®¢ã€‚","text":"Hexoæ˜¯ä¸€ä¸ªç®€æ´æ¼‚äº®çš„åšå®¢æ¡†æ¶ï¼Œç”¨æ¥ç”Ÿæˆé™æ€ç½‘é¡µã€‚æœ¬æ–‡ä»‹ç»ä½¿ç”¨hexoæ­å»ºåšå®¢ã€‚ å‡†å¤‡ï¼šå®‰è£…Hexoå®‰è£…å‰æåœ¨å®‰è£…Hexoä¹‹å‰ï¼Œåº”å…ˆå®‰è£…ä»¥ä¸‹åº”ç”¨ç¨‹åºï¼š Node.js Git å®‰è£…Gitå¯¹Linux(ubuntu,debian) 1sudo apt-get install git-core å®‰è£…Node.js1wget -qO- https://raw.github.com/creationix/nvm/v0.33.11/install.sh | sh å®‰è£…å®Œæˆåï¼Œéœ€è¦é‡å¯ç»ˆç«¯å†æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 1nvm install stable å®‰è£…Hexoå®‰è£…å¥½Gitå’ŒNode.jsåï¼Œä½¿ç”¨npmå®‰è£…Hexo: 1npm install -g hexo-cli hexoå¸¸ç”¨å‘½ä»¤ hexo init #ç”¨äºæ–°å»ºä¸€ä¸ªç½‘ç«™ hexo new #åœ¨ç«™ç‚¹æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼Œä»¥/scaffolds/post.mdä¸ºæ¨¡æ¿ï¼Œåˆ›å»ºä¸€ç¯‡æ–°çš„æ–‡ç« ã€‚æ–°å»ºæ–‡ç« å­˜æ”¾åœ¨/source/_postsä¸‹ã€‚ hexo generate ç®€å†™ä¸º hexo g #ç”Ÿæˆé™æ€ç½‘é¡µ hexo server ç®€å†™ä¸º hexo s #å¯åŠ¨æœåŠ¡å™¨ï¼Œé»˜è®¤è®¿é—®ç½‘å€ä¸ºhttp://localhost:4000/ hexo clean #ç”¨äºæ¸…æ¥šç¼“å­˜æ–‡ä»¶å’Œå·²ç»ç”Ÿæˆçš„é™æ€æ–‡ä»¶ã€‚å½“å¯¹ç«™ç‚¹çš„ä¿®æ”¹æ— è®ºå¦‚ä½•ä¸èƒ½ç”Ÿæ•ˆæ—¶ï¼Œè¿è¡Œè¯¥å‘½ä»¤ã€‚ hexo deploy ç®€å†™ä¸º hexo d #å°†ç”Ÿæˆçš„é™æ€æ–‡ä»¶éƒ¨ç½²åˆ°githubç­‰è¿œç¨‹æœåŠ¡å™¨ã€‚å¸¸ç”¨çš„å¥—è·¯æ˜¯å…ˆä½¿ç”¨hexo gå’Œhexo såœ¨æœ¬åœ°ç¼–è¾‘å’Œè°ƒè¯•åšå®¢ï¼Œå½“è°ƒè¯•æ— è¯¯åï¼Œå†ç”¨hexo déƒ¨ç½²åˆ°GitHubã€‚ æœ¬åœ°å»ºç«™é€‰å¥½è·¯å¾„ï¼Œä»¥ä¸‹å‘½ä»¤ä¼šè‡ªåŠ¨åˆ›å»ºæ–‡ä»¶å¤¹æ¥å­˜æ”¾åšå®¢å†…å®¹ã€‚ 1hexo init &lt;folder&gt; #ç”Ÿæˆhexoæ¨¡æ¿ ä¸Šè¿°å‘½ä»¤ç”Ÿæˆäº†ä»¥ä¸‹æ–‡ä»¶,ç”Ÿæˆæ–‡ä»¶å¤¹çš„ç›®å½•å¦‚ä¸‹ã€‚ 12345678.â”œâ”€â”€ _config.ymlâ”œâ”€â”€ package.jsonâ”œâ”€â”€ scaffoldsâ”œâ”€â”€ source| â”œâ”€â”€ _drafts| â””â”€â”€ _postsâ””â”€â”€ themes ä¸Šè¿°æ–‡ä»¶ä¸­ï¼Œåªéœ€è¦é‡ç‚¹å…³æ³¨å’Œäº†è§£è¿™å‡ ä¸ªæ–‡ä»¶ï¼š _config.yml æ˜¯ç«™ç‚¹é…ç½®æ–‡ä»¶ã€‚ç”¨æ¥é…ç½®åšå®¢ç½‘ç«™çš„å„ç§ä¿¡æ¯ã€‚ /source/_posts ç”¨æ¥å­˜æ”¾æˆ‘ä»¬è‡ªå·±ä¹‹åå†™çš„åšå®¢ã€‚ themes ç”¨æ¥å­˜æ”¾åšå®¢çš„ä¸»é¢˜ã€‚å†æ‰§è¡Œä»¥ä¸‹å‘½ä»¤:123cd &lt;folder&gt;npm installhexo server æ‰§è¡Œå®Œä»¥ä¸Šå‘½ä»¤ï¼Œå¯ä»¥è®¿é—® http://localhost:4000 çœ‹åˆ°åšå®¢å·²ç»é¡ºåˆ©æ­å»ºã€‚ ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶hexoä¸­æœ‰ä¸¤ä¸ªé‡è¦çš„é…ç½®æ–‡ä»¶ï¼Œåç§°éƒ½æ˜¯ _config.ymlï¼š ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œä½äºç«™ç‚¹æ ¹ç›®å½•ä¸‹ï¼Œç”¨äºç«™ç‚¹æœ¬èº«çš„é…ç½®ã€‚ ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œä½äºä¸»é¢˜ç›®å½•ä¸‹ï¼Œç”¨äºä¸»é¢˜ç›¸å…³çš„é…ç½®ã€‚ é€šè¿‡ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶çš„ä¸‹è¿°å­—æ®µï¼Œæ¥åˆ†åˆ«ä¿®æ”¹ç½‘ç«™åç§°ã€å‰¯æ ‡é¢˜ã€ä¸ªæ€§ç­¾å(æˆ–ç½‘ç«™ç®€ä»‹)ã€ä½œè€…å’Œè¯­è¨€è®¾ç½®ã€‚ 12345title: subtitle:description: author: language: zh-Hans #è®¾ç½®è¯­è¨€ä¸ºä¸­æ–‡ å°†åšå®¢å…³è”åˆ°GitHub1ã€åœ¨githubåˆ›å»ºä»“åº“ &lt;your-user-name&gt;.git.io,&lt;your-user-name&gt;å¿…é¡»ä¸ä½ çš„githubç”¨æˆ·åç›¸åŒã€‚2ã€ç¼–è¾‘ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°å­—æ®µdeployï¼Œä½œå¦‚ä¸‹çš„ä¿®æ”¹ã€‚ 1234deploy: type: git repository: https://github.com/&lt;your-user-name&gt;/&lt;your-user-name&gt;.github.io.git branch: master 3ã€ä½¿ç”¨å‘½ä»¤npm install --saveå®‰è£…æ’ä»¶ã€‚ 1npm install hexo-deployer-git --save 4ã€ç”Ÿæˆé™æ€ç½‘é¡µ 1hexo g 5ã€éƒ¨ç½²åˆ°GitHub 1hexo d è¿è¡Œä¸Šè¿°å‘½ä»¤åï¼Œè®¿é—® http://&lt;your-user-name&gt;.git.io â€˜hexo dâ€™éƒ¨ç½²æ—¶ä¸è¾“å¯†ç æ‰§è¡Œhexo då°†åšå®¢éƒ¨ç½²åˆ°githubæ—¶ï¼Œæ¯æ¬¡éƒ½è¦è¾“å…¥githubçš„è´¦å·å’Œå¯†ç ï¼Œéå¸¸éº»çƒ¦ã€‚æˆ‘ä»¬åˆ©ç”¨sshçš„å…¬é’¥ç™»å½•å…å»è¾“å…¥å¯†ç çš„æ­¥éª¤ã€‚ sshçš„å…¬é’¥ç™»å½•ç®€ä»‹æ‰€è°“å…¬é’¥ç™»å½•ã€‚æœ¬åœ°ä¸»æœºç”Ÿæˆä¸€ä¸ªå…¬é’¥å’Œä¸€ä¸ªç§˜é’¥ï¼ŒæŠŠå…¬é’¥å‘Šè¯‰ç»™è¿œç¨‹ä¸»æœºï¼ˆgithubï¼‰ï¼Œè€Œç§˜é’¥åªæœ‰è‡ªå·±çŸ¥é“ã€‚å½“æœ¬åœ°ä¸»æœºè¦ç™»å½•è¿œç¨‹ä¸»æœºæ—¶ï¼Œè¿œç¨‹ä¸»æœºï¼ˆgithubï¼‰å‘é€ä¸€ä¸ªæ¶ˆæ¯åºåˆ—ç»™æœ¬åœ°ä¸»æœºï¼Œæœ¬åœ°ä¸»æœºç”¨ç§˜é’¥å°†æ¶ˆæ¯åºåˆ—åŠ å¯†åå†å‘é€ç»™è¿œç¨‹ä¸»æœºï¼›è¿œç¨‹ä¸»æœºæ”¶åˆ°åç”¨å…¬é’¥è§£å¯†ï¼Œè‹¥ä¸åŸæ¶ˆæ¯åºåˆ—ç›¸åŒï¼Œåˆ™å¯ä»¥ç™»å½•ã€‚é€šè¿‡è¿™ç§â€œå…¬é’¥ç™»å½•â€çš„æ–¹å¼ä¿è¯äº†å®‰å…¨æ€§ï¼Œä¸éœ€è¦å†ç”¨è´¦æˆ·å’Œå¯†ç æ¥éªŒè¯èº«ä»½ã€‚ æœ¬æœºä¸»æœºç”Ÿæˆå…¬é’¥å’Œç§˜é’¥åœ¨å‘½ä»¤è¡Œæ‰§è¡Œï¼š 1ssh-keygen ç”Ÿæˆçš„æ–‡ä»¶æœ‰id_rsa.pubå’Œid_rsaï¼Œåˆ†åˆ«ä¸ºå…¬é’¥å’Œç§é’¥ã€‚Linuxç³»ç»Ÿä¸‹ï¼Œç”Ÿæˆæ–‡ä»¶åœ¨home/ssh/ç›®å½•ä¸‹ã€‚windowsç³»ç»Ÿ,åœ¨C:/user/.sshä¸‹ã€‚ æŠŠå…¬é’¥å‘Šè¯‰ç»™githubåœ¨Linuxç³»ç»Ÿä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å…¬é’¥ï¼Œç„¶åå¤åˆ¶ã€‚åœ¨windowsç³»ç»Ÿä¸‹ï¼Œå°†id_rsa.pubç”¨æ–‡æœ¬æ ¼å¼æ‰“å¼€æ¥å¤åˆ¶ã€‚ 12cd ~/.sshcat id_rsa.pub åœ¨githubçš„settings&gt;SSH and GPG keys&gt;New SSH keysæ–°å»ºä¸€ä¸ªssh keyï¼Œå°†å¤åˆ¶çš„å…¬é’¥ç²˜è´´ä¿å­˜å³å¯ã€‚ ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶ç”¨sshæ–¹å¼æ¥è®¿é—®ä»“åº“ï¼Œè€Œä¸æ˜¯ç”¨httpsæ–¹å¼æ‰“å¼€ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹å­—æ®µdeployä¸‹çš„repositoryçš„å€¼ã€‚ 12345deploy: type: git # repository: https://github.com/spring-quan/spring-quan.github.io repository: git@github.com:spring-quan/spring-quan.github.io.git branch: master å‚è§SSHè¿œç¨‹ç™»å½•Hexoå…è¾“å…¥å¯†ç éƒ¨ç½²åˆ°Github ç»‘å®šåŸŸåè´­ä¹°å¹¶æ³¨å†ŒåŸŸååœ¨é˜¿é‡Œäº‘çš„ä¸‡ç½‘è´­ä¹°ä¸€ä¸ªåŸŸåã€‚å¸¸ç”¨çš„åŸŸååç¼€æœ‰.com/.cn/.me/.topã€‚ä¸åŒåç¼€çš„åŸŸåä»·æ ¼ä¸åŒï¼Œå¯ä»¥æŒ‰ç…§å–œå¥½é€‰æ‹©ä¸€ä¸ªã€‚è´­ä¹°å¥½åŸŸååï¼Œéœ€è¦å®Œæˆ åŸŸåå®åè®¤è¯ï¼Œæ‰èƒ½æ­£å¸¸è¿›è¡ŒåŸŸåè§£æï¼Œè¯¥åŸŸåæ‰èƒ½ä½¿ç”¨ã€‚ æ³¨æ„ï¼šæ³¨å†ŒåŸŸååï¼Œéœ€è¦åŸŸåå®åè®¤è¯ï¼Œä¸éœ€è¦å¤‡æ¡ˆï¼ŒåŸŸåå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚ ç»™GitHubæ·»åŠ åŸŸååœ¨åšå®¢å¯¹åº”çš„githubä»“åº“ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶CNAMEï¼Œæ–‡ä»¶åè¦å¤§å†™ã€‚å†…å®¹å¦‚ä¸‹ï¼Œæ³¨æ„è¦ä¸ºé¡¶çº§åŸŸåï¼Œä¸èƒ½åŒ…æ‹¬wwwæˆ–httpã€‚ 1example.com åœ¨ç”¨hexo då‘½ä»¤å°†åšå®¢éƒ¨ç½²åˆ°GitHubä¸Šæ—¶ï¼Œæ–‡ä»¶CNAMEä¼šè¢«è¦†ç›–åˆ é™¤æ‰ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿˜éœ€è¦åœ¨ç«™ç‚¹ç›®å½•ä¸‹/sourceï¼Œæ–°å»ºåŒæ ·çš„æ–‡ä»¶CNAMEã€‚ è®¾ç½®åŸŸåè§£æè®¾ç½®åŸŸåè§£æå°±æ˜¯å°†æ³¨å†Œåˆ°çš„åŸŸåæŒ‡å‘ä¸€ä¸ªIPåœ°å€ï¼Œé¦–å…ˆæˆ‘ä»¬è¦æŸ¥è¯¢github.ioåŸŸåå¯¹åº”çš„IPåœ°å€ã€‚åœ¨å‘½ä»¤è¡Œä¸­pingè‡ªå·±çš„github.ioåŸŸåï¼Œå°±å¯ä»¥å¾—åˆ°IPåœ°å€ã€‚ 1ping &lt;your-user-name&gt;.github.io æ¥ç€ï¼Œåœ¨é˜¿é‡Œäº‘ä¸‡ç½‘çš„ç®¡ç†æ§åˆ¶å°&gt;åŸŸåæœåŠ¡&gt;åŸŸååˆ—è¡¨ä¸­è®¾ç½®åŸŸåè§£æå³å¯ã€‚è¿™æ—¶åŸŸåå°±ç»‘å®šå¥½äº†ï¼Œå¯ä»¥é€šè¿‡buptccq.top å’Œwww.buptccq.top æ¥è®¿é—®åšå®¢ã€‚ æ³¨æ„ï¼š1ã€è®¾ç½®åŸŸåè§£æä¸æ˜¯ç«‹å³ç”Ÿæ•ˆçš„ï¼Œéœ€è¦ç­‰10åˆ†é’Ÿå·¦å³ã€‚2ã€è‹¥ç”¨è‡ªå®šä¹‰çš„åŸŸåè®¿é—®å¤±è´¥åï¼Œç»è¿‡ä¿®æ”¹ï¼Œé¿å…æµè§ˆå™¨çš„DNSç¼“å­˜ï¼Œå¯ä»¥ä½¿ç”¨æµè§ˆå™¨çš„æ— ç—•æ¨¡å¼ã€‚ å†™ä½œåšå®¢+æŠ€å·§åœ¨ç«™ç‚¹æ ¹ç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ç¯‡æ–°æ–‡ç« ï¼š 1hexo new &lt;title&gt; ä¸Šè¿°å‘½ä»¤åœ¨ç«™ç‚¹æ ¹ç›®å½•ä¸‹çš„\\source_posts æ–‡ä»¶å¤¹ç”Ÿæˆä¸€ä¸ª .mdæ–‡ä»¶ã€‚æŒ‰ç…§markdownè§„åˆ™ï¼Œç¼–è¾‘è¯¥æ–‡ä»¶ã€‚æ¥ä¸‹æ¥ä»‹ç»ç¼–è¾‘mdæ–‡ä»¶çš„å‡ ä¸ªæŠ€å·§ã€‚ å—å¼•ç”¨1ã€ä¸€ç§æ–¹æ³•ã€‚ 12&gt; åªæ˜¯å—å¼•ç”¨&gt; æ˜¯çš„å•Š æ•ˆæœå›¾å¦‚ä¸‹ï¼š åªæ˜¯å—å¼•ç”¨æ˜¯çš„å•Š markdownè¯­æ³• å‚è€ƒé“¾æ¥markdownä¸­æ–‡æ–‡æ¡£Markdown å…¥é—¨å‚è€ƒMarkDownè¯­æ³•ç®€ä»‹Markdown ä¹¦å†™é£æ ¼æŒ‡å— ç»˜åˆ¶è¡¨æ ¼ç”¨|æ¥åˆ†éš”ä¸åŒçš„å•å…ƒæ ¼ï¼Œç”¨-æ¥åˆ†éš”è¡¨å¤´å’Œå…¶ä»–è¡Œã€‚å…³äºå¯¹é½ï¼š :--- å·¦å¯¹é½ï¼Œé»˜è®¤æƒ…å†µ :---: å±…ä¸­ ----: å³å¯¹é½ ä½¿ç”¨æ–¹å¼ä¸¾ä¾‹ï¼š 1234|ä¸»å…¬|åˆ˜å¤‡|æ›¹æ“|å­™æƒ||----|----|----|----||æ”¿æƒ|èœ€|é­|å´||ç›¸å…³|å…³ç¾½ã€å¼ é£|æ›¹ä¸•ã€æ›¹æ¤|å‘¨ç‘œã€é²è‚ƒ| å®ç°æ•ˆæœï¼š ä¸»å…¬ åˆ˜å¤‡ æ›¹æ“ å­™æƒ æ”¿æƒ èœ€ é­ å´ ç›¸å…³ å…³ç¾½ã€å¼ é£ æ›¹ä¸•ã€æ›¹æ¤ å‘¨ç‘œã€é²è‚ƒ åˆ é™¤çº¿ä½¿ç”¨æ–¹å¼ï¼š 1~~åˆ é™¤çº¿~~ ä½¿ç”¨æ•ˆæœä¸ºï¼šåˆ é™¤çº¿ markdownå…¶ä»–ç”¨æ³•12345678910111213141516171819202122&lt;!-- more --&gt; #åœ¨é¦–é¡µæ˜¾ç¤ºæ‘˜è¦ content #å—å¼•ç”¨&lt;www.baidu.com&gt; #é“¾æ¥[ç™¾åº¦](www.baidu.com) #å†…åµŒé“¾æ¥![](/path/to/image &apos;image name&apos;)æœ‰åºåˆ—è¡¨1. 2.3.æ— åºåˆ—è¡¨- - - **ç²—ä½“å­—***æ–œä½“å­—*``ä»£ç ``## äºŒçº§æ ‡é¢˜### ä¸‰çº§æ ‡é¢˜ æ–‡å­—å±…å·¦ï¼Œå±…ä¸­ï¼Œå±…å³å±…ä¸­ 1&lt;center&gt;è¯¶å˜¿&lt;/center&gt; å±…å·¦ 1&lt;p align=&quot;left&quot;&gt;è¯¶å˜¿&lt;/p&gt; å±…å³ 1&lt;p align=&quot;right&quot;&gt;è¯¶å˜¿&lt;/p&gt; æ’å…¥è¡¨æƒ…ğŸ˜€ğŸ˜‡ğŸ‘¹ ç»™åšå®¢é€‰ç”¨ä¸»é¢˜è¿™é‡Œè¦ä»‹ç»ä¸€ä¸‹â€œä¸»é¢˜â€è¿™ä¸ªæ¦‚å¿µã€‚ä¸»é¢˜ä¹Ÿå°±æ˜¯åšå®¢çš„æ ·å¼ã€‚ç»™åšå®¢å®‰è£…ä¸€ä¸ªå¥½çš„ä¸»é¢˜ï¼Œå°±å¥½åƒç»™äººé€‰ä¸€ä»¶æ¼‚äº®çš„è¡£æœç©¿ã€‚hexoæœ‰å¤šç§ä¸åŒçš„ä¸»é¢˜ï¼Œå¯ä»¥æ”¹hexoé€‰æ‹©ä¸åŒçš„æ ·å¼å’Œå¸ƒå±€ã€‚ä¸»é¢˜åˆ—è¡¨æœ‰è¯¦ç»†çš„ä»‹ç»ã€‚ä½¿ç”¨æœ€å¤šçš„ä¸»é¢˜æ˜¯Next,æ¥ä¸‹æ¥ä»‹ç»ä¸»é¢˜çš„å®‰è£…ã€‚ å®‰è£…ä¸»é¢˜Next å…ˆä¸‹è½½ä¸»é¢˜Nextï¼Œåœ¨ç«™ç‚¹æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼š 1git clone https://github.com/iissnan/hexo-theme-next themes/next å¯ç”¨ä¸»é¢˜ï¼Œæ‰“å¼€ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°themeå­—æ®µï¼ŒæŠŠå®ƒçš„å€¼ä¿®æ”¹ä¸º next 1theme: next éªŒè¯ä¸»é¢˜ã€‚è¿è¡Œâ€™hexo serverâ€™,è®¿é—®http://localhost:4000ã€‚ é€‰æ‹©Schemeé€šè¿‡ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶å®Œæˆã€‚æ‰“å¼€ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°å­—æ®µschemeï¼Œå°†ä¸è¦çš„ä¸»é¢˜æ³¨é‡Šæ‰ï¼Œè¦ç”¨çš„ä¸»é¢˜ä¸æ³¨é‡Šã€‚ 123#scheme: Muse#scheme: Mistscheme: Pisces è®¾ç½®è¯­è¨€ä¸ºä¸­æ–‡é€šè¿‡ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶å®Œæˆã€‚æ‰“å¼€ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°å­—æ®µlanguageï¼ŒæŠŠå®ƒå€¼ä¿®æ”¹ä¸º zh-Hans 1language: zh-Hans ä¸»é¢˜ç¾åŒ–-1è®¾ç½®ä¸Šéƒ¨çš„èœå•æ  è®¾ç½®èœå•å†…å®¹ã€‚é€šè¿‡ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶å®Œæˆã€‚æ‰“å¼€ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°å­—æ®µmenuï¼Œä¸ç”¨çš„èœå•æ é€‰é¡¹æ³¨é‡Šæ‰ï¼Œè¦ç”¨çš„ä¸æ³¨é‡Šã€‚ 1234567menu: home: / archives: /archives # å†’å·å³è¾¹ä¸ºä¸»é¢˜ç›®å½•ä¸‹/sourceä¸‹çš„æ–‡ä»¶å¤¹ã€‚ #about: /about #categories: /categories tags: /tags #commonweal: /404.html è®¾ç½®èœå•é¡¹çš„æ˜¾ç¤ºæ–‡æœ¬ã€‚ç¼–è¾‘ä¸»é¢˜ç›®å½•ä¸‹çš„/languages/zh-Hans.ymlã€‚ 12345678menu: home: é¦–é¡µ archives: å½’æ¡£ categories: åˆ†ç±» tags: æ ‡ç­¾ about: å…³äº search: æœç´¢ commonweal: å…¬ç›Š404 è®¾ç½®èœå•é¡¹çš„å›¾æ ‡ã€‚ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°å­—æ®µmenu_icons,ä¿®æ”¹ä¸ºï¼š 12menu_icons: enable: true è®¾ç½®å¤´åƒæ‰“å¼€ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°å­—æ®µavatarï¼ŒæŠŠå®ƒçš„å€¼ä¿®æ”¹ä¸ºå¤´åƒç…§ç‰‡çš„è·¯å¾„ã€‚å°†å¤´åƒç…§ç‰‡æ”¾åœ¨ä¸»é¢˜ç›®å½•/source/images(å¦‚æœä¸å­˜åœ¨å°±åˆ›å»º)ã€‚ 1avatar: /images/avatar.png æ·»åŠ â€˜æ ‡ç­¾â€™é¡µé¢é¦–å…ˆè¦åœ¨èœå•æ æ˜¾ç¤ºâ€˜æ ‡ç­¾â€™é“¾æ¥ã€‚åœ¨ç«™ç‚¹ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªé¡µé¢ï¼š 1hexo new page tags ç¼–è¾‘åˆšåˆšç”Ÿæˆçš„é¡µé¢,ä¿®æ”¹å­—æ®µ title å’Œ type 123title: æ ‡ç­¾date: 2019-01-13 12:22:58type: &quot;tags&quot; åœ¨èœå•æ ä¸­æ·»åŠ é“¾æ¥ã€‚ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°å­—æ®µmenuä¸‹çš„å­—æ®µtagsï¼ŒæŠŠå®ƒå€¼ä¿®æ”¹ä¸º /tags 1234menu: home: / archives: /archives tags: /tags æ·»åŠ â€˜åˆ†ç±»â€™é¡µé¢ä¸æ·»åŠ â€˜æ ‡ç­¾â€™é¡µé¢åŸºæœ¬ç›¸åŒã€‚é¦–å…ˆè¦åœ¨èœå•æ æ˜¾ç¤ºâ€˜åˆ†ç±»â€™é“¾æ¥ã€‚åœ¨ç«™ç‚¹ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªé¡µé¢ï¼š 1hexo new page categories ç¼–è¾‘åˆšåˆšç”Ÿæˆçš„é¡µé¢,ä¿®æ”¹å­—æ®µ title å’Œ type 123title: åˆ†ç±»date: 2019-01-13 12:22:58type: &quot;categories&quot; åœ¨èœå•æ ä¸­æ·»åŠ é“¾æ¥ã€‚ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°å­—æ®µmenuä¸‹çš„å­—æ®µtagsï¼ŒæŠŠå®ƒå€¼ä¿®æ”¹ä¸º /tags 12345menu: home: / archives: /archives tags: /tags categories: /categories æ–°å»ºä¸€ä¸ªå‹é“¾é¡µé¢ åœ¨èœå•æ ä¸­æ·»åŠ é“¾æ¥å’Œé“¾æ¥å›¾æ ‡ã€‚ç¼–è¾‘ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°å­—æ®µmenuï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š 12menu: links: /links/ || link # ||å·¦è¾¹ä»£è¡¨æ–‡ä»¶å¤¹/source/links,å³è¾¹ä»£è¡¨å›¾æ ‡ ä¿®æ”¹é“¾æ¥çš„æ˜¾ç¤ºæ–‡æœ¬ï¼Œç¼–è¾‘æ–‡ä»¶/themes/next/languages/zh-Hans.yml,æ‰¾åˆ°å­—æ®µmenuã€‚ 12menu: links: å‹é“¾ åœ¨ç«™ç‚¹ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤,ä¼šç”Ÿæˆ/source/links/index.mdæ–‡ä»¶ã€‚é€šè¿‡ç¼–è¾‘è¯¥æ–‡ä»¶å¯ä»¥æ§åˆ¶å‹é“¾é¡µé¢çš„æ˜¾ç¤ºå†…å®¹ã€‚ 1hexo new page links å…³é—­â€™æ ‡ç­¾â€™ã€â€™åˆ†ç±»â€™é¡µçš„è¯„è®ºåˆ†åˆ«ç¼–è¾‘ç«™ç‚¹ç›®å½•ä¸‹çš„/source/tags/index.mdå’Œ/source/categories/index.md,æ·»åŠ å­—æ®µcomments,æŠŠå®ƒçš„å€¼ä¿®æ”¹ä¸ºfalseã€‚ 1comments: false ä¾§è¾¹æ æ·»åŠ ç¤¾äº¤é“¾æ¥é€šè¿‡ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶å®Œæˆã€‚æ‰“å¼€ ä¸»é¢˜é…ç½®æ–‡ä»¶ ï¼Œä¿®æ”¹ä¸¤ä¸ªéƒ¨åˆ†ï¼Œé“¾æ¥å’Œé“¾æ¥å›¾æ ‡ã€‚1ã€æ·»åŠ é“¾æ¥ã€‚æ‰¾åˆ°å­—æ®µ social ï¼Œä¸€è¡Œä¸ºä¸€ä¸ªé“¾æ¥ã€‚æ ¼å¼ä¸º æ˜¾ç¤ºæ–‡æœ¬ï¼šé“¾æ¥ 1234# Social linkssocial: GitHub: https://github.com/your-user-name Twitter: https://twitter.com/your-user-name 2ã€ä¿®æ”¹é“¾æ¥å›¾æ ‡ã€‚æ‰¾åˆ°å­—æ®µ social_icons ã€‚é”®å€¼å¯¹æ ¼å¼ä¸º åŒ¹é…é”®ï¼šå›¾æ ‡åç§° ã€‚åœ¨å›¾æ ‡åº“æ‰¾åˆ°åˆé€‚çš„å›¾æ ‡ï¼Œå°†åå­—ä½œä¸ºå›¾æ ‡åç§°ã€‚ 123456# Social Iconssocial_icons: enable: true # Icon Mappings GitHub: github Twitter: twitter ä¾§è¾¹æ æ·»åŠ å‹æƒ…é“¾æ¥æ‰“å¼€ ä¸»é¢˜é…ç½®æ–‡ä»¶ ï¼Œæ‰¾åˆ°å­—æ®µ links ã€‚é”®å€¼å¯¹æ ¼å¼ä¸º æ˜¾ç¤ºæ–‡æœ¬ï¼šé“¾æ¥ 12345678# Blog rollslinks_icon: link #é“¾æ¥çš„å›¾æ ‡links_title: æ¨èé˜…è¯» #é“¾æ¥çš„åç§°links_layout: block #é“¾æ¥çš„å¸ƒå±€ï¼Œä¸€è¡Œä¸€ä¸ªé“¾æ¥#links_layout: inline #ä¸€è¡Œå¤šä¸ªé“¾æ¥links: # Title: http://example.com/ å»–é›ªå³°: https://www.liaoxuefeng.com/ å¼€å¯æ‰“èµåŠŸèƒ½é€šè¿‡ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶å®Œæˆã€‚æ‰“å¼€ ä¸»é¢˜é…ç½®æ–‡ä»¶ ï¼Œæ‰¾åˆ°ä»¥ä¸‹å­—æ®µã€‚å°†æ”¶æ¬¾äºŒç»´ç æ”¾åˆ°ç«™ç‚¹ç›®å½•ä¸‹çš„/source/images/(æ²¡æœ‰è¯¥æ–‡ä»¶å¤¹ï¼Œå°±æ–°å»º)ä¸­ã€‚ 123reward_comment: åšæŒåŸåˆ›æŠ€æœ¯åˆ†äº«ï¼Œæ‚¨çš„æ”¯æŒå°†é¼“åŠ±æˆ‘ç»§ç»­åˆ›ä½œï¼wechatpay: /path/to/wechat-reward-imagealipay: /path/to/alipay-reward-image ä¿®æ”¹æ‰“èµå­—ä½“ä¸é—ªåŠ¨ä¿®æ”¹æ–‡ä»¶MyBlog/themes/next/source/css/_common/components/post/post-reward.stylï¼Œæ³¨é‡Šæ–‡å­—é—ªåŠ¨çš„å‡½æ•°ã€‚ 123456789101112/*æ³¨é‡Šæ–‡å­—é—ªåŠ¨çš„å‡½æ•°#wechat:hover p&#123; animation: roll 0.1s infinite linear; -webkit-animation: roll 0.1s infinite linear; -moz-animation: roll 0.1s infinite linear;&#125;#alipay:hover p&#123; animation: roll 0.1s infinite linear; -webkit-animation: roll 0.1s infinite linear; -moz-animation: roll 0.1s infinite linear;&#125;*/ è®¢é˜…å¾®ä¿¡å…¬ä¼—å·åœ¨æ¯ç¯‡æ–‡ç« çš„æœ«å°¾æ˜¾ç¤ºå¾®ä¿¡å…¬ä¼—å·ã€‚æŠŠå¾®ä¿¡å…¬ä¼—å·äºŒç»´ç æ”¾åœ¨MyBlog/themes/next/source/images/ä¸‹ã€‚ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ ï¼Œæ‰¾åˆ°å­—æ®µwechat_subscriberï¼Œä¿®æ”¹å®ƒçš„å€¼ã€‚ 12345# Wechat Subscriberwechat_subscriber: enabled: true qcode: /path/to/your/wechatqcode description: æ¬¢è¿å…³æ³¨æˆ‘ è®¾ç½®è…¾è®¯å…¬ç›Š404ç•Œé¢1ã€åœ¨ç›®å½•MyBlog/themes/next/source/ä¸‹æ–°å»º404.htmlé¡µé¢ï¼Œå†…å®¹å¦‚ä¸‹ï¼š 123456789101112131415161718&lt;!DOCTYPE HTML&gt;&lt;html&gt;&lt;head&gt; &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8;&quot;/&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot; /&gt; &lt;meta name=&quot;robots&quot; content=&quot;all&quot; /&gt; &lt;meta name=&quot;robots&quot; content=&quot;index,follow&quot;/&gt; &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://qzone.qq.com/gy/404/style/404style.css&quot;&gt;&lt;/head&gt;&lt;body&gt; &lt;script type=&quot;text/plain&quot; src=&quot;http://www.qq.com/404/search_children.js&quot; charset=&quot;utf-8&quot; homePageUrl=&quot;/&quot; homePageName=&quot;å›åˆ°æˆ‘çš„ä¸»é¡µ&quot;&gt; &lt;/script&gt; &lt;script src=&quot;https://qzone.qq.com/gy/404/data.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt; &lt;script src=&quot;https://qzone.qq.com/gy/404/page.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 2ã€ä¿®æ”¹ ä¸»é¢˜é…ç½®æ–‡ä»¶ ,æ‰¾åˆ°å­—æ®µ menu ä¸‹çš„å­—æ®µ commonwealï¼ŒæŠŠå®ƒå€¼ä¿®æ”¹ä¸º /404.html 12menu: commonweal: /404.html || heartbeat è®¾ç½®èƒŒæ™¯åŠ¨ç”»ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ã€‚ä»¥ä¸‹å››ä¸ªå­—æ®µä¸ºä¸åŒçš„èƒŒæ™¯åŠ¨ç”»æ•ˆæœï¼Œè¦æƒ³å¯ç”¨ï¼Œå°†falseæ”¹ä¸ºtrueã€‚ 1234567891011# Canvas-nestcanvas_nest: false# three_wavesthree_waves: false# canvas_linescanvas_lines: false# canvas_spherecanvas_sphere: false æ·»åŠ è¯„è®ºç³»ç»Ÿâ€˜ç½‘æ˜“äº‘è·Ÿå¸–â€™è¯„è®ºå·²ç»ä¸æä¾›æœåŠ¡ã€‚æˆ‘ä»¬é‡‡ç”¨â€™æ¥å¿…åŠ›â€™è¯„è®ºç³»ç»Ÿæ—¶ï¼Œéœ€è¦è·å–uidã€‚1ã€å…ˆåœ¨æ¥å¿…åŠ›çš„å®˜æ–¹ç½‘ç«™æ³¨å†Œè´¦å·ï¼Œåœ¨&gt;å®‰è£…ä¸‹å®‰è£…cityç‰ˆæœ¬ï¼Œå†åœ¨&gt;ç®¡ç†é¡µé¢&gt;ä»£ç ç®¡ç†ä¸‹è·å–uidã€‚data-uidå­—æ®µçš„å€¼å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„uidã€‚2ã€ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ ï¼Œæ‰¾åˆ°å­—æ®µâ€™livere_uidâ€™,æŠŠå®ƒçš„å€¼æ”¹ä¸ºdata-uidå­—æ®µçš„å€¼ã€‚ 1livere_uid: #your uid æ·»åŠ æœç´¢åŠŸèƒ½é€šè¿‡Local Searchæœç´¢æœåŠ¡å®ç°æœç´¢åŠŸèƒ½ã€‚1ã€å®‰è£…æ’ä»¶hexo-generator-searchdbï¼Œåœ¨ç«™ç‚¹çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œ 1npm install hexo-generator-searchdb --save 2ã€ç¼–è¾‘ ç«™ç‚¹é…ç½®æ–‡ä»¶,åœ¨æ–‡æœ«æ–°å¢ä»¥ä¸‹å†…å®¹ï¼š 12345search: path: search.xml field: post format: html limit: 10000 3ã€ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶,æ‰¾åˆ°å­—æ®µâ€local_searchâ€ï¼Œä¿®æ”¹å€¼ä¸ºtrueã€‚ 12local_search: enable: true ä¸»é¢˜ç¾åŒ–-2è®¾ç½®ã€é˜…è¯»å…¨æ–‡ã€‘åœ¨é¦–é¡µåªæ˜¾ç¤ºæ–‡ç« çš„éƒ¨åˆ†å†…å®¹ï¼Œé€šè¿‡æŒ‰é’®ã€é˜…è¯»å…¨æ–‡ã€‘æ¥å®ç°è·³è½¬ã€‚æœ‰ä¸‰ç§æ–¹å¼å¯ä»¥å®ç°è¯¥åŠŸèƒ½ï¼Œè¿™é‡Œä»‹ç»æœ€æ–¹ä¾¿çš„ä¸€ç§ã€‚åœ¨æ–‡ç« ä¸­ä½¿ç”¨&lt;!-- more --&gt;æ¥è¿›è¡Œæˆªæ–­ï¼Œ&lt;!-- more --&gt;ä¹‹å‰çš„å†…å®¹æ˜¾ç¤ºåœ¨é¦–é¡µï¼Œåé¢çš„å†…å®¹ä¸æ˜¾ç¤ºã€‚ 1&lt;!-- more --&gt; åˆ†é¡µ-è®¾ç½®é¡µé¢æ–‡ç« çš„ç¯‡æ•°ä¸ºç½‘ç«™é¦–é¡µã€å½’æ¡£é¡µå’Œæ ‡ç­¾é¡µè®¾ç½®ä¸åŒçš„æ–‡ç« ç¯‡æ•°ã€‚1ã€ä½¿ç”¨npm install --saveå®‰è£…æ’ä»¶ã€‚ 123npm install --save hexo-generator-indexnpm install --save hexo-generator-archivenpm install --save hexo-generator-tag 2ã€ç¼–è¾‘ç«™ç‚¹é…ç½®æ–‡ä»¶,æ‰¾åˆ°ä»¥ä¸‹å­—æ®µå¹¶ä¿®æ”¹ã€‚ 12345678910index_generator: per_page: 10 archive_generator: per_page: 20 yearly: true monthly: truetag_generator: per_page: 10 è®¾ç½®ç½‘ç«™çš„å›¾æ ‡åœ¨EasyIconä¸­æ‰¾ä¸€å¼ ä¸­æ„çš„å›¾æ ‡ã€‚ä¿®æ”¹å›¾æ ‡åç§°ä¸ºfavicon.icoï¼Œå°†å›¾æ ‡æ”¾åœ¨è·¯å¾„/next/source/images/ä¸‹ã€‚ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°å­—æ®µfaviconï¼Œä¿®æ”¹å®ƒçš„å€¼ã€‚ 123favicon: small: /images/favicon.ico medium: /images/favicon.ico æ·»åŠ é¡¶éƒ¨çš„åŠ è½½æ¡ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶,æ‰¾åˆ°å­—æ®µpace,æŠŠå€¼è®¾ä¸ºtrueã€‚è¿˜å¯ä»¥é€‰æ‹©ä¸åŒé£æ ¼çš„åŠ è½½æ¡ã€‚ 12345678910111213141516pace: true # Themes list:#pace-theme-big-counter#pace-theme-bounce#pace-theme-barber-shop#pace-theme-center-atom#pace-theme-center-circle#pace-theme-center-radar#pace-theme-center-simple#pace-theme-corner-indicator#pace-theme-fill-left#pace-theme-flash#pace-theme-loading-bar#pace-theme-mac-osx#pace-theme-minimalpace_theme: pace-theme-flash ä¿®æ”¹æ–‡ç« åº•éƒ¨çš„æ ‡ç­¾#ä¸ºä¿®æ”¹æ–‡ä»¶ /themes/next/layout/_macro/post.swig,æœç´¢rel=&quot;tags&quot;&gt;#ï¼Œå°†#æ¢æˆ&lt;i class=&quot;fa fa-tag&quot;&gt;&lt;/i&gt;ã€‚ä¹Ÿå¯ä»¥åœ¨å›¾æ ‡åº“æ‰¾è‡ªå·±ä¸­æ„çš„å›¾æ ‡ã€‚ ä¿®æ”¹ç½‘é¡µåº•éƒ¨çš„æ¡ƒå¿ƒç¼–è¾‘/themes/next/layout/_partials/footer.swigï¼Œæ‰¾åˆ°ä»¥ä¸‹ä»£ç ,å°†ç¬¬äºŒä¸ªclassçš„å€¼å¹¶ä¿®æ”¹ä¸º&quot;fa fa-heart&quot;ï¼Œåœ¨å›¾æ ‡åº“æ‰¾è‡ªå·±ä¸­æ„çš„å›¾æ ‡ã€‚ 123&lt;span class=&quot;with-love&quot;&gt; &lt;i class=&quot;fa fa-&#123;&#123; theme.footer.icon &#125;&#125;&quot;&gt;&lt;/i&gt;&lt;/span&gt; å®ç°ç»Ÿè®¡åŠŸèƒ½ä½¿ç”¨npm install --saveå®‰è£…æ’ä»¶ 1npm install hexo-wordcount --save ç½‘ç«™åº•éƒ¨å­—æ•°ç»Ÿè®¡ç¼–è¾‘/themes/next/layout/_partials/footer.swigï¼Œåœ¨æ–‡æœ«æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š 1234&lt;div class=&quot;theme-info&quot;&gt; &lt;div class=&quot;powered-by&quot;&gt;&lt;/div&gt; &lt;span class=&quot;post-count&quot;&gt;åšå®¢å…¨ç«™å…±&#123;&#123; totalcount(site) &#125;&#125;å­—&lt;/span&gt;&lt;/div&gt; æ–‡ç« å­—æ•°å’Œé˜…è¯»æ—¶é•¿ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°å­—æ®µpost_wordcount,å¹¶ä¿®æ”¹ã€‚ 123456post_wordcount: item_text: true wordcount: true #å­—æ•°ç»Ÿè®¡ min2read: true #é˜…è¯»æ—¶é•¿ç»Ÿè®¡ totalcount: true #ç«™ç‚¹æ€»å­—æ•° separated_meta: true ç»Ÿè®¡è®¿é—®é‡å’Œé˜…è¯»é‡æˆ‘ä»¬ç”¨busuanziå®ç°ç»Ÿè®¡åŠŸèƒ½ã€‚1ã€å…¨å±€é…ç½®ã€‚ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°å­—æ®µbusuanzi_count,å°†enableçš„å€¼æ”¹ä¸ºtrueã€‚2ã€ç¼–è¾‘å­—æ®µsite_uv,ç»Ÿè®¡æœ¬ç«™è®¿å®¢æ•°ã€‚3ã€ç¼–è¾‘å­—æ®µsite_pv,ç»Ÿè®¡æœ¬ç«™æ€»è®¿é—®é‡ã€‚4ã€ç¼–è¾‘å­—æ®µpage_pv,ç»Ÿè®¡æ¯ç¯‡æ–‡ç« çš„é˜…è¯»é‡ã€‚ 123456789101112131415busuanzi_count: # count values only if the other configs are false enable: true # custom uv span for the whole site site_uv: true site_uv_header: &lt;i class=&quot;fa fa-user&quot;&gt;&lt;/i&gt;æœ¬ç«™è®¿å®¢æ•° site_uv_footer: äººæ¬¡ # custom pv span for the whole site site_pv: true site_pv_header: &lt;i class=&quot;fa fa-eye&quot;&gt;&lt;/i&gt;æœ¬ç«™æ€»è®¿é—®é‡ site_pv_footer: æ¬¡ # custom pv span for one page only page_pv: true page_pv_header: &lt;i class=&quot;fa fa-file-o&quot;&gt;&lt;/i&gt;æœ¬æ–‡æ€»é˜…è¯»é‡ page_pv_footer: æ¬¡ é—®é¢˜ï¼šbusuanziç»Ÿè®¡ä¸æ˜¾ç¤ºæ•°å­—ï¼ˆ2019.1.15ï¼‰ã€‚åŸå› æ˜¯buxuanziçš„åŸŸåå˜æ›´ï¼Œç”±&lt;dn-lbstatics.qbox.me&gt;å˜ä¸º&lt;busuanzi.ibruce.info&gt;,å¯¼è‡´ç»Ÿè®¡åŠŸèƒ½ä¸èƒ½å®ç°ã€‚è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š ç¼–è¾‘æ–‡ä»¶themes\\next\\layout\\_third-party\\analytics\\busuanzi-counter.swig,æ‰¾åˆ°ä»¥ä¸‹ä»£ç  1&lt;script async src=&quot;https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js&quot;&gt;&lt;/script&gt; å°†å…¶ä¿®æ”¹ä¸ºï¼š 1&lt;script async src=&quot;https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js&quot;&gt;&lt;/script&gt; é‡æ–°æ¨é€åï¼Œå¯ä»¥çœ‹åˆ°ç»Ÿè®¡åŠŸèƒ½æ­£å¸¸ã€‚ å®ç°ç‚¹å‡»å‡ºç°æ¡ƒå¿ƒ1ã€åœ¨è·¯å¾„/theme/next/source/js/src/ä¸‹æ–°å»º love.js2ã€ç¼–è¾‘æ–‡ä»¶/theme/next/layout/_layout.swigæ–‡ä»¶ï¼Œåœ¨æ–‡æœ«æ·»åŠ ä»£ç ï¼š 12&lt;!-- é¡µé¢ç‚¹å‡»å°çº¢å¿ƒ --&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;/js/src/love.js&quot;&gt;&lt;/script&gt; ä¿®æ”¹é“¾æ¥æ–‡æœ¬æ ·å¼ä¿®æ”¹æ–‡ä»¶themes\\next\\source\\css\\_common\\components\\post\\post.styl,åœ¨æ–‡æœ«æ·»åŠ å¦‚ä¸‹ä»£ç ã€‚å…³äºé¢œè‰²çš„ä»£ç è§è¯¦æƒ… 1234567891011// æ–‡ç« å†…é“¾æ¥æ–‡æœ¬æ ·å¼.post-body p a&#123; color: #0593d3; border-bottom: none; border-bottom: 1px solid #0593d3; &amp;:hover &#123; color: #fc6423; border-bottom: none; border-bottom: 1px solid #fc6423; &#125;&#125; ç½®é¡¶æŸç¯‡æ–‡ç« ä¿®æ”¹æ–‡ä»¶MyBlog/node_modules/hexo-generator-index/lib/generator.js,å°†å…¨éƒ¨ä»£ç æ›¿æ¢ä¸º 12345678910111213141516171819202122232425262728&apos;use strict&apos;;var pagination = require(&apos;hexo-pagination&apos;);module.exports = function(locals)&#123; var config = this.config; var posts = locals.posts; posts.data = posts.data.sort(function(a, b) &#123; if(a.top &amp;&amp; b.top) &#123; // ä¸¤ç¯‡æ–‡ç« topéƒ½æœ‰å®šä¹‰ if(a.top == b.top) return b.date - a.date; // è‹¥topå€¼ä¸€æ ·åˆ™æŒ‰ç…§æ–‡ç« æ—¥æœŸé™åºæ’ else return b.top - a.top; // å¦åˆ™æŒ‰ç…§topå€¼é™åºæ’ &#125; else if(a.top &amp;&amp; !b.top) &#123; // ä»¥ä¸‹æ˜¯åªæœ‰ä¸€ç¯‡æ–‡ç« topæœ‰å®šä¹‰ï¼Œé‚£ä¹ˆå°†æœ‰topçš„æ’åœ¨å‰é¢ï¼ˆè¿™é‡Œç”¨å¼‚æˆ–æ“ä½œå±…ç„¶ä¸è¡Œ233ï¼‰ return -1; &#125; else if(!a.top &amp;&amp; b.top) &#123; return 1; &#125; else return b.date - a.date; // éƒ½æ²¡å®šä¹‰æŒ‰ç…§æ–‡ç« æ—¥æœŸé™åºæ’ &#125;); var paginationDir = config.pagination_dir || &apos;page&apos;; return pagination(&apos;&apos;, posts, &#123; perPage: config.index_generator.per_page, layout: [&apos;index&apos;, &apos;archive&apos;], format: paginationDir + &apos;/%d/&apos;, data: &#123; __index: true &#125; &#125;);&#125;; åœ¨æ–‡ç« front-matterä¸­æ·»åŠ å­—æ®µtopï¼Œè¯¥å­—æ®µçš„æ•°å€¼è¶Šå¤§æ–‡ç« è¶Šé å‰ã€‚ 12title: ç¬¬ä¸‰ç¯‡top: 10 æ–‡ç« åŠ å¯†è®¿é—®ç¼–è¾‘æ–‡ä»¶MyBlog/themes/next/layout/_partials/head.swig,åœ¨ç¬¬äº”è¡Œæ’å…¥ä»¥ä¸‹ä»£ç ï¼š 1234567891011121314&lt;script&gt; (function () &#123; if (&apos;&#123;&#123; page.password &#125;&#125;&apos;) &#123; if (prompt(&apos;è¯·è¾“å…¥æ–‡ç« å¯†ç &apos;) !== &apos;&#123;&#123; page.password &#125;&#125;&apos;) &#123; alert(&apos;å¯†ç é”™è¯¯ï¼&apos;); if (history.length === 1) &#123; location.replace(&quot;http://xxxxxxx.xxx&quot;); // è¿™é‡Œæ›¿æ¢æˆä½ çš„é¦–é¡µ &#125; else &#123; history.back(); &#125; &#125; &#125; &#125;)();&lt;/script&gt; åœ¨æ–‡ç« front-matterä¸­æ·»åŠ å­—æ®µpasswordï¼Œè¯¥å­—æ®µçš„å€¼ä¸ä¸ºç©ºåˆ™æ–‡ç« åŠ å¯†ï¼Œè‹¥å­—æ®µçš„å€¼ä¸ºç©ºåˆ™æ–‡ç« æ²¡æœ‰åŠ å¯†ã€‚ 12title: ç¬¬ä¸‰ç¯‡password: è‡ªå®šä¹‰æ–°å»ºæ–‡ç« çš„mdæ–‡ä»¶ä¿®æ”¹/scaffolds/post.mdæ–‡ä»¶ä¸ºï¼š 123456789---title: &#123;&#123; title &#125;&#125;date: &#123;&#123; date &#125;&#125;tags: # æ ‡ç­¾categories: # åˆ†ç±»copyright: # trueæ·»åŠ ç‰ˆæƒä¿¡æ¯top: # æ•°å€¼è¶Šå¤§ï¼Œæ–‡ç« åœ¨é¦–é¡µè¶Šé å‰ã€‚ç”¨äºæ–‡ç« ç½®é¡¶password: # ä¸ºç©ºåˆ™æ–‡ç« ä¸åŠ å¯†ã€‚ç”¨äºæ–‡ç« åŠ å¯†è®¿é—®--- æ˜¾ç¤ºæµè§ˆè¿›åº¦ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹å­—æ®µscrollpercentçš„å€¼ä¸ºtrue 12# Scroll percent label in b2t button.scrollpercent: true ä½¿å¾—HEXOçš„nextä¸»é¢˜æ¸²æŸ“LATEXæ•°å­¦å…¬å¼ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹å­—æ®µmathjaxçš„å€¼ä¸ºtrue 123# MathJax Supportmathjax: enable: true ä¸»é¢˜ç¾åŒ–-3ä¿®æ”¹ä»£ç å—è‡ªå®šä¹‰æ ·å¼ç¼–è¾‘\\themes\\next\\source\\css\\_custom\\custom.styl,åœ¨æ–‡æœ«æ·»åŠ å¦‚ä¸‹ä»£ç ã€‚å…³äºé¢œè‰²çš„ä»£ç è§è¯¦æƒ… 123456789101112131415// Custom styles.code &#123; color: #ff7600; background: #fbf7f8; margin: 2px;&#125;// å¤§ä»£ç å—çš„è‡ªå®šä¹‰æ ·å¼.highlight, pre &#123; margin: 5px 0; padding: 5px; border-radius: 3px;&#125;.highlight, code, pre &#123; border: 1px solid #d6d6d6;&#125; è®¾ç½®ä»£ç é«˜äº®ä¸»é¢˜Nextä½¿ç”¨ Tomorrow Themeä½œä¸ºä»£ç é«˜äº®ã€‚æœ‰äº”ä¸ªä¸»é¢˜å¯ä¾›é€‰æ‹©ã€‚1.ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°å­—æ®µhighlight_theme,ä¿®æ”¹å®ƒçš„å€¼ã€‚ 12345# Code Highlight theme# Available value:# normal | night | night eighties | night blue | night bright# https://github.com/chriskempson/tomorrow-themehighlight_theme: normal å®ç°ä»£ç å˜æˆå½©è‰²ã€‚ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°å­—æ®µhighlightä¸‹çš„å­—æ®µauto_detectçš„å€¼ä¸ºtrue1234highlight: enable: true line_number: true auto_detect: true æ·»åŠ ä»£ç å—å¤åˆ¶åŠŸèƒ½é€šè¿‡ç¬¬ä¸‰æ–¹æ’ä»¶clipboard.jsæ¥å®ç°å¤åˆ¶åŠŸèƒ½ã€‚1.ç›®å½•/themes/next/source/js/srcä¸‹æ–°å»ºä¸¤ä¸ª .jsæ–‡ä»¶ã€‚ clipboard.min.jsã€‚ä¸‹è½½ç¬¬ä¸‰æ–¹æ’ä»¶clipboard.min.js clipboard-use.jsï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š 1234567891011121314151617/*é¡µé¢è½½å…¥å®Œæˆåï¼Œåˆ›å»ºå¤åˆ¶æŒ‰é’®*/!function (e, t, a) &#123; /* code */ var initCopyCode = function()&#123; var copyHtml = &apos;&apos;; copyHtml += &apos;&lt;button class=&quot;btn-copy&quot; data-clipboard-snippet=&quot;&quot;&gt;&apos;; copyHtml += &apos; &lt;i class=&quot;fa fa-copy&quot;&gt;&lt;/i&gt;&lt;span&gt;å¤åˆ¶&lt;/span&gt;&apos;; #å¤åˆ¶æŒ‰é’®çš„å›¾æ ‡å’Œæ˜¾ç¤ºæ–‡æœ¬ copyHtml += &apos;&lt;/button&gt;&apos;; $(&quot;.highlight .code pre&quot;).before(copyHtml); new ClipboardJS(&apos;.btn-copy&apos;, &#123; target: function(trigger) &#123; return trigger.nextElementSibling; &#125; &#125;); &#125; initCopyCode();&#125;(window, document); 2.åœ¨æ–‡ä»¶\\themes\\next\\source\\css\\_custom\\custom.stylæ–‡æœ«æ·»åŠ ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536//ä»£ç å—å¤åˆ¶æŒ‰é’®.highlight&#123; //æ–¹ä¾¿copyä»£ç æŒ‰é’®ï¼ˆbtn-copyï¼‰çš„å®šä½ position: relative;&#125;.btn-copy &#123; display: inline-block; cursor: pointer; background-color: #eee; background-image: linear-gradient(#fcfcfc,#eee); border: 1px solid #d5d5d5; border-radius: 3px; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; -webkit-appearance: none; font-size: 13px; font-weight: 700; line-height: 20px; color: #333; -webkit-transition: opacity .3s ease-in-out; -o-transition: opacity .3s ease-in-out; transition: opacity .3s ease-in-out; padding: 2px 6px; position: absolute; right: 5px; top: 5px; opacity: 0;&#125;.btn-copy span &#123; margin-left: 5px;&#125;.highlight:hover .btn-copy&#123; opacity: 1;&#125; 3.åœ¨.\\themes\\next\\layout\\_layout.swigæ–‡æœ«æ·»åŠ ä»£ç ï¼š 123&lt;!-- ä»£ç å—å¤åˆ¶åŠŸèƒ½ --&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;/js/src/clipboard.min.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;/js/src/clipboard-use.js&quot;&gt;&lt;/script&gt; å‚è§ï¼šHexo NexTä¸»é¢˜ä»£ç å—æ·»åŠ å¤åˆ¶åŠŸèƒ½Hexo nextåšå®¢æ·»åŠ æŠ˜å å—åŠŸèƒ½æ·»åŠ æŠ˜å ä»£ç å— æ–‡ç« æ‘˜è¦å›¾ç‰‡è®©å›¾ç‰‡å‡ºç°åœ¨ç½‘ç«™é¦–é¡µçš„æ–‡ç« æ‘˜è¦ä¸­ï¼Œä½†ä¸å‡ºç°åœ¨æ–‡ç« çš„æ­£æ–‡ä¸­ã€‚ ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹å­—æ®µexpert_descriptionçš„å€¼ä¸ºfalse 1234excerpt_description: falseauto_excerpt: enable: false ç¼–è¾‘æ–‡ä»¶themes/next/layout/_macro/post.swigï¼Œæ‰¾åˆ°ä»£ç ï¼š 12&#123;\\% elif post.excerpt %\\&#125; &#123;&#123; post.excerpt &#125;&#125; åœ¨å®ƒåé¢æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 12345&#123;\\% if post.image %\\&#125;&lt;div class=&quot;out-img-topic&quot;&gt; &lt;img src=&#123;&#123; post.image &#125;&#125; class=&quot;img-topic&quot; /&gt;&lt;/div&gt;&#123;\\% endif %\\&#125; ç¼–è¾‘æ–‡ä»¶/themes/next/source/css/_custom/custom.styl,åœ¨æ–‡æœ«æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š1234// è‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å›¾ç‰‡æ ·å¼img.img-topic &#123; width: 100%;&#125; ä½¿ç”¨æ–¹å¼æ˜¯ï¼Œåœ¨æ–‡ç« çš„.mdæ–‡ä»¶çš„front-matteråŠ ä¸Šä¸€è¡Œimage: path/to/imageï¼š 12345678910title: &#123;&#123; title &#125;&#125;date: &#123;&#123; date &#125;&#125;keywords: # ç”¨äºSEOæœç´¢å¼•æ“ä¼˜åŒ–tags: # æ ‡ç­¾categories: # åˆ†ç±»copyright: # trueæ·»åŠ ç‰ˆæƒä¿¡æ¯top: # æ•°å€¼è¶Šå¤§ï¼Œæ–‡ç« åœ¨é¦–é¡µè¶Šé å‰ã€‚ç”¨äºæ–‡ç« ç½®é¡¶password: # ä¸ºç©ºåˆ™æ–‡ç« ä¸åŠ å¯†ã€‚ç”¨äºæ–‡ç« åŠ å¯†è®¿é—®description:# ç”¨äºè®¾ç½®ã€é˜…è¯»å…¨æ–‡ã€‘image: # æ–‡ç« æ‘˜è¦å›¾ç‰‡ è®¾ç½®èƒŒæ™¯å›¾ç‰‡æ–¹æ³•ä¸€é€šè¿‡jquery-backstretch,ç¼–è¾‘æ–‡ä»¶/themes/next/layout/_layout.swig,åœ¨æœ€åçš„&lt;/body&gt;ä¹‹å‰æ·»åŠ  123&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/jquery-backstretch/2.0.4/jquery.backstretch.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt;$(&quot;body&quot;).backstretch(&quot;https://èƒŒæ™¯å›¾.jpg&quot;); æ–¹æ³•äºŒç¼–è¾‘æ–‡ä»¶/themes/next/source/css/_custom/custom.styl,æ·»åŠ ä»£ç ï¼š 12345// Custom styles.body &#123; background:url(/images/background.jpg); #å›¾ç‰‡æ”¾åœ¨/imagesæ–‡ä»¶ä¸­ background-attachment: fixed; #å›ºå®šèƒŒæ™¯å›¾&#125; æœç´¢å¼•æ“ä¼˜åŒ–ï¼ˆSEOï¼‰-æé«˜ç½‘ç«™æ’åæˆ‘ä»¬æ­å»ºå¥½åšå®¢ä¹‹åï¼Œåœ¨æœç´¢å¼•æ“ï¼ˆç™¾åº¦ã€Googleï¼‰ä¸­æœç´¢åšå®¢ï¼Œä¼šå‘ç°æ ¹æœ¬æœç´¢ä¸åˆ°ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„åšå®¢ç½‘ç«™æ²¡æœ‰æ²¡æœç´¢å¼•æ“æ”¶å½•ï¼Œä¹Ÿå°±æœç´¢ä¸åˆ°ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦è¿›è¡Œæœç´¢å¼•æ“ä¼˜åŒ–ã€‚æœç´¢å¼•æ“ä¼˜åŒ–æ˜¯ä¸ºæé«˜æˆ‘ä»¬çš„åšå®¢åœ¨æœç´¢ç»“æœä¸­çš„æ’åï¼Œæ¥å¢å¤§ç½‘ç«™çš„æµé‡ã€‚é€šä¿—åœ°è¯´ï¼Œå°±æ˜¯è®©æˆ‘ä»¬çš„åšå®¢æ›´å®¹æ˜“è¢«æœç´¢åˆ°ã€‚ è®©æœç´¢å¼•æ“æ”¶å½•æˆ‘ä»¬çš„ç½‘ç«™ã€‚ æé«˜ç½‘ç«™åœ¨æœç´¢ç»“æœä¸­çš„æ’åã€‚ hexoä¼˜åŒ–å‡†å¤‡ç¼–è¾‘é…ç½®æ–‡ä»¶ç«™ç‚¹é…ç½®æ–‡ä»¶ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­çš„è¿™å››é¡¹ä¸€å®šè¦å†™ 1234title: subtitle: description: url: æ‰“å¼€Nextä¸»é¢˜è‡ªå¸¦çš„SEOé…ç½®ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶,æ‰¾åˆ°è¿™å››ä¸ªå­—æ®µï¼Œå¹¶è®¾ç½®ä¸ºtrueã€‚ 1234canonical: trueseo: trueindex_with_subtitle: truebaidu_push: true è®¾ç½®å…³é”®å­— è®¾ç½®åšå®¢çš„å…³é”®å­—ã€‚ç¼–è¾‘ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ å­—æ®µkeywordsï¼Œå€¼ç”¨é€—å·éš”å¼€ã€‚ è®¾ç½®æ–‡ç« çš„å…³é”®å­—ã€‚åœ¨æ–‡ç« ä¸­ï¼Œæ·»åŠ å­—æ®µkeywordsï¼Œå€¼ç”¨é€—å·éš”å¼€ã€‚1keywords: word1,word2,word3 ç½‘ç«™é¦–é¡µtitleä¼˜åŒ–æˆ‘ä»¬çŸ¥é“è¯»æ–‡ç« æ—¶ï¼Œæ ‡é¢˜å’Œæ‘˜è¦å¾€å¾€æ¯”æ®µè½ä¸­çš„å¤§æ®µæ–‡å­—é‡è¦ã€‚åŒæ ·åœ¨æœç´¢å¼•æ“çˆ¬å–æ”¶å½•ç½‘é¡µæ—¶ï¼Œtitleèµ·åˆ°æ›´é‡è¦çš„ä½œç”¨ã€‚å…³é”®è¯å‡ºç°åœ¨ç½‘ç«™titleä¸­ï¼Œå¯ä»¥æé«˜ç½‘ç«™è¢«æœç´¢åˆ°çš„å¯èƒ½ã€‚ç½‘ç«™çš„titleä¸€èˆ¬ä¸è¶…è¿‡80å­—ç¬¦ã€‚æˆ‘ä»¬æŠŠç½‘ç«™é¦–é¡µçš„titleæ”¹ä¸ºç½‘ç«™åç§°-å…³é”®è¯-ç½‘ç«™æè¿°çš„å½¢å¼ã€‚ç¼–è¾‘æ–‡ä»¶\\themes\\next\\layout\\index.swigï¼Œå°†ä»¥ä¸‹ä»£ç  1&#123;\\% block title %\\&#125;&#123;&#123; config.title &#125;&#125;&#123;\\% if theme.index_with_subtitle and config.subtitle %\\&#125; - &#123;&#123;config.subtitle &#125;&#125;&#123;\\% endif %\\&#125;&#123;\\% endblock %\\&#125; ä¿®æ”¹ä¸ºï¼Œå¯ä»¥çœ‹åˆ°é€šè¿‡æ’å…¥å’Œæ¥æ·»åŠ å…³é”®è¯å’Œç½‘ç«™æè¿°ã€‚ 1&#123;\\% block title %\\&#125;&#123;&#123; config.title &#125;&#125; - &#123;&#123; config.keywords &#125;&#125; - &#123;&#123; theme.description &#125;&#125;&#123;\\% if theme.index_with_subtitle and config.subtitle %\\&#125; - &#123;&#123;config.subtitle &#125;&#125;&#123;\\% endif %\\&#125;&#123;\\% endblock %\\&#125; ç½‘ç«™åç§°ã€å…³é”®è¯ã€ç½‘ç«™æè¿°çš„æ˜¾ç¤ºæ–‡æœ¬åˆ†åˆ«å¯¹åº”ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­çš„å­—æ®µtitleï¼Œkeywordså’Œdescriptionçš„å€¼ã€‚ 1234567title: spring&apos;Blog #ç½‘ç«™æ ‡é¢˜subtitle: description: #å¯¹åº”ç½‘ç«™æè¿°keywords: #å…³é”®è¯author: spring-quanlanguage: zh-Hanstimezone: ç»™æ‰€æœ‰å¤–éƒ¨é“¾æ¥æ·»åŠ nofollowæ ‡ç­¾ ä½¿ç”¨npm install --saveå®‰è£…æ’ä»¶hexo-autonofollow 1npm install hexo-autonofollow --save ç¼–è¾‘ç«™ç‚¹é…ç½®æ–‡ä»¶,åœ¨æ–‡æœ«æ·»åŠ å¦‚ä¸‹ä»£ç ã€‚ä¸æƒ³æ·»åŠ çš„é“¾æ¥å†™åœ¨å­—æ®µexcludeåã€‚ 12345nofollow: enable: true exclude: - exclude1.com - exclude2.com æäº¤é“¾æ¥å’ŒéªŒè¯ç½‘ç«™è¿™ä¸€æ­¥æ˜¯è®©æœç´¢å¼•æ“æ”¶å½•æˆ‘ä»¬çš„ç½‘ç«™ã€‚æˆ‘ä»¬éœ€è¦åœ¨æœç´¢å¼•æ“æäº¤æˆ‘ä»¬çš„é“¾æ¥ï¼Œæäº¤é“¾æ¥æ—¶éœ€è¦éªŒè¯è¿™ä¸ªç½‘å€æ˜¯æˆ‘ä»¬çš„ï¼Œä¸æ˜¯åˆ«äººçš„ã€‚ä»¥ä¸‹ä¸ºæœç´¢å¼•æ“çš„ç½‘ç«™ç®¡ç†å·¥å…· googleçš„ç½‘ç«™ç®¡ç†å·¥å…·Search Console ç™¾åº¦çš„æœç´¢èµ„æºå¹³å° æœç´¢å¼•æ“ç»™å‡ºäº†ç½‘ç«™éªŒè¯çš„å¤šç§æ–¹å¼ï¼Œç™¾åº¦å’Œè°·æ­Œè¿›è¡Œç½‘ç«™éªŒè¯çš„åŸç†å’Œæ­¥éª¤å·®ä¸å¤šã€‚è¿™é‡Œä»‹ç»ä¸¤ç§éªŒè¯æ–¹å¼ï¼šhtmlæ–‡ä»¶éªŒè¯å’ŒCNAMEéªŒè¯htmlæ–‡ä»¶éªŒè¯ ä¸‹è½½éªŒè¯æ–‡ä»¶.htmlï¼Œæ”¾åˆ°ç«™ç‚¹ç›®å½•/sourceä¸‹ã€‚ hexoä¼šè‡ªåŠ¨å¯¹HTMLæ–‡ä»¶è¿›è¡Œæ¸²æŸ“ï¼Œä½†æˆ‘ä»¬ä¸å¸Œæœ›éªŒè¯æ–‡ä»¶è¢«æ¸²æŸ“ï¼Œéœ€è¦åšä¸€äº›é…ç½®ã€‚ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œç¼–è¾‘å­—æ®µskip_renderçš„å€¼ä¸º éªŒè¯æ–‡ä»¶å.htmlã€‚è¯¥å­—æ®µåå¯ä»¥æœ‰å¤šä¸ªå€¼ï¼Œä»¥é€—å·åˆ†éš”ã€‚è¯¥å­—æ®µåçš„æ–‡ä»¶åä¼šè·³è¿‡æ¸²æŸ“ã€‚ 1skip_render: google6af533d85b9bfd8c.html,baidu_verify_mreXNGCYRV.html æ¸…é™¤ç¼“å­˜å¹¶å°†ä¿®æ”¹åŒæ­¥åˆ°github. 12hexo cleanhexo g -d ç‚¹å‡»å®ŒæˆéªŒè¯ã€‚ CNAMEéªŒè¯ CNAMEéªŒè¯æ˜¯è®¾ç½®åŸŸåè§£æã€‚éœ€è¦ç™»å½•é˜¿é‡Œäº‘ä¸‡ç½‘ã€‚ é€‰æ‹©æ§åˆ¶å°&gt;äº§å“ä¸æœåŠ¡&gt;åŸŸåï¼Œç®¡ç†åŸŸåçš„è§£æã€‚æ·»åŠ CNAMEç±»å‹çš„è§£æã€‚ ç«™ç‚¹åœ°å›¾sitemapå’Œçˆ¬è™«åè®®robot.txt ç«™ç‚¹åœ°å›¾æ˜¯ä¸€ä¸ªæ–‡ä»¶ã€‚å‘Šè¯‰Googleå’Œç™¾åº¦åº”è¯¥æŠ“å–å“ªäº›ç½‘é¡µã€‚robot.txtä¹Ÿæ˜¯ä¸€ä¸ªæ–‡ä»¶ã€‚å‘Šè¯‰Googleå’Œç™¾åº¦ä¸åº”è¯¥æŠ“å–å“ªäº›ç½‘é¡µã€‚ ç«™ç‚¹åœ°å›¾sitemapå…ˆæ·»åŠ ç«™ç‚¹åœ°å›¾æ–‡ä»¶ï¼Œå†æäº¤ç»™Googleå’Œç™¾åº¦ã€‚å‘Šè¯‰Googleå’Œç™¾åº¦åº”è¯¥æŠ“å–å“ªäº›ç½‘é¡µã€‚ ä½¿ç”¨å‘½ä»¤å®‰è£…è‡ªåŠ¨ç”Ÿæˆç«™ç‚¹åœ°å›¾sitemapçš„æ’ä»¶ã€‚ 12npm install hexo-generator-sitemap --savenpm install hexo-generator-baidu-sitemap --save ç¼–è¾‘ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œåœ¨æ–‡æœ«æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š 1234sitemap: path: sitemap.xmlbaidusitemap: path: baidusitemap.xml æ‰§è¡Œå‘½ä»¤ï¼Œä¼šåœ¨ç«™ç‚¹ç›®å½•ä¸‹çš„publicæ–‡ä»¶å¤¹ç”Ÿæˆç«™ç‚¹åœ°å›¾æ–‡ä»¶sitemap.xmlå’Œbaidusitemap.xmlæ–‡ä»¶ï¼Œå‰è€…æäº¤ç»™Googleï¼Œåè€…æäº¤ç»™ç™¾åº¦ã€‚ 1hexo g æŠŠç«™ç‚¹åœ°å›¾æ–‡ä»¶æäº¤ç»™Googleå’Œç™¾åº¦ã€‚ åœ¨Googleçš„æ—§ç‰ˆSearch Consoleæäº¤ç«™ç‚¹åœ°å›¾æ–‡ä»¶https://buptccq.top/sitemap.xml(ä¿®æ”¹ä¸ºä½ è‡ªå·±çš„åŸŸå)ã€‚ åœ¨ç™¾åº¦çš„ç½‘ç«™ç®¡ç†å·¥å…·æäº¤ç«™ç‚¹åœ°å›¾æ–‡ä»¶https://buptccq.top/baidusitemap.xml(ä¿®æ”¹ä¸ºä½ è‡ªå·±çš„åŸŸå)ã€‚ çˆ¬è™«åè®®robot.txtï¼Œåˆæˆèœ˜è››åè®®æ·»åŠ çˆ¬è™«åè®®æ–‡ä»¶robot.txtï¼Œå†æäº¤ç»™Googleå’Œç™¾åº¦ã€‚å‘Šè¯‰Googleå’Œç™¾åº¦ä¸è¦æŠ“å–å“ªäº›ç½‘é¡µã€‚ åœ¨ç«™ç‚¹ç›®å½•sourceä¸‹æ–°å»ºæ–‡ä»¶robot.txtã€‚å†…å®¹å¦‚ä¸‹ï¼Œæ³¨æ„ä¿®æ”¹ä¸ºè‡ªå·±çš„åŸŸåã€‚ 12345678910111213141516#hexo robots.txtUser-agent: *Allow: /Allow: /archives/Disallow: /vendors/Disallow: /js/Disallow: /css/Disallow: /fonts/Disallow: /vendors/Disallow: /fancybox/Sitemap: http://blog.tangxiaozhu.com/search.xml #æ³¨æ„ä¿®æ”¹ä¸ºä½ è‡ªå·±çš„åŸŸåSitemap: http://blog.tangxiaozhu.com/sitemap.xmlSitemap: http://blog.tangxiaozhu.com/baidusitemap.xml æ‰§è¡Œå‘½ä»¤hexo d -géƒ¨ç½²åˆ°githubä¸Šã€‚ 1hexo d -g å†æŠŠçˆ¬è™«åè®®æ–‡ä»¶æäº¤ç»™Googleå’Œç™¾åº¦ã€‚ Googleçš„æ—§ç‰ˆSearch Consoleã€‚ ç™¾åº¦çš„ç½‘ç«™ç®¡ç†å·¥å…·ã€‚ è°·æ­Œæ”¶å½•å’Œç™¾åº¦æ”¶å½•æŸ¥çœ‹ç½‘ç«™æ˜¯å¦è¢«æ”¶å½•åœ¨ç™¾åº¦æˆ–Googleæµè§ˆå™¨ä¸­ï¼Œä»¥site:&lt;your url&gt;å½¢å¼æœç´¢ä½ çš„åšå®¢ã€‚å¦‚æœèƒ½æœåˆ°ï¼Œå°±æ˜¯è¢«æ”¶å½•äº†ã€‚æœä¸åˆ°å°±æ˜¯æ²¡æœ‰æ”¶å½•ã€‚ è°·æ­Œæ”¶å½•ç™¾åº¦æ”¶å½•æˆ‘ä»¬åœ¨å‰é¢å·²ç»æŠŠåšå®¢é¦–é¡µçš„ç½‘å€æ”¶å½•åˆ°ç™¾åº¦æœç´¢å¼•æ“äº†ï¼Œä½†å½“æˆ‘ä»¬å†™å‡ºæ–°çš„åšå®¢ï¼Œäº§ç”Ÿæ–°çš„é“¾æ¥åï¼Œéœ€è¦æŠŠè¿™äº›æ–°çš„é“¾æ¥æ”¶å½•åˆ°ç™¾åº¦ã€‚è¿™é‡Œä»‹ç»ä¸¤ç§å®ç°è‡ªåŠ¨æ”¶å½•çš„æ–¹å¼ï¼šä¸»åŠ¨æ¨é€å’Œè‡ªåŠ¨æ¨é€ä¸»åŠ¨æ¨é€ä¸»åŠ¨æ¨é€å°†æ–°äº§ç”Ÿçš„é“¾æ¥ç«‹å³æ¨é€ç»™ç™¾åº¦æœç´¢å¼•æ“ï¼Œä»è€Œä¿è¯æ–°é“¾æ¥è¢«å°½æ—©æ”¶å½•ã€‚ ä½¿ç”¨å‘½ä»¤npm install --saveå®‰è£…è‡ªåŠ¨ç™¾åº¦æ¨é€æ’ä»¶ã€‚ 1npm install hexo-baidu-url-submit --save ç¼–è¾‘ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œåœ¨æ–‡æœ«æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š 12345baidu_url_submit: count: 3 ## æ¯”å¦‚3, ä»£è¡¨æäº¤æœ€æ–°çš„ä¸‰ä¸ªé“¾æ¥ host: &lt;www.henvyluk.com&gt; ## åœ¨ç™¾åº¦ç«™é•¿å¹³å°ä¸­æ³¨å†Œçš„åŸŸå token: &lt;your_token&gt; ## è¯·æ³¨æ„è¿™æ˜¯æ‚¨çš„ç§˜é’¥, è¯·ä¸è¦å‘å¸ƒåœ¨å…¬ä¼—ä»“åº“é‡Œ! path: baidu_urls.txt ## æ–‡æœ¬æ–‡æ¡£çš„åœ°å€, æ–°é“¾æ¥ä¼šä¿å­˜åœ¨æ­¤æ–‡æœ¬æ–‡æ¡£é‡Œ å…¶ä¸­&lt;your_token&gt;å¯ä»¥åœ¨ç™¾åº¦ç½‘å€ç®¡ç†å·¥å…·ä¸­æ‰¾åˆ°ï¼š éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç¼–è¾‘ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œç¡®ä¿å­—æ®µurlçš„å€¼ä¸ºä½ çš„åŸŸåã€‚ 123# URL## If your site is put in a subdirectory, set url as &apos;http://yoursite.com/child&apos; and root as &apos;/child/&apos;url: https://buptccq.top #http://yoursite.com ç¼–è¾‘ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°å­—æ®µdeploy,æ·»åŠ ä¸€ä¸ªæ–°çš„deployç±»å‹-type: baidu_url_submitterã€‚ä¸åŒçš„deployç±»å‹ç”¨-typeè¡¨ç¤ºã€‚ 123456deploy:- type: baidu_url_submitter- type: git # repository: https://github.com/spring-quan/spring-quan.github.io repository: git@github.com:spring-quan/spring-quan.github.io.git branch: master ä¸»åŠ¨æ¨é€çš„åŸç†å¦‚ä¸‹ï¼š äº§ç”Ÿæ–°é“¾æ¥ã€‚hexo gä¼šç”Ÿæˆæ–‡æœ¬æ–‡ä»¶baidu_urls.txtï¼Œé‡Œé¢åŒ…å«æœ€æ–°çš„é“¾æ¥ã€‚ æ¨é€æ–°é“¾æ¥ã€‚hexo dä¼šä»æ–‡æœ¬æ–‡ä»¶baidu_urls.txtä¸­è¯»å–æ–°é“¾æ¥ï¼Œå†æ¨é€ç»™ç™¾åº¦ã€‚ è‡ªåŠ¨æ¨é€ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹å­—æ®µbaidu_pushçš„å€¼ä¸ºtrueã€‚ 12# Enable baidu push so that the blog will push the url to baidu automatically which is very helpful for SEObaidu_push: true å‚è§ï¼šåŸºäºHexoæ­å»ºä¸ªäººåšå®¢â€”â€”è¿›é˜¶ç¯‡(ä»å…¥é—¨åˆ°å…¥åœŸ)Hexo Seoä¼˜åŒ–è®©ä½ çš„åšå®¢åœ¨googleæœç´¢æ’åç¬¬ä¸€ ##è¸©è¿‡çš„å‘ â€œhexo serverâ€æœ¬åœ°å¯åŠ¨æ—¶ï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š 1Unhandled rejection Error: ENOENT: no such file or directory, open &apos;/MyBlog/themes/next/layout/_scripts/schemes/.swig&apos; é”™è¯¯åŸå› å¤„åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶_config.ymlå­˜åœ¨ä¸è§„èŒƒçš„å†…å®¹ã€‚è¦ä»”ç»†æ£€æŸ¥ï¼Œè§„èŒƒåŒ–å†…å®¹å°±è¡Œã€‚ä¿®æ”¹è¿‡æ¥ä¹‹åï¼Œè¦å…ˆæ‰§è¡Œhexo clean,å†hexo serverå°±å¯ä»¥äº†ã€‚ å‚è€ƒæ–‡ç«  Hexoå®˜æ–¹æ•™ç¨‹ Nextå®˜æ–¹æ•™ç¨‹ markdownä¸­æ–‡æ–‡æ¡£ æ‰“é€ ä¸ªæ€§è¶…èµåšå®¢Hexo+NexT+GitHubPagesçš„è¶…æ·±åº¦ä¼˜åŒ– ã€æ¨èï¼Œæ•´ç†å¾ˆç³»ç»Ÿã€‘ åŸºäºHexoæ­å»ºä¸ªäººåšå®¢â€”â€”è¿›é˜¶ç¯‡(ä»å…¥é—¨åˆ°å…¥åœŸ) hexoçš„nextä¸»é¢˜ä¸ªæ€§åŒ–æ•™ç¨‹:æ‰“é€ ç‚«é…·ç½‘ç«™ Hexoæ­å»ºåšå®¢æ•™ç¨‹ æ‰‹æŠŠæ‰‹æ•™ä½ ä½¿ç”¨Hexo + Github Pagesæ­å»ºä¸ªäººç‹¬ç«‹åšå®¢ ä» 0 å¼€å§‹æ­å»º hexo åšå®¢","categories":[{"name":"æŠ€æœ¯èµ„æ–™","slug":"æŠ€æœ¯èµ„æ–™","permalink":"http://yoursite.com/categories/æŠ€æœ¯èµ„æ–™/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://yoursite.com/tags/Hexo/"},{"name":"æ­å»ºåšå®¢","slug":"æ­å»ºåšå®¢","permalink":"http://yoursite.com/tags/æ­å»ºåšå®¢/"}]}]}